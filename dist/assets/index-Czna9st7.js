var e,t,n,s;import{r as o,b as i,a as r}from"./vendor--zLKLCTa.js";import{r as a,R as l,a as c,A as d,C as u,X as p,Y as h,T as m,L as f,b as g,P as x,c as b,d as v}from"./charts-Cr6u4DuP.js";import{c as y}from"./supabase-DAs0N7jI.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var E,w,N={exports:{}},A={};var S,C=(w||(w=1,N.exports=function(){if(E)return A;E=1;var e=o(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(e,n,o){var a,l={},c=null,d=null;for(a in void 0!==o&&(c=""+o),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(d=n.ref),n)s.call(n,a)&&!r.hasOwnProperty(a)&&(l[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps)void 0===l[a]&&(l[a]=n[a]);return{$$typeof:t,type:e,key:c,ref:d,props:l,_owner:i.current}}return A.Fragment=n,A.jsx=a,A.jsxs=a,A}()),N.exports),I={};const j=r(function(){if(S)return I;S=1;var e=i();return I.createRoot=e.createRoot,I.hydrateRoot=e.hydrateRoot,I}());var T=(e=>(e.Low="Baixa",e.Medium="M√©dia",e.High="Alta",e.Urgent="Urgente",e))(T||{}),_=(e=>(e.Entry="entry",e.Approval="approval",e.Execution="execution",e.Done="done",e))(_||{});
/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const O=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},R=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),k=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var P={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=a.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:i,iconNode:r,...l},c)=>a.createElement("svg",{ref:c,...P,width:t,height:t,stroke:e,strokeWidth:s?24*Number(n)/Number(t):n,className:R("lucide",o),...!i&&!k(l)&&{"aria-hidden":"true"},...l},[...r.map(([e,t])=>a.createElement(e,t)),...Array.isArray(i)?i:[i]])),M=(e,t)=>{const n=a.forwardRef(({className:n,...s},o)=>{return a.createElement(D,{ref:o,iconNode:t,className:R(`lucide-${i=O(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...s});var i});return n.displayName=O(e),n},U=M("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),L=M("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),q=M("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),G=M("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),F=M("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),H=M("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),V=M("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),z=M("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),B=M("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),$=M("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),J=M("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),W=M("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Y=M("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),K=M("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),X=M("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Q=M("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Z=M("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ee=M("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),te=M("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ne=M("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),se=M("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),oe=M("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),ie=M("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),re=M("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ae=M("file-down",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),le=M("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ce=M("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),de=M("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ue=M("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),pe=M("kanban",[["path",{d:"M5 3v14",key:"9nsxs2"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"M19 3v18",key:"1sk56x"}]]),he=M("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),me=M("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),fe=M("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),ge=M("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),xe=M("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),be=M("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),ve=M("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),ye=M("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Ee=M("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),we=M("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ne=M("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Ae=M("router",[["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6.01 18H6",key:"19vcac"}],["path",{d:"M10.01 18H10",key:"uamcmx"}],["path",{d:"M15 10v4",key:"qjz1xs"}],["path",{d:"M17.84 7.17a4 4 0 0 0-5.66 0",key:"1rif40"}],["path",{d:"M20.66 4.34a8 8 0 0 0-11.31 0",key:"6a5xfq"}]]),Se=M("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Ce=M("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Ie=M("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),je=M("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Te=M("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),_e=M("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Oe=M("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Re=M("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),ke=M("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]),Pe=M("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),De=M("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Me=M("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Ue=M("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Le=M("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),qe=M("tv",[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]]),Ge=M("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Fe=M("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]),He=M("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ve="AINFOTECH - Reparo e Manuten√ß√£o",ze="AINFOTECH",Be="28.527.762/0001-60",$e="Ericson de Brito Santos",Je="Av. Angela Maria Santana Ribeiro, 152 - In√°cio Barbosa, Aracaju - SE",We="(79) 9 9908-0924",Ye="infomedaju@gmail.com",Ke="Reparo e Manuten√ß√£o de Equipamentos Eletroeletr√¥nicos e Auditoria Corporativa",Xe="Ericson de Brito Santos",Qe=70,Ze=10,et="https://ainfotech.netlify.app",tt=[{id:_.Entry,title:"Entrada / Triagem",color:"bg-slate-500"},{id:_.Approval,title:"Aguardando Aprova√ß√£o",color:"bg-yellow-500"},{id:_.Execution,title:"Em Execu√ß√£o",color:"bg-blue-500"},{id:_.Done,title:"Finalizado / Entregue",color:"bg-emerald-500"}],nt=[{id:"cl-1",label:"Liga/Desliga",checked:!1},{id:"cl-2",label:"Tela/Monitor ok",checked:!1},{id:"cl-3",label:"Carregador incluso",checked:!1},{id:"cl-4",label:"Parafusos ok",checked:!1},{id:"cl-5",label:"Teclado/Touchpad",checked:!1},{id:"cl-6",label:"Carca√ßa √≠ntegra (sem trincas)",checked:!1}],st=[{id:"fmt-bck-full",label:"Formata√ß√£o + Backup Completo",description:"Formata√ß√£o, drivers, Office e Backup de arquivos.",serviceCost:150,partsCost:0},{id:"mo-simple",label:"M√£o de Obra (Servi√ßo Simples)",description:"Taxa de m√£o de obra para servi√ßos de reparo padr√£o.",serviceCost:180,partsCost:0},{id:"fmt-only",label:"Formata√ß√£o Simples (Sem Backup)",description:"Formata√ß√£o e instala√ß√£o do Windows 10/11 + Drivers.",serviceCost:80,partsCost:0},{id:"visita-tec",label:"Visita T√©cnica / Diagn√≥stico",description:"Deslocamento e an√°lise t√©cnica em domic√≠lio (Aracaju).",serviceCost:70,partsCost:0},{id:"ssd-120",label:"Pe√ßa: SSD 120GB",description:"Unidade SSD 120GB (Apenas Pe√ßa).",serviceCost:0,partsCost:100},{id:"ssd-240",label:"Pe√ßa: SSD 240GB",description:"Unidade SSD 240GB (Apenas Pe√ßa).",serviceCost:0,partsCost:180},{id:"ssd-480",label:"Pe√ßa: SSD 480GB",description:"Unidade SSD 480GB (Apenas Pe√ßa).",serviceCost:0,partsCost:350},{id:"brd-rec",label:"Recupera√ß√£o de Placa (Eletr√¥nica)",description:"Reparo eletr√¥nico em placa m√£e (curto, solda BGA, componentes).",serviceCost:250,partsCost:0},{id:"bck-01",label:"Servi√ßo de Backup Avulso",description:"C√≥pia de seguran√ßa de arquivos do usu√°rio (At√© 100GB).",serviceCost:50,partsCost:0}],ot=[{icon:be,title:"Notebooks & Desktops",desc:"Formata√ß√£o, upgrade de SSD e reparo de placa-m√£e."},{icon:F,title:"Auditoria Corporativa",desc:"Otimiza√ß√£o de fluxo de trabalho e infraestrutura para empresas."},{icon:Le,title:"Atendimento Domiciliar",desc:"Visita t√©cnica em Aracaju (Sob consulta). Retirada de pequenos equipamentos."},{icon:qe,title:"Smart TVs",desc:"Reparo de LEDs e fontes. (N√£o realizamos retirada, trazer √† loja)."},{icon:Te,title:"Celulares & Tablets",desc:"Troca de telas, baterias e conectores de carga."},{icon:Ae,title:"Redes & Wi-Fi",desc:"Estrutura√ß√£o de rede para melhorar a conectividade da sua empresa."},{icon:je,title:"Automa√ß√£o Comercial",desc:"Sistemas para PDV, leitores e impressoras t√©rmicas."},{icon:ee,title:"Eletr√¥nica Geral",desc:"Reparo especializado em placas de diversos equipamentos."}],it={hardware:"1. GARANTIA LEGAL E TRANSPORTE (ART. 26 CDC):\nA garantia de servi√ßos √© de 90 dias para pe√ßas e m√£o de obra. OBSERVA√á√ÉO IMPORTANTE: N√ÉO REALIZAMOS RETIRADA DE TELEVISORES ou equipamentos de grande porte. Realizamos retirada apenas de equipamentos de PEQUENO PORTE (Notebooks, CPUs, Consoles). O cliente √© respons√°vel pelo transporte de TVs at√© a nossa unidade.",software:'2. SERVI√áOS DE SOFTWARE E L√ìGICA:\nA garantia para formata√ß√£o, limpeza de v√≠rus e instala√ß√£o de sistemas √© de 7 (sete) dias. N√£o h√° garantia para "softwares" contra novos v√≠rus, malwares ou atualiza√ß√µes do fabricante que causem lentid√£o, pois s√£o fatores externos ao servi√ßo prestado.',backup:"3. PERDA DE DADOS E BACKUP (EXCLUS√ÉO DE RESPONSABILIDADE):\nO cliente declara estar ciente de que servi√ßos de hardware possuem risco intr√≠nseco de perda de dados. √â DEVER EXCLUSIVO DO CONSUMIDOR manter backup atualizado de seus arquivos ANTES de deixar o equipamento. A AINFOTECH N√ÉO SE RESPONSABILIZA POR PERDA DE DADOS.",abandonment:"4. ABANDONO DE EQUIPAMENTO (ART. 1.275 DO C√ìDIGO CIVIL):\nO equipamento deixado deve ser retirado no prazo m√°ximo de 90 dias ap√≥s a comunica√ß√£o. Ap√≥s este prazo, o bem ser√° considerado ABANDONADO, podendo ser descartado ou vendido para custeio."},rt=({priority:e})=>{const t={[T.Low]:"bg-slate-700 text-slate-300 border-slate-600",[T.Medium]:"bg-blue-900/40 text-blue-300 border-blue-700/50",[T.High]:"bg-orange-900/40 text-orange-300 border-orange-700/50",[T.Urgent]:"bg-red-900/40 text-red-300 border-red-700/50"};return C.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border uppercase tracking-wider font-semibold ${t[e]}`,children:e})},at=({task:e,onDragStart:t,onClick:n})=>{const[s,o]=a.useState(!1),i=!e.isApproved&&e.budgetExpiryDate&&Date.now()>e.budgetExpiryDate,r=t=>{t.stopPropagation(),n(e)};return C.jsxs("div",{draggable:!0,onDragStart:n=>{t(n,e.id)},onClick:()=>o(!s),className:`group relative border rounded-lg p-4 cursor-grab active:cursor-grabbing transition-all duration-300 shadow-sm hover:shadow-md select-none flex flex-col gap-2\n        ${s?"bg-slate-800 border-blue-500/30 ring-1 ring-blue-500/20":"bg-slate-800/50 hover:bg-slate-800 border-slate-700/50 hover:border-blue-500/30"}\n        ${i?"border-red-500/50 shadow-red-900/20":""}\n      `,children:[C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:"font-mono text-[10px] text-blue-400 bg-blue-900/20 px-1.5 py-0.5 rounded border border-blue-500/20",children:e.osNumber}),C.jsx(rt,{priority:e.priority})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[i&&C.jsx("div",{title:"Or√ßamento Vencido",className:"text-red-400 animate-pulse",children:C.jsx(K,{size:16})}),C.jsx("button",{onClick:r,className:"text-slate-500 hover:text-blue-400 transition-colors md:hidden",children:C.jsx(oe,{size:14})}),s?C.jsx(Y,{size:16,className:"text-slate-500"}):C.jsx(W,{size:16,className:"text-slate-500"})]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-slate-100 font-medium text-sm mb-1 leading-snug break-words",children:e.title}),C.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-400 mb-1",children:[C.jsx(be,{size:12,className:"shrink-0"}),C.jsx("span",{className:"truncate",children:e.equipment})]}),C.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-500",children:[C.jsx(Ge,{size:12,className:"shrink-0"}),C.jsx("span",{className:"truncate",children:e.clientName})]})]}),!s&&C.jsx("div",{className:"flex justify-between items-center mt-1 pt-2 border-t border-slate-700/50",children:C.jsxs("div",{className:"flex flex-col gap-1",children:[C.jsx("span",{className:"text-[10px] text-slate-500",children:new Date(e.createdAt).toLocaleDateString()}),C.jsxs("div",{className:"flex gap-1",children:[e.isApproved&&C.jsx("span",{className:"text-[9px] text-green-400 font-bold bg-green-900/20 px-1 rounded w-fit",children:"APROVADO"}),i&&C.jsx("span",{className:"text-[9px] text-red-400 font-bold bg-red-900/20 px-1 rounded w-fit",children:"VENCIDO"})]})]})}),s&&C.jsxs("div",{className:"mt-2 pt-3 border-t border-slate-700/50 space-y-3 animate-in fade-in slide-in-from-top-1 duration-200",children:[C.jsxs("div",{className:"bg-slate-900/50 p-2 rounded border border-slate-700/50",children:[C.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-500 uppercase mb-1",children:[C.jsx(Pe,{size:10})," Descri√ß√£o do Problema"]}),C.jsx("p",{className:"text-xs text-slate-300 leading-relaxed italic",children:e.description?`"${e.description}"`:"Sem descri√ß√£o detalhada."})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 bg-slate-900/30 p-1.5 rounded",children:[C.jsx(Ee,{size:12,className:"text-blue-500"}),C.jsx("span",{children:e.clientPhone})]}),e.clientAddress&&C.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 bg-slate-900/30 p-1.5 rounded overflow-hidden",children:[C.jsx(ge,{size:12,className:"text-blue-500 shrink-0"}),C.jsx("span",{className:"truncate",children:e.clientAddress.split(",")[0]})]})]}),C.jsxs("button",{onClick:r,className:"w-full mt-1 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold py-2 rounded-lg transition-colors flex items-center justify-center gap-2 shadow-lg shadow-blue-900/20",children:[C.jsx(oe,{size:14}),"Abrir Detalhes Completos"]})]})]})},lt={"bg-slate-500":"#64748b","bg-yellow-500":"#eab308","bg-blue-500":"#3b82f6","bg-emerald-500":"#10b981","bg-green-500":"#22c55e","bg-red-500":"#ef4444","bg-orange-500":"#f97316","bg-purple-500":"#a855f7","bg-indigo-500":"#6366f1"},ct=({id:e,title:t,tasks:n,color:s,onDragStart:o,onDragOver:i,onDrop:r,onTaskClick:a,onAddTask:l})=>{const c=lt[s]||"#64748b";return C.jsxs("div",{className:"flex flex-col flex-shrink-0 w-[85vw] md:w-80 h-full max-h-full glass-panel rounded-xl border-t-4 border-t-transparent overflow-hidden transition-colors snap-center",style:{borderTopColor:c},onDragOver:i,onDrop:t=>r(t,e),children:[C.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-slate-700/50 bg-slate-800/40",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("div",{className:`w-3 h-3 rounded-full ${s}`}),C.jsx("h2",{className:"font-semibold text-slate-100 tracking-tight text-sm truncate max-w-[150px]",children:t}),C.jsx("span",{className:"ml-1 px-2 py-0.5 bg-slate-700/50 rounded-full text-xs text-slate-400 font-mono",children:n.length})]}),C.jsx("button",{onClick:()=>l(e),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white transition-colors",children:C.jsx(we,{size:18})})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3 custom-scrollbar bg-slate-900/20",children:[n.map(e=>C.jsx(at,{task:e,onDragStart:o,onClick:a},e.id)),0===n.length&&C.jsx("div",{className:"h-24 flex items-center justify-center border-2 border-dashed border-slate-800 rounded-lg text-slate-600 text-sm",children:"Vazio"})]})]})},dt=y((null==(t=null==(e=import.meta)?void 0:e.env)?void 0:t.VITE_SUPABASE_URL)||"https://usongmdiebxsfhcwdhiz.supabase.co",(null==(s=null==(n=import.meta)?void 0:n.env)?void 0:s.VITE_SUPABASE_ANON_KEY)||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVzb25nbWRpZWJ4c2ZoY3dkaGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyNzA4NDgsImV4cCI6MjA4MDg0Njg0OH0.zi6G8CmogrgJeKEkWMVLx34H4aoL1ePLbAQbu8if44o"),ut=({onAdminLogin:e,onClientLogin:t})=>{const[n,s]=a.useState("client"),[o,i]=a.useState(""),[r,l]=a.useState(""),[c,d]=a.useState(""),[u,p]=a.useState(!1),[h,m]=a.useState(""),[f,g]=a.useState(!1),x="https://www.instagram.com/infomedinformatica?igsh=NmJqYzJ4ODk2dGQ=",b="https://wa.me/5579999080924?text=Ol%C3%A1%2C%20gostaria%20de%20informa%C3%A7%C3%B5es%20sobre%20servi%C3%A7os.";return C.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center p-4 bg-slate-950 relative overflow-y-auto",children:[C.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[C.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-blue-600/10 rounded-full blur-[120px] animate-pulse"}),C.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-indigo-600/10 rounded-full blur-[120px] animate-pulse delay-1000"}),C.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"})]}),C.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 bg-slate-900/40 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/10 overflow-hidden z-10 relative group hover:border-white/20 transition-all duration-500 my-auto",children:[C.jsxs("div",{className:"hidden md:flex flex-col justify-between p-12 bg-gradient-to-br from-slate-900/80 to-slate-900/40 border-r border-white/5 relative",children:[C.jsxs("div",{className:"relative z-10",children:[C.jsx("div",{className:"w-20 h-20 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center mb-8 shadow-xl shadow-blue-500/20 ring-1 ring-white/20",children:C.jsx(Fe,{className:"text-white w-10 h-10"})}),C.jsxs("h1",{className:"text-4xl font-bold text-white mb-4 tracking-tight",children:["Service Desk ",C.jsx("span",{className:"text-blue-400",children:"Pro"})]}),C.jsx("p",{className:"text-slate-400 text-base leading-relaxed max-w-sm border-l-2 border-blue-500/50 pl-4",children:"Acompanhamento em tempo real, aprova√ß√£o digital e gest√£o inteligente para sua assist√™ncia t√©cnica."})]}),C.jsxs("div",{className:"relative z-10 mt-12",children:[C.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4",children:"Conecte-se Conosco"}),C.jsxs("div",{className:"flex gap-4",children:[C.jsx("a",{href:x,target:"_blank",rel:"noreferrer",className:"p-3 bg-slate-800/50 hover:bg-gradient-to-tr hover:from-purple-600 hover:to-pink-600 rounded-xl transition-all duration-300 text-slate-400 hover:text-white border border-white/5 hover:border-transparent group/icon shadow-lg",title:"Siga no Instagram",children:C.jsx(ue,{size:24})}),C.jsx("a",{href:b,target:"_blank",rel:"noreferrer",className:"p-3 bg-slate-800/50 hover:bg-green-600 rounded-xl transition-all duration-300 text-slate-400 hover:text-white border border-white/5 hover:border-transparent group/icon shadow-lg",title:"Fale no WhatsApp",children:C.jsx(xe,{size:24})})]}),C.jsxs("div",{className:"mt-6 flex items-center gap-2 text-slate-500 text-xs font-mono",children:[C.jsx(Ee,{size:12}),C.jsx("span",{children:"(79) 9 9908-0924"})]})]})]}),C.jsxs("div",{className:"p-6 md:p-12 flex flex-col justify-center bg-slate-950/30 relative min-h-[500px]",children:[C.jsxs("div",{className:"md:hidden flex flex-col items-center mb-8 text-center",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center mb-4 shadow-lg ring-1 ring-white/20",children:C.jsx(Fe,{className:"text-white w-6 h-6"})}),C.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Service Desk Pro"})]}),C.jsxs("div",{className:"flex bg-slate-950/50 p-1.5 rounded-xl mb-8 border border-white/5 relative w-full md:w-fit mx-auto md:mx-0",children:[C.jsx("button",{onClick:()=>{s("client"),m("")},className:"flex-1 md:flex-none px-6 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 "+("client"===n?"bg-blue-600 text-white shadow-lg shadow-blue-500/25":"text-slate-500 hover:text-slate-300"),children:"Sou Cliente"}),C.jsx("button",{onClick:()=>{s("admin"),m("")},className:"flex-1 md:flex-none px-6 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 "+("admin"===n?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/25":"text-slate-500 hover:text-slate-300"),children:"Sou T√©cnico"})]}),C.jsxs("div",{className:"mb-8 text-center md:text-left",children:[C.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"client"===n?"Acompanhar Servi√ßo":"Acesso Administrativo"}),C.jsx("p",{className:"text-slate-400 text-sm",children:"client"===n?"Digite o n√∫mero da sua O.S.":"Entre com suas credenciais."})]}),"client"===n?C.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!o.trim())return;const n=o.replace(/\D/g,"");if(!n)return void m("Por favor, digite apenas os n√∫meros da O.S.");t(`OS-${n}`)},className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-300",children:[h&&C.jsx("div",{className:"text-xs p-3 rounded-xl text-center font-medium border bg-red-500/10 text-red-300 border-red-500/20",children:h}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-xs font-bold text-blue-400 uppercase tracking-wider ml-1",children:"N√∫mero da O.S."}),C.jsxs("div",{className:"relative group",children:[C.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:C.jsx(Se,{className:"text-slate-500 group-focus-within:text-blue-400 transition-colors",size:20})}),C.jsx("input",{type:"tel",placeholder:"Ex: 1001",value:o,onChange:e=>i(e.target.value),className:"w-full bg-slate-900/50 border border-slate-700/50 rounded-2xl py-4 pl-12 pr-4 text-white placeholder-slate-600 focus:outline-none focus:border-blue-500 focus:bg-slate-900 transition-all shadow-inner"})]})]}),C.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-bold py-4 rounded-2xl transition-all shadow-lg shadow-blue-900/20 hover:shadow-blue-900/40 flex items-center justify-center gap-3 transform hover:-translate-y-0.5 active:scale-95",children:[C.jsx("span",{children:"Consultar Status"}),C.jsx(L,{size:20})]})]}):C.jsxs("form",{onSubmit:async t=>{t.preventDefault(),p(!0),m("");try{const{error:t}=await dt.auth.signInWithPassword({email:r,password:c});if(t)throw t;e()}catch(n){let e=n.message||"Erro na autentica√ß√£o";(e.includes("Invalid login")||e.includes("invalid_grant"))&&(e="E-mail ou senha incorretos."),m(e)}finally{p(!1)}},className:"space-y-6 animate-in fade-in slide-in-from-right-8 duration-300",children:[h&&C.jsxs("div",{className:"text-xs p-4 rounded-xl text-center font-medium border bg-red-500/10 text-red-300 border-red-500/20 flex items-center justify-center gap-2 animate-pulse",children:[C.jsx("span",{children:"‚ö†Ô∏è"})," ",h]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wider ml-1",children:"E-mail Corporativo"}),C.jsx("input",{type:"email",value:r,onChange:e=>l(e.target.value),required:!0,className:"w-full bg-slate-900/50 border border-slate-700/50 rounded-2xl py-4 px-5 text-white focus:border-indigo-500 focus:bg-slate-900 focus:outline-none transition-all shadow-inner placeholder-slate-600",placeholder:"tecnico@infomed.com"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wider ml-1",children:"Senha"}),C.jsxs("div",{className:"relative group",children:[C.jsx("input",{type:f?"text":"password",value:c,onChange:e=>d(e.target.value),required:!0,className:"w-full bg-slate-900/50 border border-slate-700/50 rounded-2xl py-4 pl-5 pr-12 text-white focus:border-indigo-500 focus:bg-slate-900 focus:outline-none transition-all shadow-inner placeholder-slate-600",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"}),C.jsx("button",{type:"button",onClick:()=>g(!f),className:"absolute right-4 top-4 text-slate-500 hover:text-indigo-400 transition-colors",children:f?C.jsx(ie,{size:20}):C.jsx(re,{size:20})})]})]})]}),C.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold py-4 rounded-2xl transition-all shadow-lg shadow-indigo-900/20 hover:shadow-indigo-900/40 flex items-center justify-center gap-3 transform hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed active:scale-95",children:u?C.jsx("span",{className:"animate-pulse",children:"Autenticando..."}):C.jsxs(C.Fragment,{children:[" ",C.jsx(me,{size:20})," ",C.jsx("span",{children:"Acessar Painel"})," "]})})]}),C.jsxs("div",{className:"mt-8 pt-8 border-t border-white/5 md:hidden flex justify-center gap-8",children:[C.jsx("a",{href:x,target:"_blank",rel:"noreferrer",className:"text-slate-400 hover:text-pink-500 transition-colors p-2 bg-slate-800 rounded-lg",children:C.jsx(ue,{size:24})}),C.jsx("a",{href:b,target:"_blank",rel:"noreferrer",className:"text-slate-400 hover:text-green-500 transition-colors p-2 bg-slate-800 rounded-lg",children:C.jsx(xe,{size:24})})]})]})]})]})},pt=({onChange:e})=>{const t=a.useRef(null),n=a.useRef(null),[s,o]=a.useState(!1),[i,r]=a.useState(!1);a.useEffect(()=>{let e=!0,s=null;const o=()=>{if(!e)return;const s=t.current,o=n.current;if(s&&o){const e=o.getBoundingClientRect();if(s.width===e.width&&s.height===e.height)return;s.width=e.width,s.height=e.height;const t=s.getContext("2d");t&&(t.lineCap="round",t.lineJoin="round",t.lineWidth=2,t.strokeStyle="#0f172a")}};return o(),window.addEventListener("resize",o),s=setTimeout(o,100),()=>{e=!1,window.removeEventListener("resize",o),s&&clearTimeout(s)}},[]);const l=e=>{const n=t.current;if(!n)return{x:0,y:0};const s=n.getBoundingClientRect();let o,i;return"touches"in e?(o=e.touches[0].clientX,i=e.touches[0].clientY):(o=e.clientX,i=e.clientY),{x:o-s.left,y:i-s.top}},c=e=>{e.nativeEvent.type;const n=t.current;if(!n)return;const s=n.getContext("2d");if(!s)return;o(!0),r(!0);const{x:i,y:a}=l(e);s.beginPath(),s.moveTo(i,a)},d=e=>{if(s&&"touches"in e&&e.preventDefault(),!s)return;const n=t.current;if(!n)return;const o=n.getContext("2d");if(!o)return;const{x:i,y:r}=l(e);o.lineTo(i,r),o.stroke()},u=()=>{s&&(o(!1),t.current&&i&&e(t.current.toDataURL()))};return C.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[C.jsxs("div",{ref:n,className:"border-2 border-dashed border-slate-300 rounded-lg bg-white overflow-hidden relative w-full h-48 sm:h-64 touch-none",children:[C.jsx("canvas",{ref:t,className:"w-full h-full cursor-crosshair block",onMouseDown:c,onMouseMove:d,onMouseUp:u,onMouseLeave:u,onTouchStart:c,onTouchMove:d,onTouchEnd:u}),!i&&C.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-40",children:C.jsx("span",{className:"text-slate-400 text-sm",children:"Assine aqui"})})]}),C.jsxs("button",{type:"button",onClick:()=>{const n=t.current;if(!n)return;const s=n.getContext("2d");s&&(s.clearRect(0,0,n.width,n.height),r(!1),e(""))},className:"self-end text-xs text-red-400 flex items-center gap-1 hover:text-red-300 py-1 bg-red-500/5 px-2 rounded transition-colors",children:[C.jsx(se,{size:12}),"Limpar Assinatura"]})]})},ht=({task:e,mode:t,onReady:n,diagnosticFee:s})=>{const o=(Number(e.serviceCost)||0)+(Number(e.partsCost)||0),i=e.isApproved,r=new Date(e.budgetExpiryDate||Date.now()),l=!i&&Date.now()>r.getTime();a.useEffect(()=>{const e=setTimeout(()=>{n()},3e3);return()=>clearTimeout(e)},[t]);return C.jsxs("div",{id:"pdf-document-root",style:{color:"#000000",borderColor:"#000000",backgroundColor:"#ffffff",fontFamily:"Arial, sans-serif",padding:"40px",maxWidth:"800px",margin:"0 auto",minHeight:"1123px",position:"relative"},children:[C.jsx("div",{style:{textAlign:"center",padding:"10px",backgroundColor:"entry"===t?"#f1f5f9":i?"#dcfce7":l?"#fee2e2":"#fef9c3",border:"2px solid "+("entry"===t?"#475569":i?"#166534":l?"#991b1b":"#854d0e"),marginBottom:"20px",fontWeight:"bold",textTransform:"uppercase",color:"#000"},children:"entry"===t?"PROTOCOLO DE ENTRADA E TERMO DE CI√äNCIA":i?"ORDEM DE SERVI√áO APROVADA":l?"OR√áAMENTO EXPIRADO":`OR√áAMENTO PR√âVIO - V√ÅLIDO AT√â ${r.toLocaleDateString()}`}),C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:"15px",borderBottom:"2px solid #000",marginBottom:"20px"},children:[C.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[C.jsx("h1",{style:{fontSize:"24px",fontWeight:"900",textTransform:"uppercase",color:"#000",margin:"0 0 5px 0",letterSpacing:"1px"},children:"entry"===t?"RECIBO DE ENTREGA":i?"ORDEM DE SERVI√áO":"OR√áAMENTO"}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[C.jsxs("span",{style:{fontSize:"16px",color:"#000",fontWeight:"bold",backgroundColor:"#e2e8f0",padding:"2px 8px",borderRadius:"4px",border:"1px solid #ccc"},children:["#",e.osNumber]}),C.jsxs("span",{style:{fontSize:"12px",color:"#000"},children:["Emiss√£o: ",new Date(e.createdAt).toLocaleDateString()]})]})]}),C.jsxs("div",{style:{textAlign:"right",fontSize:"11px",color:"#000",lineHeight:"1.4"},children:[C.jsx("h2",{style:{fontSize:"14px",fontWeight:"bold",color:"#000",margin:"0 0 5px 0"},children:Ve}),C.jsxs("p",{style:{margin:0,color:"#000"},children:["CNPJ: ",Be]}),C.jsx("p",{style:{margin:0,color:"#000"},children:Je}),C.jsx("p",{style:{margin:0,color:"#000"},children:We})]})]}),C.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"20px"},children:[C.jsxs("div",{style:{flex:1,border:"1px solid #000",borderRadius:"4px",padding:"10px",position:"relative"},children:[C.jsx("span",{style:{position:"absolute",top:"-8px",left:"10px",background:"white",padding:"0 5px",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",color:"#000"},children:"Contratante / Cliente"}),C.jsx("table",{style:{width:"100%",fontSize:"12px",borderCollapse:"collapse",color:"#000"},children:C.jsxs("tbody",{children:[C.jsxs("tr",{children:[C.jsx("td",{style:{fontWeight:"bold",width:"60px"},children:"Nome:"}),C.jsx("td",{children:e.clientName})]}),C.jsxs("tr",{children:[C.jsx("td",{style:{fontWeight:"bold"},children:"CPF/CNPJ:"}),C.jsx("td",{children:e.clientCpf||"N/I"})]}),C.jsxs("tr",{children:[C.jsx("td",{style:{fontWeight:"bold"},children:"Endere√ßo:"}),C.jsx("td",{children:e.clientAddress||"N/I"})]}),C.jsxs("tr",{children:[C.jsx("td",{style:{fontWeight:"bold"},children:"Tel:"}),C.jsx("td",{children:e.clientPhone})]})]})})]}),C.jsxs("div",{style:{flex:1,border:"1px solid #000",borderRadius:"4px",padding:"10px",position:"relative"},children:[C.jsx("span",{style:{position:"absolute",top:"-8px",left:"10px",background:"white",padding:"0 5px",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",color:"#000"},children:"Objeto / Equipamento"}),C.jsx("table",{style:{width:"100%",fontSize:"12px",borderCollapse:"collapse",color:"#000"},children:C.jsxs("tbody",{children:[C.jsxs("tr",{children:[C.jsx("td",{style:{fontWeight:"bold",width:"60px"},children:"Item:"}),C.jsx("td",{children:e.equipment})]}),C.jsxs("tr",{children:[C.jsx("td",{style:{fontWeight:"bold"},children:"Serial:"}),C.jsx("td",{children:e.serialNumber||"N/A"})]}),C.jsxs("tr",{children:[C.jsx("td",{style:{fontWeight:"bold"},children:"Defeito:"}),C.jsxs("td",{style:{fontStyle:"italic"},children:['"',e.description,'"']})]})]})})]})]}),C.jsxs("div",{style:{marginBottom:"20px",border:"1px solid #000",borderRadius:"4px",padding:"10px",backgroundColor:"#fcfcfc"},children:[C.jsx("h3",{style:{fontSize:"11px",fontWeight:"bold",textTransform:"uppercase",borderBottom:"1px solid #ccc",paddingBottom:"5px",marginBottom:"10px",color:"#000"},children:"Laudo Visual de Entrada (Declara√ß√£o de Estado F√≠sico)"}),C.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"5px",marginBottom:"15px"},children:(e.checklist||[]).map(e=>C.jsxs("div",{style:{fontSize:"10px",display:"flex",alignItems:"center",gap:"5px",color:"#000"},children:[C.jsx("div",{style:{width:"12px",height:"12px",border:"1px solid #000",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.checked?"#000":"white"},children:e.checked&&C.jsx("span",{style:{color:"white",fontSize:"10px"},children:"‚úì"})}),C.jsx("span",{children:e.label})]},e.id))}),e.photos&&e.photos.length>0&&C.jsxs("div",{style:{marginTop:"15px",padding:"10px",border:"2px solid #ea580c",borderRadius:"6px",backgroundColor:"#fff7ed"},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",paddingBottom:"8px",borderBottom:"1px solid #fed7aa"},children:[C.jsx("span",{style:{fontSize:"16px"},children:"üì∏"}),C.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:"#9a3412",textTransform:"uppercase"},children:"Registro Fotogr√°fico de Entrada"}),C.jsxs("span",{style:{fontSize:"9px",color:"#c2410c",marginLeft:"auto"},children:[e.photos.length," foto(s) anexada(s)"]})]}),C.jsx("p",{style:{fontSize:"9px",color:"#78350f",marginBottom:"10px",fontStyle:"italic"},children:"As fotos abaixo documentam o estado f√≠sico do equipamento no momento da entrada, servindo como prova para ambas as partes."}),C.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},children:e.photos.map((e,t)=>C.jsxs("div",{style:{border:"2px solid #9a3412",borderRadius:"4px",overflow:"hidden",backgroundColor:"#000"},children:[C.jsx("img",{src:e,crossOrigin:"anonymous",style:{width:"100%",height:"80px",objectFit:"cover",display:"block"},alt:`Foto ${t+1}`}),C.jsxs("div",{style:{backgroundColor:"#9a3412",color:"white",fontSize:"8px",fontWeight:"bold",textAlign:"center",padding:"2px"},children:["FOTO #",t+1]})]},t))})]})]}),("full"===t||e.technicalObservation)&&C.jsxs("div",{style:{marginBottom:"20px",border:"1px solid #000",borderRadius:"4px",overflow:"hidden"},children:[C.jsx("div",{style:{backgroundColor:"#f0f0f0",padding:"5px 10px",borderBottom:"1px solid #000",fontSize:"11px",fontWeight:"bold",textTransform:"uppercase",color:"#000"},children:"Diagn√≥stico T√©cnico"}),C.jsx("div",{style:{padding:"10px",fontSize:"12px",lineHeight:"1.5",minHeight:"50px",color:"#000",whiteSpace:"pre-wrap"},children:e.technicalObservation||"Equipamento em fase de an√°lise."})]}),"full"===t&&C.jsxs(C.Fragment,{children:[!i&&C.jsxs("div",{style:{marginBottom:"20px",border:"1px dashed #000",borderRadius:"4px",padding:"10px",backgroundColor:"#fff",color:"#000"},children:[C.jsx("h4",{style:{margin:"0 0 5px 0",fontSize:"11px",fontWeight:"bold",textTransform:"uppercase"},children:"Validade e Taxas (Art. 40 ¬ß 2¬∫ CDC)"}),C.jsxs("p",{style:{fontSize:"10px",margin:0,textAlign:"justify",lineHeight:"1.4"},children:["O or√ßamento √© v√°lido por ",C.jsxs("strong",{children:[Ze," dias"]}),". A execu√ß√£o do servi√ßo √© isenta de taxas. Por√©m, em caso de ",C.jsx("strong",{children:"recusa, retirada sem reparo ou desist√™ncia"})," ap√≥s o diagn√≥stico t√©cnico realizado, ser√° cobrada a",C.jsxs("strong",{children:[" TAXA DE DIAGN√ìSTICO de R$ ",s.toFixed(2)]})," referente √†s horas t√©cnicas de an√°lise e desmontagem."]})]}),C.jsx("div",{style:{marginBottom:"25px"},children:C.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px",border:"1px solid #000",color:"#000"},children:[C.jsx("thead",{children:C.jsxs("tr",{style:{backgroundColor:"#e2e8f0",color:"#000"},children:[C.jsx("th",{style:{textAlign:"left",padding:"6px 10px",borderBottom:"1px solid #000"},children:"DESCRI√á√ÉO"}),C.jsx("th",{style:{textAlign:"right",padding:"6px 10px",borderBottom:"1px solid #000"},children:"VALOR (R$)"})]})}),C.jsxs("tbody",{children:[C.jsxs("tr",{children:[C.jsx("td",{style:{padding:"6px 10px",borderBottom:"1px solid #000"},children:"Pe√ßas / Hardware"}),C.jsx("td",{style:{textAlign:"right",padding:"6px 10px",borderBottom:"1px solid #000"},children:Number(e.partsCost||0).toFixed(2)})]}),C.jsxs("tr",{children:[C.jsx("td",{style:{padding:"6px 10px",borderBottom:"1px solid #000"},children:"M√£o de Obra T√©cnica"}),C.jsx("td",{style:{textAlign:"right",padding:"6px 10px",borderBottom:"1px solid #000"},children:Number(e.serviceCost||0).toFixed(2)})]}),C.jsxs("tr",{style:{fontWeight:"bold",fontSize:"14px",backgroundColor:"#f0f0f0"},children:[C.jsx("td",{style:{padding:"8px 10px",textAlign:"right"},children:"TOTAL GERAL (SERVI√áO)"}),C.jsxs("td",{style:{textAlign:"right",padding:"8px 10px"},children:["R$ ",o.toFixed(2)]})]})]})]})})]}),C.jsxs("div",{style:{marginBottom:"20px",borderTop:"2px solid #000",paddingTop:"10px"},children:[C.jsx("h4",{style:{fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",marginBottom:"5px",color:"#000"},children:"Termos de Ci√™ncia e Condi√ß√µes Gerais (Contrato de Servi√ßo)"}),C.jsxs("div",{style:{fontSize:"8px",textAlign:"justify",color:"#000",lineHeight:"1.25",columnCount:2,columnGap:"20px"},children:[C.jsx("strong",{children:it.backup}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("strong",{children:it.hardware}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("strong",{children:it.software}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("strong",{children:it.abandonment}),"entry"===t&&C.jsxs(C.Fragment,{children:[C.jsx("br",{}),C.jsx("br",{}),C.jsx("strong",{children:"DECLARA√á√ÉO DE VISTORIA:"})," O cliente declara ter acompanhado a vistoria inicial e concorda com o estado f√≠sico relatado acima (checklist e fotos), isentando a assist√™ncia de responsabilidade sobre marcas de uso pr√©-existentes."]})]})]}),C.jsxs("div",{style:{border:"2px solid #000",borderRadius:"6px",padding:"15px",marginTop:"auto"},children:[C.jsx("div",{style:{fontSize:"10px",textAlign:"center",marginBottom:"15px",color:"#000",fontStyle:"italic"},children:"entry"===t?`Eu, ${e.clientName}, portador(a) do CPF/CNPJ ${e.clientCpf||"informado"}, DECLARO ter lido os termos acima, especialmente sobre a N√ÉO RESPONSABILIDADE DA EMPRESA SOBRE MEUS DADOS E ARQUIVOS (item 3), e autorizo a an√°lise t√©cnica.`:i?`Eu, ${e.clientName}, APROVO a execu√ß√£o do servi√ßo e valores descritos, estando ciente dos prazos de garantia e condi√ß√µes de pagamento.`:`Eu, ${e.clientName}, recebi este or√ßamento e estou ciente da validade e da taxa de diagn√≥stico em caso de recusa posterior.`}),C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",gap:"30px"},children:[C.jsxs("div",{style:{flex:1,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.techSignature?C.jsx("img",{src:e.techSignature,crossOrigin:"anonymous",alt:"Assinatura T√©cnico",style:{height:"50px",marginBottom:"-10px",objectFit:"contain"}}):C.jsx("div",{style:{height:"50px"}}),C.jsxs("div",{style:{width:"100%",borderTop:"1px solid #000",paddingTop:"5px"},children:[C.jsx("p",{style:{fontSize:"9px",margin:0,fontWeight:"bold",color:"#000"},children:Xe}),C.jsx("p",{style:{fontSize:"8px",margin:0,color:"#000"},children:"T√©cnico Respons√°vel"})]})]}),C.jsxs("div",{style:{flex:1,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.signature?C.jsx("img",{src:e.signature,crossOrigin:"anonymous",alt:"Assinatura Cliente",style:{height:"50px",marginBottom:"-10px",objectFit:"contain"}}):C.jsx("div",{style:{height:"50px"}}),C.jsxs("div",{style:{width:"100%",borderTop:"1px solid #000",paddingTop:"5px"},children:[C.jsx("p",{style:{fontSize:"9px",margin:0,fontWeight:"bold",color:"#000"},children:e.clientName}),C.jsx("p",{style:{fontSize:"8px",margin:0,color:"#000"},children:"Contratante / Cliente"})]})]})]})]}),C.jsxs("div",{style:{marginTop:"10px",textAlign:"center",fontSize:"8px",color:"#666"},children:["Documento gerado eletronicamente em ",(new Date).toLocaleString()," - Autentica√ß√£o Digital ID: ",e.id?e.id.slice(0,8):"PENDENTE"]})]})},mt=({task:e,onUpdate:t,onLogout:n,showToast:s,diagnosticFee:o})=>{var i,r;const[l,c]=a.useState(""),[d,u]=a.useState(!1),[p,h]=a.useState(""),[m,f]=a.useState(!1),[g,x]=a.useState(""),[b,v]=a.useState(null),y=(e.serviceCost||0)+(e.partsCost||0),E=new Date(e.budgetExpiryDate||Date.now()),w=!e.isApproved&&Date.now()>E.getTime(),N=Math.ceil((E.getTime()-Date.now())/864e5),A=[{id:_.Entry,label:"Triagem",icon:Z},{id:_.Approval,label:"Aprova√ß√£o",icon:Ue},{id:_.Execution,label:"Em Reparo",icon:ye},{id:_.Done,label:"Pronto",icon:X}],S=A.findIndex(t=>t.id===e.columnId),I=(n,s)=>{n&&n.preventDefault();const o=s||l;if(!o.trim())return;const i={id:`msg-${Date.now()}`,sender:"client",message:o,timestamp:Date.now()};t({...e,chatHistory:[...e.chatHistory,i]}),c("")},j=A.find(t=>t.id===e.columnId),T=w?q:(null==j?void 0:j.icon)||Z;return C.jsxs("div",{className:"min-h-screen pb-20 relative bg-slate-950 text-slate-200 font-sans",children:[b&&C.jsxs("div",{className:"fixed inset-0 z-[99999] bg-white overflow-y-auto flex items-center justify-center",children:[C.jsxs("div",{className:"fixed top-0 left-0 w-full h-full bg-white/95 z-[100] flex flex-col items-center justify-center p-4",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mb-6"}),C.jsx("p",{className:"text-slate-900 font-bold text-lg mb-2",children:"Gerando Documento PDF..."}),C.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Processando imagens e assinaturas... (Aguarde at√© 5s)"}),C.jsx("p",{className:"text-xs text-red-400 font-mono mb-4 bg-red-100 p-2 rounded",children:"Verifique o console (F12) se demorar muito."}),C.jsxs("button",{onClick:()=>v(null),className:"flex items-center gap-2 px-6 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-full font-bold transition-colors mb-4",children:[C.jsx(He,{size:18})," Cancelar / Fechar"]})]}),C.jsx(ht,{task:e,mode:b,onReady:async()=>{const t=document.getElementById("pdf-document-root");if(!t)return s("Erro Interno","Elemento do PDF n√£o encontrado na tela.","error"),void v(null);if(!b)return void v(null);const n=window.html2pdf;if(void 0===n)return s("Erro de PDF","Biblioteca n√£o carregada. Tente recarregar a p√°gina.","error"),void v(null);window.scrollTo(0,0);const o={margin:[10,10,10,10],filename:"entry"===b?`Recibo-Entrada-${e.osNumber}.pdf`:`OS-${e.osNumber}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:1.5,useCORS:!0,logging:!0,scrollY:0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};try{await n().set(o).from(t).save(),s("Download Iniciado","Seu documento est√° sendo baixado.","success")}catch(i){s("Erro ao Gerar PDF","Falha ao processar imagens. Tente imprimir (Ctrl+P).","error")}finally{v(null)}},diagnosticFee:o})]}),C.jsx("header",{className:"bg-slate-900/80 backdrop-blur-xl border-b border-white/5 sticky top-0 z-40",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:C.jsx(le,{className:"text-white",size:20})}),C.jsxs("div",{children:[C.jsx("h1",{className:"text-sm font-bold text-white uppercase",children:"Portal do Cliente"}),C.jsxs("p",{className:"text-[10px] text-blue-400 font-mono",children:["OS #",e.osNumber]})]})]}),C.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-red-400",title:"Sair","aria-label":"Sair do portal",children:C.jsx(fe,{size:20})})]})}),C.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[C.jsx("div",{className:`rounded-2xl border p-6 md:p-10 bg-gradient-to-br ${(()=>{if(w)return"from-red-900 to-slate-900 border-red-700";switch(e.columnId){case _.Entry:return"from-slate-800 to-slate-900 border-slate-700";case _.Approval:return"from-yellow-900/40 to-slate-900 border-yellow-500/50";case _.Execution:return"from-blue-900/40 to-slate-900 border-blue-500/50";case _.Done:return"from-green-900/40 to-slate-900 border-green-500/50";default:return"from-slate-800 to-slate-900"}})()} shadow-2xl relative overflow-hidden`,children:C.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center md:items-start gap-6",children:[C.jsx("div",{className:"p-4 bg-white/10 rounded-full backdrop-blur-sm border border-white/10",children:C.jsx(T,{size:40,className:w?"text-red-300":""})}),C.jsxs("div",{className:"flex-1 text-center md:text-left",children:[C.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:w?"Or√ßamento Expirado":e.columnId===_.Approval?"Aprova√ß√£o Necess√°ria":"Status Atualizado"}),C.jsx("p",{className:"text-slate-300 max-w-2xl",children:w?"A validade deste or√ßamento expirou. Entre em contato para revalidar os valores.":e.columnId===_.Approval?"T√©cnico concluiu o diagn√≥stico. Confira os valores e aprove para iniciarmos.":"Acompanhe o andamento do seu servi√ßo em tempo real."}),!e.isApproved&&!w&&C.jsxs("div",{className:"mt-4 flex items-center justify-center md:justify-start gap-2 text-yellow-300 bg-yellow-900/30 w-fit px-3 py-1 rounded-full border border-yellow-500/30",children:[C.jsx(V,{size:16}),C.jsxs("span",{className:"text-xs font-bold uppercase",children:["V√°lido at√©: ",E.toLocaleDateString()," (",N," dias restantes)"]})]})]}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("button",{onClick:()=>v("full"),disabled:!!b,className:"flex items-center gap-2 px-5 py-3 bg-white/10 hover:bg-white/20 text-white border border-white/20 rounded-xl font-semibold backdrop-blur-sm transition-all",children:[C.jsx(ne,{size:18})," Baixar ",e.isApproved?"Ordem de Servi√ßo":"Or√ßamento"]}),C.jsxs("button",{onClick:()=>v("entry"),disabled:!!b,className:"flex items-center gap-2 px-5 py-2 bg-slate-900/50 hover:bg-slate-900/80 text-slate-300 text-xs border border-slate-700 rounded-lg backdrop-blur-sm transition-all justify-center",children:[C.jsx(le,{size:14})," Baixar Recibo de Entrada"]})]})]})}),C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[C.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[C.jsxs("div",{className:"glass-panel p-6 rounded-2xl flex items-center justify-between relative",children:[C.jsx("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-slate-800 -translate-y-1/2 z-0"}),A.map((e,t)=>C.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2",children:[C.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center border-2 "+(t<=S?"bg-blue-600 border-blue-500 text-white":"bg-slate-900 border-slate-800 text-slate-600"),children:C.jsx(e.icon,{size:14})}),C.jsx("span",{className:"text-[10px] text-slate-400",children:e.label})]},e.id))]}),C.jsxs("div",{className:"glass-panel p-6 rounded-2xl space-y-6",children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-slate-500 uppercase font-bold",children:"Equipamento"}),C.jsx("p",{className:"text-white",children:e.equipment})]}),C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-slate-500 uppercase font-bold",children:"Defeito"}),C.jsxs("p",{className:"text-slate-300 text-sm",children:['"',e.description,'"']})]})]}),C.jsxs("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-700/50",children:[C.jsxs("label",{className:"text-xs text-slate-500 uppercase font-bold flex gap-2 mb-3",children:[C.jsx(Oe,{size:14})," Checklist de Entrada"]}),C.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:(e.checklist||[]).map(e=>C.jsxs("div",{className:"text-xs px-2 py-1 rounded border flex items-center gap-2 "+(e.checked?"bg-green-900/20 border-green-800 text-green-400":"bg-slate-800 border-slate-700 text-slate-500"),children:[e.checked?C.jsx(X,{size:12}):C.jsx("div",{className:"w-3 h-3 border border-slate-600 rounded-full"}),e.label]},e.id))})]}),e.photos&&e.photos.length>0&&C.jsxs("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-700/50",children:[C.jsxs("label",{className:"text-xs text-slate-500 uppercase font-bold flex gap-2 mb-3",children:[C.jsx(B,{size:14})," Fotos do Equipamento"]}),C.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:e.photos.map((e,t)=>C.jsx("img",{src:e,className:"h-20 w-auto rounded border border-slate-600"},t))})]}),e.technicalObservation&&C.jsxs("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-700/50",children:[C.jsxs("label",{className:"text-xs text-blue-400 uppercase font-bold flex gap-2",children:[C.jsx(ye,{size:12})," Laudo T√©cnico"]}),C.jsx("p",{className:"text-slate-200 text-sm mt-2",children:e.technicalObservation})]})]})]}),C.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.columnId===_.Approval&&!e.isApproved&&!w&&C.jsxs("div",{className:"bg-slate-800 rounded-2xl border border-yellow-500/30 p-6 shadow-xl relative animate-in slide-in-from-right-4",children:[C.jsxs("div",{className:"flex items-center gap-2 text-yellow-500 mb-4",children:[C.jsx(Ue,{size:20,className:"animate-pulse"}),C.jsx("h3",{className:"font-bold",children:"Aprova√ß√£o Pendente"})]}),C.jsxs("div",{className:"space-y-2 mb-6 text-sm",children:[C.jsxs("div",{className:"flex justify-between text-slate-400",children:[C.jsx("span",{children:"Pe√ßas"}),C.jsxs("span",{children:["R$ ",null==(i=e.partsCost)?void 0:i.toFixed(2)]})]}),C.jsxs("div",{className:"flex justify-between text-slate-400",children:[C.jsx("span",{children:"M√£o de Obra"}),C.jsxs("span",{children:["R$ ",null==(r=e.serviceCost)?void 0:r.toFixed(2)]})]}),C.jsxs("div",{className:"pt-2 border-t border-slate-700 flex justify-between font-bold text-white text-lg",children:[C.jsx("span",{children:"Total"}),C.jsxs("span",{className:"text-green-400",children:["R$ ",y.toFixed(2)]})]})]}),C.jsx("div",{className:"bg-red-500/10 border border-red-500/20 p-3 rounded-lg mb-4",children:C.jsxs("p",{className:"text-[10px] text-red-300 text-justify leading-tight",children:[C.jsx("strong",{children:"ATEN√á√ÉO:"})," O or√ßamento √© gratuito. Por√©m, em caso de ",C.jsx("strong",{children:"recusa ou desist√™ncia"})," nesta etapa, ser√° cobrada a taxa de diagn√≥stico de ",C.jsxs("strong",{children:["R$ ",o.toFixed(2)]})," (Art. 40 CDC). Aprovando, voc√™ √© isento desta taxa."]})}),C.jsxs("div",{className:"flex flex-col gap-3",children:[C.jsxs("button",{onClick:()=>u(!0),className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[C.jsx(ye,{size:18})," Aprovar (Isento de Taxa)"]}),C.jsx("button",{onClick:()=>f(!0),className:"w-full py-3 bg-slate-700 text-slate-300 font-medium rounded-xl",children:"Recusar (Pagar Taxa)"})]})]}),C.jsxs("div",{className:"glass-panel rounded-2xl flex flex-col h-[400px]",children:[C.jsx("div",{className:"p-4 border-b border-white/5 bg-slate-800/50",children:C.jsx("h3",{className:"font-bold text-white text-sm",children:"Fale com o T√©cnico"})}),C.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-900/30 custom-scrollbar",children:(e.chatHistory||[]).map(e=>C.jsx("div",{className:"flex flex-col "+("client"===e.sender?"items-end":"items-start"),children:C.jsx("div",{className:"max-w-[85%] p-3 text-sm rounded-xl "+("client"===e.sender?"bg-blue-600 text-white":"bg-slate-700 text-slate-200"),children:e.message})},e.id))}),C.jsxs("form",{onSubmit:I,className:"p-3 bg-slate-800/50 border-t border-white/5 relative",children:[C.jsx("input",{value:l,onChange:e=>c(e.target.value),placeholder:"Mensagem...",className:"w-full bg-slate-950 border border-slate-700 rounded-xl pl-4 pr-12 py-3 text-sm text-white focus:outline-none focus:border-blue-500"}),C.jsx("button",{type:"submit",className:"absolute right-5 top-5 text-blue-500 hover:text-white",children:C.jsx(Ce,{size:16})})]})]})]})]}),d&&C.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:C.jsxs("div",{className:"glass-panel bg-slate-900 rounded-2xl w-full max-w-lg p-6 border border-slate-700",children:[C.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:"Assinar Aprova√ß√£o"}),C.jsxs("p",{className:"text-slate-300 text-xs mb-4",children:["Ao assinar, voc√™ aprova o valor de R$ ",y.toFixed(2)," e fica ",C.jsx("strong",{children:"ISENTO"})," da taxa de diagn√≥stico."]}),C.jsx("div",{className:"bg-white rounded-xl overflow-hidden mb-6 border-4 border-slate-700",children:C.jsx(pt,{onChange:e=>h(e)})}),C.jsxs("div",{className:"flex gap-3",children:[C.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-3 bg-slate-800 text-slate-300 rounded-xl",children:"Cancelar"}),C.jsx("button",{onClick:()=>{p?(t({...e,signature:p,isApproved:!0,columnId:_.Execution,chatHistory:[...e.chatHistory,{id:`sys-${Date.now()}`,sender:"system",message:"‚úÖ OR√áAMENTO APROVADO PELO CLIENTE",timestamp:Date.now()}]}),s("Aprovado!","Servi√ßo aprovado com sucesso. O t√©cnico ser√° notificado.","success"),u(!1)):s("Assinatura Obrigat√≥ria","Por favor, assine no campo indicado para confirmar.","warning")},className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold",children:"Confirmar"})]})]})}),m&&C.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4",children:C.jsxs("div",{className:"glass-panel bg-slate-900 rounded-2xl w-full max-w-md p-6 border border-slate-700",children:[C.jsxs("h3",{className:"text-red-400 font-bold text-lg mb-4 flex items-center gap-2",children:[C.jsx(Ue,{})," Recusar Or√ßamento"]}),C.jsxs("p",{className:"text-slate-300 text-sm mb-4",children:["Ao recusar, voc√™ est√° ciente da cobran√ßa da ",C.jsxs("strong",{children:["TAXA DE DIAGN√ìSTICO de R$ ",o.toFixed(2)]})," para retirada do equipamento sem reparo."]}),C.jsx("textarea",{className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-sm text-white mb-6 h-24",placeholder:"Motivo da recusa...",value:g,onChange:e=>x(e.target.value)}),C.jsxs("div",{className:"flex gap-3",children:[C.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-3 bg-slate-800 text-slate-300 rounded-xl",children:"Voltar"}),C.jsx("button",{onClick:()=>{g.trim()?(I({},`‚ùå OR√áAMENTO REPROVADO. Motivo: ${g}`),s("Or√ßamento Recusado","A recusa foi registrada.","info"),f(!1)):s("Motivo Necess√°rio","Por favor, informe o motivo da recusa.","warning")},className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold",children:"Confirmar Recusa"})]})]})})]})]})};
/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ft={};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gt,xt;function bt(e,t,n,s){var o,i;if(!(null==e?void 0:e.baseUrl)){const e={geminiUrl:gt,vertexUrl:xt};return t?null!==(o=e.vertexUrl)&&void 0!==o?o:n:null!==(i=e.geminiUrl)&&void 0!==i?i:s}return e.baseUrl}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vt{}function yt(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return null!=e?String(e):""}throw new Error(`Key '${n}' not found in valueMap.`)})}function Et(e,t,n){for(let i=0;i<t.length-1;i++){const s=t[i];if(s.endsWith("[]")){const o=s.slice(0,-2);if(!(o in e)){if(!Array.isArray(n))throw new Error(`Value must be a list given an array path ${s}`);e[o]=Array.from({length:n.length},()=>({}))}if(Array.isArray(e[o])){const s=e[o];if(Array.isArray(n))for(let e=0;e<s.length;e++){Et(s[e],t.slice(i+1),n[e])}else for(const e of s)Et(e,t.slice(i+1),n)}return}if(s.endsWith("[0]")){const o=s.slice(0,-3);o in e||(e[o]=[{}]);return void Et(e[o][0],t.slice(i+1),n)}e[s]&&"object"==typeof e[s]||(e[s]={}),e=e[s]}const s=t[t.length-1],o=e[s];if(void 0!==o){if(!n||"object"==typeof n&&0===Object.keys(n).length)return;if(n===o)return;if("object"!=typeof o||"object"!=typeof n||null===o||null===n)throw new Error(`Cannot set value for an existing key. Key: ${s}`);Object.assign(o,n)}else if("_self"!==s||"object"!=typeof n||null===n||Array.isArray(n))e[s]=n;else{const t=n;Object.assign(e,t)}}function wt(e,t,n=void 0){try{if(1===t.length&&"_self"===t[0])return e;for(let s=0;s<t.length;s++){if("object"!=typeof e||null===e)return n;const o=t[s];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in e){const o=e[i];return Array.isArray(o)?o.map(e=>wt(e,t.slice(s+1),n)):n}return n}e=e[o]}return e}catch(s){if(s instanceof TypeError)return n;throw s}}function Nt(e,t,n,s,o){if(s>=t.length)return;if("object"!=typeof e||null===e)return;const i=t[s];if(i.endsWith("[]")){const r=i.slice(0,-2),a=e;if(r in a&&Array.isArray(a[r]))for(const e of a[r])Nt(e,t,n,s+1,o)}else if("*"===i){if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=e,i=Object.keys(t).filter(e=>!e.startsWith("_")&&!o.has(e)),r={};for(const e of i)r[e]=t[e];for(const[e,o]of Object.entries(r)){const i=[];for(const t of n.slice(s))"*"===t?i.push(e):i.push(t);Et(t,i,o)}for(const e of i)delete t[e]}}else{i in e&&Nt(e[i],t,n,s+1,o)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function At(e){if("string"!=typeof e)throw new Error("fromImageBytes must be a string");return e}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function St(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["metadata"]);null!=s&&Et(t,["metadata"],s);const o=wt(e,["done"]);null!=o&&Et(t,["done"],o);const i=wt(e,["error"]);null!=i&&Et(t,["error"],i);const r=wt(e,["response","generateVideoResponse"]);return null!=r&&Et(t,["response"],function(e){const t={},n=wt(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["video"]);null!=n&&Et(t,["video"],function(e){const t={},n=wt(e,["uri"]);null!=n&&Et(t,["uri"],n);const s=wt(e,["encodedVideo"]);null!=s&&Et(t,["videoBytes"],At(s));const o=wt(e,["encoding"]);null!=o&&Et(t,["mimeType"],o);return t}(n));return t}(e))),Et(t,["generatedVideos"],e)}const s=wt(e,["raiMediaFilteredCount"]);null!=s&&Et(t,["raiMediaFilteredCount"],s);const o=wt(e,["raiMediaFilteredReasons"]);null!=o&&Et(t,["raiMediaFilteredReasons"],o);return t}(r)),t}function Ct(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["metadata"]);null!=s&&Et(t,["metadata"],s);const o=wt(e,["done"]);null!=o&&Et(t,["done"],o);const i=wt(e,["error"]);null!=i&&Et(t,["error"],i);const r=wt(e,["response"]);return null!=r&&Et(t,["response"],function(e){const t={},n=wt(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["_self"]);null!=n&&Et(t,["video"],function(e){const t={},n=wt(e,["gcsUri"]);null!=n&&Et(t,["uri"],n);const s=wt(e,["bytesBase64Encoded"]);null!=s&&Et(t,["videoBytes"],At(s));const o=wt(e,["mimeType"]);null!=o&&Et(t,["mimeType"],o);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(n));return t}(e))),Et(t,["generatedVideos"],e)}const s=wt(e,["raiMediaFilteredCount"]);null!=s&&Et(t,["raiMediaFilteredCount"],s);const o=wt(e,["raiMediaFilteredReasons"]);null!=o&&Et(t,["raiMediaFilteredReasons"],o);return t}(r)),t}function It(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["metadata"]);null!=s&&Et(t,["metadata"],s);const o=wt(e,["done"]);null!=o&&Et(t,["done"],o);const i=wt(e,["error"]);null!=i&&Et(t,["error"],i);const r=wt(e,["response"]);return null!=r&&Et(t,["response"],function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["parent"]);null!=s&&Et(t,["parent"],s);const o=wt(e,["documentName"]);null!=o&&Et(t,["documentName"],o);return t}(r)),t}function jt(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["metadata"]);null!=s&&Et(t,["metadata"],s);const o=wt(e,["done"]);null!=o&&Et(t,["done"],o);const i=wt(e,["error"]);null!=i&&Et(t,["error"],i);const r=wt(e,["response"]);return null!=r&&Et(t,["response"],function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["parent"]);null!=s&&Et(t,["parent"],s);const o=wt(e,["documentName"]);null!=o&&Et(t,["documentName"],o);return t}(r)),t}var Tt,_t,Ot,Rt,kt,Pt,Dt,Mt,Ut,Lt,qt,Gt,Ft,Ht,Vt,zt,Bt,$t,Jt,Wt,Yt,Kt,Xt,Qt,Zt,en,tn,nn,sn,on,rn,an,ln,cn,dn,un,pn,hn,mn,fn,gn,xn,bn,vn,yn,En,wn,Nn,An,Sn,Cn,In,jn,Tn,_n,On,Rn,kn,Pn,Dn,Mn,Un,Ln,qn,Gn,Fn,Hn,Vn,zn,Bn,$n,Jn,Wn,Yn,Kn,Xn,Qn,Zn,es,ts,ns,ss,os,is,rs,as,ls,cs,ds,us,ps,hs,ms,fs,gs,xs,bs,vs,ys,Es,ws,Ns,As,Ss,Cs,Is,js,Ts,_s,Os,Rs,ks,Ps,Ds;(_t=Tt||(Tt={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",_t.OUTCOME_OK="OUTCOME_OK",_t.OUTCOME_FAILED="OUTCOME_FAILED",_t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(Rt=Ot||(Ot={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",Rt.PYTHON="PYTHON",(Pt=kt||(kt={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",Pt.SILENT="SILENT",Pt.WHEN_IDLE="WHEN_IDLE",Pt.INTERRUPT="INTERRUPT",(Mt=Dt||(Dt={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",Mt.STRING="STRING",Mt.NUMBER="NUMBER",Mt.INTEGER="INTEGER",Mt.BOOLEAN="BOOLEAN",Mt.ARRAY="ARRAY",Mt.OBJECT="OBJECT",Mt.NULL="NULL",(Lt=Ut||(Ut={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Lt.MODE_DYNAMIC="MODE_DYNAMIC",(Gt=qt||(qt={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",Gt.SIMPLE_SEARCH="SIMPLE_SEARCH",Gt.ELASTIC_SEARCH="ELASTIC_SEARCH",(Ht=Ft||(Ft={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",Ht.NO_AUTH="NO_AUTH",Ht.API_KEY_AUTH="API_KEY_AUTH",Ht.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",Ht.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",Ht.OAUTH="OAUTH",Ht.OIDC_AUTH="OIDC_AUTH",(zt=Vt||(Vt={})).HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",zt.HTTP_IN_QUERY="HTTP_IN_QUERY",zt.HTTP_IN_HEADER="HTTP_IN_HEADER",zt.HTTP_IN_PATH="HTTP_IN_PATH",zt.HTTP_IN_BODY="HTTP_IN_BODY",zt.HTTP_IN_COOKIE="HTTP_IN_COOKIE",($t=Bt||(Bt={})).PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",$t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",$t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",$t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",$t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",$t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",$t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH",(Wt=Jt||(Jt={})).THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",Wt.LOW="LOW",Wt.HIGH="HIGH",(Kt=Yt||(Yt={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",Kt.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",Kt.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",Kt.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",Kt.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",Kt.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",Kt.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",Kt.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",Kt.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",Kt.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",Kt.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(Qt=Xt||(Xt={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",Qt.SEVERITY="SEVERITY",Qt.PROBABILITY="PROBABILITY",(en=Zt||(Zt={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",en.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",en.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",en.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",en.BLOCK_NONE="BLOCK_NONE",en.OFF="OFF",(nn=tn||(tn={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",nn.STOP="STOP",nn.MAX_TOKENS="MAX_TOKENS",nn.SAFETY="SAFETY",nn.RECITATION="RECITATION",nn.LANGUAGE="LANGUAGE",nn.OTHER="OTHER",nn.BLOCKLIST="BLOCKLIST",nn.PROHIBITED_CONTENT="PROHIBITED_CONTENT",nn.SPII="SPII",nn.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",nn.IMAGE_SAFETY="IMAGE_SAFETY",nn.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",nn.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",nn.NO_IMAGE="NO_IMAGE",nn.IMAGE_RECITATION="IMAGE_RECITATION",nn.IMAGE_OTHER="IMAGE_OTHER",(on=sn||(sn={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",on.NEGLIGIBLE="NEGLIGIBLE",on.LOW="LOW",on.MEDIUM="MEDIUM",on.HIGH="HIGH",(an=rn||(rn={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",an.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",an.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",an.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",an.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(cn=ln||(ln={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",cn.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",cn.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",cn.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",cn.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(un=dn||(dn={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",un.SAFETY="SAFETY",un.OTHER="OTHER",un.BLOCKLIST="BLOCKLIST",un.PROHIBITED_CONTENT="PROHIBITED_CONTENT",un.IMAGE_SAFETY="IMAGE_SAFETY",un.MODEL_ARMOR="MODEL_ARMOR",un.JAILBREAK="JAILBREAK",(hn=pn||(pn={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",hn.ON_DEMAND="ON_DEMAND",hn.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(fn=mn||(mn={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",fn.TEXT="TEXT",fn.IMAGE="IMAGE",fn.AUDIO="AUDIO",(xn=gn||(gn={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",xn.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",xn.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",xn.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(vn=bn||(bn={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",vn.TUNING_MODE_FULL="TUNING_MODE_FULL",vn.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",(En=yn||(yn={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",En.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",En.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",En.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",En.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",En.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",En.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(Nn=wn||(wn={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",Nn.JOB_STATE_QUEUED="JOB_STATE_QUEUED",Nn.JOB_STATE_PENDING="JOB_STATE_PENDING",Nn.JOB_STATE_RUNNING="JOB_STATE_RUNNING",Nn.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",Nn.JOB_STATE_FAILED="JOB_STATE_FAILED",Nn.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",Nn.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",Nn.JOB_STATE_PAUSED="JOB_STATE_PAUSED",Nn.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",Nn.JOB_STATE_UPDATING="JOB_STATE_UPDATING",Nn.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(Sn=An||(An={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",Sn.TUNING_TASK_I2V="TUNING_TASK_I2V",Sn.TUNING_TASK_T2V="TUNING_TASK_T2V",Sn.TUNING_TASK_R2V="TUNING_TASK_R2V",(In=Cn||(Cn={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",In.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",In.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",In.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(Tn=jn||(jn={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",Tn.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",Tn.BALANCED="BALANCED",Tn.PRIORITIZE_COST="PRIORITIZE_COST",(On=_n||(_n={})).UNSPECIFIED="UNSPECIFIED",On.BLOCKING="BLOCKING",On.NON_BLOCKING="NON_BLOCKING",(kn=Rn||(Rn={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",kn.MODE_DYNAMIC="MODE_DYNAMIC",(Dn=Pn||(Pn={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",Dn.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(Un=Mn||(Mn={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Un.AUTO="AUTO",Un.ANY="ANY",Un.NONE="NONE",Un.VALIDATED="VALIDATED",(qn=Ln||(Ln={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",qn.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",qn.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",qn.BLOCK_NONE="BLOCK_NONE",(Fn=Gn||(Gn={})).DONT_ALLOW="DONT_ALLOW",Fn.ALLOW_ADULT="ALLOW_ADULT",Fn.ALLOW_ALL="ALLOW_ALL",(Vn=Hn||(Hn={})).auto="auto",Vn.en="en",Vn.ja="ja",Vn.ko="ko",Vn.hi="hi",Vn.zh="zh",Vn.pt="pt",Vn.es="es",(Bn=zn||(zn={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",Bn.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",Bn.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",Bn.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",Bn.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(Jn=$n||($n={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",Jn.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",Jn.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",Jn.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(Yn=Wn||(Wn={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",Yn.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",Yn.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",Yn.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(Xn=Kn||(Kn={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",Xn.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",Xn.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",Xn.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",Xn.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",Xn.EDIT_MODE_STYLE="EDIT_MODE_STYLE",Xn.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",Xn.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(Zn=Qn||(Qn={})).FOREGROUND="FOREGROUND",Zn.BACKGROUND="BACKGROUND",Zn.PROMPT="PROMPT",Zn.SEMANTIC="SEMANTIC",Zn.INTERACTIVE="INTERACTIVE",(ts=es||(es={})).ASSET="ASSET",ts.STYLE="STYLE",(ss=ns||(ns={})).INSERT="INSERT",ss.REMOVE="REMOVE",ss.REMOVE_STATIC="REMOVE_STATIC",ss.OUTPAINT="OUTPAINT",(is=os||(os={})).OPTIMIZED="OPTIMIZED",is.LOSSLESS="LOSSLESS",(as=rs||(rs={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",as.PREFERENCE_TUNING="PREFERENCE_TUNING",(cs=ls||(ls={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",cs.STATE_PENDING="STATE_PENDING",cs.STATE_ACTIVE="STATE_ACTIVE",cs.STATE_FAILED="STATE_FAILED",(us=ds||(ds={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",us.PROCESSING="PROCESSING",us.ACTIVE="ACTIVE",us.FAILED="FAILED",(hs=ps||(ps={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",hs.UPLOADED="UPLOADED",hs.GENERATED="GENERATED",(fs=ms||(ms={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",fs.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",fs.RESPONSE_REJECTED="RESPONSE_REJECTED",fs.NEED_MORE_INPUT="NEED_MORE_INPUT",(xs=gs||(gs={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",xs.TEXT="TEXT",xs.IMAGE="IMAGE",xs.VIDEO="VIDEO",xs.AUDIO="AUDIO",xs.DOCUMENT="DOCUMENT",(vs=bs||(bs={})).VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",vs.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",vs.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS",(Es=ys||(ys={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",Es.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",Es.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(Ns=ws||(ws={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",Ns.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",Ns.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(Ss=As||(As={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",Ss.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",Ss.NO_INTERRUPTION="NO_INTERRUPTION",(Is=Cs||(Cs={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",Is.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",Is.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(Ts=js||(js={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",Ts.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",Ts.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",Ts.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",Ts.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",Ts.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",Ts.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",Ts.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",Ts.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",Ts.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",Ts.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",Ts.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",Ts.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(Os=_s||(_s={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",Os.QUALITY="QUALITY",Os.DIVERSITY="DIVERSITY",Os.VOCALIZATION="VOCALIZATION",(ks=Rs||(Rs={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",ks.PLAY="PLAY",ks.PAUSE="PAUSE",ks.STOP="STOP",ks.RESET_CONTEXT="RESET_CONTEXT";class Ms{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Us{get text(){var e,t,n,s,o,i,r,a;if(0===(null===(s=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===s?void 0:s.length))return;this.candidates&&this.candidates.length;let l="",c=!1;const d=[];for(const u of null!==(a=null===(r=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===r?void 0:r.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(u))"text"===e||"thought"===e||"thoughtSignature"===e||null===t&&void 0===t||d.push(e);if("string"==typeof u.text){if("boolean"==typeof u.thought&&u.thought)continue;c=!0,l+=u.text}}return d.length,c?l:void 0}get data(){var e,t,n,s,o,i,r,a;if(0===(null===(s=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===s?void 0:s.length))return;this.candidates&&this.candidates.length;let l="";const c=[];for(const d of null!==(a=null===(r=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===r?void 0:r.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(d))"inlineData"===e||null===t&&void 0===t||c.push(e);d.inlineData&&"string"==typeof d.inlineData.data&&(l+=atob(d.inlineData.data))}return c.length,l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,s,o,i,r,a;if(0===(null===(s=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===s?void 0:s.length))return;this.candidates&&this.candidates.length;const l=null===(a=null===(r=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===r?void 0:r.parts)||void 0===a?void 0:a.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);return 0!==(null==l?void 0:l.length)?l:void 0}get executableCode(){var e,t,n,s,o,i,r,a,l;if(0===(null===(s=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===s?void 0:s.length))return;this.candidates&&this.candidates.length;const c=null===(a=null===(r=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===r?void 0:r.parts)||void 0===a?void 0:a.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,t,n,s,o,i,r,a,l;if(0===(null===(s=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===s?void 0:s.length))return;this.candidates&&this.candidates.length;const c=null===(a=null===(r=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===r?void 0:r.parts)||void 0===a?void 0:a.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.output:void 0}}class Ls{}class qs{}class Gs{}class Fs{}class Hs{}class Vs{}class zs{}class Bs{}class $s{}class Js{}class Ws{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new Ws;let s;const o=e;return s=t?Ct(o):St(o),Object.assign(n,s),n}}class Ys{}class Ks{}class Xs{}class Qs{}class Zs{}class eo{}class to{}class no{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new no,s=It(e);return Object.assign(n,s),n}}class so{}class oo{}class io{}class ro{}class ao{get text(){var e,t,n;let s="",o=!1;const i=[];for(const r of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(r))"text"!==e&&"thought"!==e&&null!==t&&i.push(e);if("string"==typeof r.text){if("boolean"==typeof r.thought&&r.thought)continue;o=!0,s+=r.text}}return i.length,o?s:void 0}get data(){var e,t,n;let s="";const o=[];for(const i of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(i))"inlineData"!==e&&null!==t&&o.push(e);i.inlineData&&"string"==typeof i.inlineData.data&&(s+=atob(i.inlineData.data))}return o.length,s.length>0?btoa(s):void 0}}class lo{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class co{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new co,s=jt(e);return Object.assign(n,s),n}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uo(e,t){if(!t||"string"!=typeof t)throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return`publishers/google/models/${t}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function po(e,t){const n=uo(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function ho(e){return Array.isArray(e)?e.map(e=>mo(e)):[mo(e)]}function mo(e){if("object"==typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof e)}function fo(e){const t=mo(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function go(e){const t=mo(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function xo(e){if(null==e)throw new Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw new Error("Unsupported part type: "+typeof e)}function bo(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>xo(e)):[xo(e)]}function vo(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function yo(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function Eo(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function wo(e){if(null==e)throw new Error("ContentUnion is required");return vo(e)?e:{role:"user",parts:bo(e)}}function No(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const t=wo(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){const e=wo(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>wo(e)):[wo(t)]}function Ao(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(yo(e)||Eo(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wo(e)]}const t=[],n=[],s=vo(e[0]);for(const o of e){const e=vo(o);if(e!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(o);else{if(yo(o)||Eo(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return s||t.push({role:"user",parts:bo(n)}),t}function So(e){const t={},n=["items"],s=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;null!=i&&2==i.length&&("null"===i[0].type?(t.nullable=!0,e=i[1]):"null"===i[1].type&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(e=>"null"!==e);if(1===n.length)t.type=Object.values(Dt).includes(n[0].toUpperCase())?n[0].toUpperCase():Dt.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const e of n)t.anyOf.push({type:Object.values(Dt).includes(e.toUpperCase())?e.toUpperCase():Dt.TYPE_UNSPECIFIED})}}(e.type,t);for(const[r,a]of Object.entries(e))if(null!=a)if("type"==r){if("null"===a)throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(Dt).includes(a.toUpperCase())?a.toUpperCase():Dt.TYPE_UNSPECIFIED}else if(n.includes(r))t[r]=So(a);else if(s.includes(r)){const e=[];for(const n of a)"null"!=n.type?e.push(So(n)):t.nullable=!0;t[r]=e}else if(o.includes(r)){const e={};for(const[t,n]of Object.entries(a))e[t]=So(n);t[r]=e}else{if("additionalProperties"===r)continue;t[r]=a}return t}function Co(e){return So(e)}function Io(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: "+typeof e)}function jo(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function To(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=So(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=So(t.response));return e}function _o(e){if(null==e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Oo(e,t){if("string"!=typeof t)throw new Error("name must be a string");return function(e,t,n,s=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===s;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}(e,t,"cachedContents")}function Ro(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function ko(e){return At(e)}function Po(e){var t;let n;var s;if(null!=(s=e)&&"object"==typeof s&&"name"in s&&(n=e.name),!(function(e){return null!=e&&"object"==typeof e&&"uri"in e}(e)&&(n=e.uri,void 0===n)||function(e){return null!=e&&"object"==typeof e&&"video"in e}(e)&&(n=null===(t=e.video)||void 0===t?void 0:t.uri,void 0===n))){if("string"==typeof e&&(n=e),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error(`Could not extract file name from URI ${n}`);n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Do(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function Mo(e){for(const t of["models","tunedModels","publisherModels"])if(Uo(e,t))return e[t];return[]}function Uo(e,t){return null!==e&&"object"==typeof e&&t in e}function Lo(e,t={}){const n=e,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};n.outputSchema&&(s.responseJsonSchema=n.outputSchema),t.behavior&&(s.behavior=t.behavior);return{functionDeclarations:[s]}}function qo(e,t){let n;if("string"==typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else{if(!t.startsWith("bq://"))throw new Error(`Unsupported string source for Vertex AI: ${t}`);n={format:"bigquery",bigqueryUri:t}}else{if(!t.startsWith("files/"))throw new Error(`Unsupported string source for Gemini API: ${t}`);n={fileName:t}}else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||1!==s)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||1!==o)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Go(e){if("object"!=typeof e||null===e)return{};const t=e,n=t.inlinedResponses;if("object"!=typeof n||null===n)return e;const s=n.inlinedResponses;if(!Array.isArray(s)||0===s.length)return e;let o=!1;for(const i of s){if("object"!=typeof i||null===i)continue;const e=i.response;if("object"!=typeof e||null===e)continue;if(void 0!==e.embedding){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Fo(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Ho(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===e?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===e?"JOB_STATE_EXPIRED":e}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vo(e){const t={},n=wt(e,["responsesFile"]);null!=n&&Et(t,["fileName"],n);const s=wt(e,["inlinedResponses","inlinedResponses"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["response"]);null!=n&&Et(t,["response"],function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["candidates"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["content"]);null!=n&&Et(t,["content"],n);const s=wt(e,["citationMetadata"]);null!=s&&Et(t,["citationMetadata"],function(e){const t={},n=wt(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["citations"],e)}return t}(s));const o=wt(e,["tokenCount"]);null!=o&&Et(t,["tokenCount"],o);const i=wt(e,["finishReason"]);null!=i&&Et(t,["finishReason"],i);const r=wt(e,["avgLogprobs"]);null!=r&&Et(t,["avgLogprobs"],r);const a=wt(e,["groundingMetadata"]);null!=a&&Et(t,["groundingMetadata"],a);const l=wt(e,["index"]);null!=l&&Et(t,["index"],l);const c=wt(e,["logprobsResult"]);null!=c&&Et(t,["logprobsResult"],c);const d=wt(e,["safetyRatings"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["safetyRatings"],e)}const u=wt(e,["urlContextMetadata"]);null!=u&&Et(t,["urlContextMetadata"],u);return t}(e))),Et(t,["candidates"],e)}const o=wt(e,["modelVersion"]);null!=o&&Et(t,["modelVersion"],o);const i=wt(e,["promptFeedback"]);null!=i&&Et(t,["promptFeedback"],i);const r=wt(e,["responseId"]);null!=r&&Et(t,["responseId"],r);const a=wt(e,["usageMetadata"]);null!=a&&Et(t,["usageMetadata"],a);return t}(n));const s=wt(e,["error"]);null!=s&&Et(t,["error"],s);return t}(e))),Et(t,["inlinedResponses"],e)}const o=wt(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["inlinedEmbedContentResponses"],e)}return t}function zo(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["metadata","displayName"]);null!=s&&Et(t,["displayName"],s);const o=wt(e,["metadata","state"]);null!=o&&Et(t,["state"],Ho(o));const i=wt(e,["metadata","createTime"]);null!=i&&Et(t,["createTime"],i);const r=wt(e,["metadata","endTime"]);null!=r&&Et(t,["endTime"],r);const a=wt(e,["metadata","updateTime"]);null!=a&&Et(t,["updateTime"],a);const l=wt(e,["metadata","model"]);null!=l&&Et(t,["model"],l);const c=wt(e,["metadata","output"]);return null!=c&&Et(t,["dest"],Vo(Go(c))),t}function Bo(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["displayName"]);null!=s&&Et(t,["displayName"],s);const o=wt(e,["state"]);null!=o&&Et(t,["state"],Ho(o));const i=wt(e,["error"]);null!=i&&Et(t,["error"],i);const r=wt(e,["createTime"]);null!=r&&Et(t,["createTime"],r);const a=wt(e,["startTime"]);null!=a&&Et(t,["startTime"],a);const l=wt(e,["endTime"]);null!=l&&Et(t,["endTime"],l);const c=wt(e,["updateTime"]);null!=c&&Et(t,["updateTime"],c);const d=wt(e,["model"]);null!=d&&Et(t,["model"],d);const u=wt(e,["inputConfig"]);null!=u&&Et(t,["src"],function(e){const t={},n=wt(e,["instancesFormat"]);null!=n&&Et(t,["format"],n);const s=wt(e,["gcsSource","uris"]);null!=s&&Et(t,["gcsUri"],s);const o=wt(e,["bigquerySource","inputUri"]);null!=o&&Et(t,["bigqueryUri"],o);return t}(u));const p=wt(e,["outputConfig"]);null!=p&&Et(t,["dest"],function(e){const t={},n=wt(e,["predictionsFormat"]);null!=n&&Et(t,["format"],n);const s=wt(e,["gcsDestination","outputUriPrefix"]);null!=s&&Et(t,["gcsUri"],s);const o=wt(e,["bigqueryDestination","outputUri"]);return null!=o&&Et(t,["bigqueryUri"],o),t}(Go(p)));const h=wt(e,["completionStats"]);return null!=h&&Et(t,["completionStats"],h),t}function $o(e,t){const n={};if(void 0!==wt(t,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==wt(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==wt(t,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=wt(t,["fileName"]);null!=s&&Et(n,["fileName"],s);const o=wt(t,["inlinedRequests"]);if(null!=o){let t=o;Array.isArray(t)&&(t=t.map(t=>function(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["request","model"],uo(e,s));const o=wt(t,["contents"]);if(null!=o){let e=Ao(o);Array.isArray(e)&&(e=e.map(e=>Jo(e))),Et(n,["request","contents"],e)}const i=wt(t,["metadata"]);null!=i&&Et(n,["metadata"],i);const r=wt(t,["config"]);null!=r&&Et(n,["request","generationConfig"],function(e,t,n){const s={},o=wt(t,["systemInstruction"]);void 0!==n&&null!=o&&Et(n,["systemInstruction"],Jo(wo(o)));const i=wt(t,["temperature"]);null!=i&&Et(s,["temperature"],i);const r=wt(t,["topP"]);null!=r&&Et(s,["topP"],r);const a=wt(t,["topK"]);null!=a&&Et(s,["topK"],a);const l=wt(t,["candidateCount"]);null!=l&&Et(s,["candidateCount"],l);const c=wt(t,["maxOutputTokens"]);null!=c&&Et(s,["maxOutputTokens"],c);const d=wt(t,["stopSequences"]);null!=d&&Et(s,["stopSequences"],d);const u=wt(t,["responseLogprobs"]);null!=u&&Et(s,["responseLogprobs"],u);const p=wt(t,["logprobs"]);null!=p&&Et(s,["logprobs"],p);const h=wt(t,["presencePenalty"]);null!=h&&Et(s,["presencePenalty"],h);const m=wt(t,["frequencyPenalty"]);null!=m&&Et(s,["frequencyPenalty"],m);const f=wt(t,["seed"]);null!=f&&Et(s,["seed"],f);const g=wt(t,["responseMimeType"]);null!=g&&Et(s,["responseMimeType"],g);const x=wt(t,["responseSchema"]);null!=x&&Et(s,["responseSchema"],Co(x));const b=wt(t,["responseJsonSchema"]);null!=b&&Et(s,["responseJsonSchema"],b);if(void 0!==wt(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==wt(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=wt(t,["safetySettings"]);if(void 0!==n&&null!=v){let e=v;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["category"]);null!=n&&Et(t,["category"],n);if(void 0!==wt(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const s=wt(e,["threshold"]);null!=s&&Et(t,["threshold"],s);return t}(e))),Et(n,["safetySettings"],e)}const y=wt(t,["tools"]);if(void 0!==n&&null!=y){let e=_o(y);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["functionDeclarations"],e)}if(void 0!==wt(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const s=wt(e,["googleSearchRetrieval"]);null!=s&&Et(t,["googleSearchRetrieval"],s);const o=wt(e,["computerUse"]);null!=o&&Et(t,["computerUse"],o);const i=wt(e,["fileSearch"]);null!=i&&Et(t,["fileSearch"],i);const r=wt(e,["codeExecution"]);null!=r&&Et(t,["codeExecution"],r);if(void 0!==wt(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=wt(e,["googleMaps"]);null!=a&&Et(t,["googleMaps"],function(e){const t={};if(void 0!==wt(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wt(e,["enableWidget"]);null!=n&&Et(t,["enableWidget"],n);return t}(a));const l=wt(e,["googleSearch"]);null!=l&&Et(t,["googleSearch"],function(e){const t={};if(void 0!==wt(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wt(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wt(e,["timeRangeFilter"]);null!=n&&Et(t,["timeRangeFilter"],n);return t}(l));const c=wt(e,["urlContext"]);null!=c&&Et(t,["urlContext"],c);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(To(e)))),Et(n,["tools"],e)}const E=wt(t,["toolConfig"]);void 0!==n&&null!=E&&Et(n,["toolConfig"],function(e){const t={},n=wt(e,["functionCallingConfig"]);null!=n&&Et(t,["functionCallingConfig"],function(e){const t={},n=wt(e,["mode"]);null!=n&&Et(t,["mode"],n);const s=wt(e,["allowedFunctionNames"]);null!=s&&Et(t,["allowedFunctionNames"],s);if(void 0!==wt(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const s=wt(e,["retrievalConfig"]);null!=s&&Et(t,["retrievalConfig"],s);return t}(E));if(void 0!==wt(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const w=wt(t,["cachedContent"]);void 0!==n&&null!=w&&Et(n,["cachedContent"],Oo(e,w));const N=wt(t,["responseModalities"]);null!=N&&Et(s,["responseModalities"],N);const A=wt(t,["mediaResolution"]);null!=A&&Et(s,["mediaResolution"],A);const S=wt(t,["speechConfig"]);null!=S&&Et(s,["speechConfig"],Io(S));if(void 0!==wt(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=wt(t,["thinkingConfig"]);null!=C&&Et(s,["thinkingConfig"],C);const I=wt(t,["imageConfig"]);null!=I&&Et(s,["imageConfig"],function(e){const t={},n=wt(e,["aspectRatio"]);null!=n&&Et(t,["aspectRatio"],n);const s=wt(e,["imageSize"]);null!=s&&Et(t,["imageSize"],s);if(void 0!==wt(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==wt(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(I));const j=wt(t,["enableEnhancedCivicAnswers"]);null!=j&&Et(s,["enableEnhancedCivicAnswers"],j);return s}(e,r,wt(n,["request"],{})));return n}(e,t))),Et(n,["requests","requests"],t)}return n}function Jo(e){const t={},n=wt(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["mediaResolution"]);null!=n&&Et(t,["mediaResolution"],n);const s=wt(e,["codeExecutionResult"]);null!=s&&Et(t,["codeExecutionResult"],s);const o=wt(e,["executableCode"]);null!=o&&Et(t,["executableCode"],o);const i=wt(e,["fileData"]);null!=i&&Et(t,["fileData"],function(e){const t={};if(void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wt(e,["fileUri"]);null!=n&&Et(t,["fileUri"],n);const s=wt(e,["mimeType"]);null!=s&&Et(t,["mimeType"],s);return t}(i));const r=wt(e,["functionCall"]);null!=r&&Et(t,["functionCall"],function(e){const t={},n=wt(e,["id"]);null!=n&&Et(t,["id"],n);const s=wt(e,["args"]);null!=s&&Et(t,["args"],s);const o=wt(e,["name"]);null!=o&&Et(t,["name"],o);if(void 0!==wt(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wt(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(r));const a=wt(e,["functionResponse"]);null!=a&&Et(t,["functionResponse"],a);const l=wt(e,["inlineData"]);null!=l&&Et(t,["inlineData"],function(e){const t={},n=wt(e,["data"]);if(null!=n&&Et(t,["data"],n),void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const s=wt(e,["mimeType"]);return null!=s&&Et(t,["mimeType"],s),t}(l));const c=wt(e,["text"]);null!=c&&Et(t,["text"],c);const d=wt(e,["thought"]);null!=d&&Et(t,["thought"],d);const u=wt(e,["thoughtSignature"]);null!=u&&Et(t,["thoughtSignature"],u);const p=wt(e,["videoMetadata"]);null!=p&&Et(t,["videoMetadata"],p);return t}(e))),Et(t,["parts"],e)}const s=wt(e,["role"]);return null!=s&&Et(t,["role"],s),t}function Wo(e,t){const n=wt(e,["displayName"]);void 0!==t&&null!=n&&Et(t,["displayName"],n);const s=wt(e,["dest"]);return void 0!==t&&null!=s&&Et(t,["outputConfig"],function(e){const t={},n=wt(e,["format"]);null!=n&&Et(t,["predictionsFormat"],n);const s=wt(e,["gcsUri"]);null!=s&&Et(t,["gcsDestination","outputUriPrefix"],s);const o=wt(e,["bigqueryUri"]);if(null!=o&&Et(t,["bigqueryDestination","outputUri"],o),void 0!==wt(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==wt(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==wt(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!=typeof e)return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}(s))),{}}function Yo(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["src"]);null!=o&&Et(n,["batch","inputConfig"],$o(e,qo(e,o)));const i=wt(t,["config"]);return null!=i&&function(e,t){const n=wt(e,["displayName"]);if(void 0!==t&&null!=n&&Et(t,["batch","displayName"],n),void 0!==wt(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(i,n),n}function Ko(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["model"],uo(e,s));const o=wt(t,["src"]);null!=o&&Et(n,["inputConfig"],function(e){const t={},n=wt(e,["format"]);null!=n&&Et(t,["instancesFormat"],n);const s=wt(e,["gcsUri"]);null!=s&&Et(t,["gcsSource","uris"],s);const o=wt(e,["bigqueryUri"]);if(null!=o&&Et(t,["bigquerySource","inputUri"],o),void 0!==wt(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==wt(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(qo(e,o)));const i=wt(t,["config"]);return null!=i&&Wo(i,n),n}function Xo(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["src"]);null!=o&&Et(n,["batch","inputConfig"],function(e,t){const n={},s=wt(t,["fileName"]);null!=s&&Et(n,["file_name"],s);const o=wt(t,["inlinedRequests"]);null!=o&&Et(n,["requests"],function(e,t){const n={},s=wt(t,["contents"]);if(null!=s){let t=No(e,s);Array.isArray(t)&&(t=t.map(e=>e)),Et(n,["requests[]","request","content"],t)}const o=wt(t,["config"]);null!=o&&(Et(n,["_self"],function(e,t){const n={},s=wt(e,["taskType"]);void 0!==t&&null!=s&&Et(t,["requests[]","taskType"],s);const o=wt(e,["title"]);void 0!==t&&null!=o&&Et(t,["requests[]","title"],o);const i=wt(e,["outputDimensionality"]);void 0!==t&&null!=i&&Et(t,["requests[]","outputDimensionality"],i);if(void 0!==wt(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==wt(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}(o,n)),function(e,t){for(const[n,s]of Object.entries(t)){const t=n.split("."),o=s.split("."),i=new Set;let r=-1;for(let e=0;e<t.length;e++)if("*"===t[e]){r=e;break}if(-1!==r&&o.length>r)for(let e=r;e<o.length;e++){const t=o[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||i.add(t)}Nt(e,t,o,0,i)}}(n,{"requests[].*":"requests[].request.*"}));return n}(e,o));return n}(e,o));const i=wt(t,["config"]);return null!=i&&function(e,t){const n=wt(e,["displayName"]);void 0!==t&&null!=n&&Et(t,["batch","displayName"],n)}(i,n),n}function Qo(e){const t={},n=wt(e,["config"]);return null!=n&&function(e,t){const n=wt(e,["pageSize"]);void 0!==t&&null!=n&&Et(t,["_query","pageSize"],n);const s=wt(e,["pageToken"]);if(void 0!==t&&null!=s&&Et(t,["_query","pageToken"],s),void 0!==wt(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(n,t),t}function Zo(e){const t={},n=wt(e,["config"]);return null!=n&&function(e,t){const n=wt(e,["pageSize"]);void 0!==t&&null!=n&&Et(t,["_query","pageSize"],n);const s=wt(e,["pageToken"]);void 0!==t&&null!=s&&Et(t,["_query","pageToken"],s);const o=wt(e,["filter"]);void 0!==t&&null!=o&&Et(t,["_query","filter"],o)}(n,t),t}(Ds=Ps||(Ps={})).PAGED_ITEM_BATCH_JOBS="batchJobs",Ds.PAGED_ITEM_MODELS="models",Ds.PAGED_ITEM_TUNING_JOBS="tuningJobs",Ds.PAGED_ITEM_FILES="files",Ds.PAGED_ITEM_CACHED_CONTENTS="cachedContents",Ds.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",Ds.PAGED_ITEM_DOCUMENTS="documents";class ei{constructor(e,t,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,s)}init(e,t,n){var s,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null==t?void 0:t.sdkHttpResponse,this.idxInternal=0;let i={config:{}};i=n&&0!==Object.keys(n).length?"object"==typeof n?Object.assign({},n):n:{config:{}},i.config&&(i.config.pageToken=t.nextPageToken),this.paramsInternal=i,this.pageInternalSize=null!==(o=null===(s=i.config)||void 0===s?void 0:s.pageSize)&&void 0!==o?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ti extends vt{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new ei(Ps.PAGED_ITEM_BATCH_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(e){const t=Yo(this.apiClient,e),n=yt("{model}:batchGenerateContent",t._url),s=t.batch.inputConfig.requests,o=s.requests,i=[];for(const r of o){const e=Object.assign({},r);if(e.systemInstruction){const t=e.systemInstruction;delete e.systemInstruction;const n=e.request;n.systemInstruction=t,e.request=n}i.push(e)}return s.requests=i,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"==typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"==typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},s=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${s}`),void 0===n.dest){const t=this.getGcsUri(e),o=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest=`${t.slice(0,-6)}/dest`:n.dest=`${t}_dest_${s}`;else{if(!o)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");n.dest=`${o}_dest_${s}`}}return n}async createInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=Ko(this.apiClient,e);return r=yt("batchPredictionJobs",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>Bo(e))}{const t=Yo(this.apiClient,e);return r=yt("{model}:batchGenerateContent",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>zo(e))}}async createEmbeddingsInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=Xo(this.apiClient,e);return o=yt("{model}:asyncBatchEmbedContent",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>zo(e))}}async get(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Fo(e,s)),n}(this.apiClient,e);return r=yt("batchPredictionJobs/{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>Bo(e))}{const t=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Fo(e,s)),n}(this.apiClient,e);return r=yt("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>zo(e))}}async cancel(e){var t,n,s,o;let i="",r={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Fo(e,s)),n}(this.apiClient,e);i=yt("batchPredictionJobs/{name}:cancel",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Fo(e,s)),n}(this.apiClient,e);i=yt("batches/{name}:cancel",t._url),r=t._query,delete t._url,delete t._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal})}}async listInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=Zo(e);return r=yt("batchPredictionJobs",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["batchPredictionJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>Bo(e))),Et(t,["batchJobs"],e)}return t}(e),n=new ro;return Object.assign(n,t),n})}{const t=Qo(e);return r=yt("batches",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["operations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>zo(e))),Et(t,["batchJobs"],e)}return t}(e),n=new ro;return Object.assign(n,t),n})}}async delete(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Fo(e,s)),n}(this.apiClient,e);return r=yt("batchPredictionJobs/{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["name"]);null!=s&&Et(t,["name"],s);const o=wt(e,["done"]);null!=o&&Et(t,["done"],o);const i=wt(e,["error"]);return null!=i&&Et(t,["error"],i),t}(e))}{const t=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Fo(e,s)),n}(this.apiClient,e);return r=yt("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["name"]);null!=s&&Et(t,["name"],s);const o=wt(e,["done"]);null!=o&&Et(t,["done"],o);const i=wt(e,["error"]);return null!=i&&Et(t,["error"],i),t}(e))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ni(e){const t={},n=wt(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["mediaResolution"]);null!=n&&Et(t,["mediaResolution"],n);const s=wt(e,["codeExecutionResult"]);null!=s&&Et(t,["codeExecutionResult"],s);const o=wt(e,["executableCode"]);null!=o&&Et(t,["executableCode"],o);const i=wt(e,["fileData"]);null!=i&&Et(t,["fileData"],function(e){const t={};if(void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wt(e,["fileUri"]);null!=n&&Et(t,["fileUri"],n);const s=wt(e,["mimeType"]);null!=s&&Et(t,["mimeType"],s);return t}(i));const r=wt(e,["functionCall"]);null!=r&&Et(t,["functionCall"],function(e){const t={},n=wt(e,["id"]);null!=n&&Et(t,["id"],n);const s=wt(e,["args"]);null!=s&&Et(t,["args"],s);const o=wt(e,["name"]);null!=o&&Et(t,["name"],o);if(void 0!==wt(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wt(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(r));const a=wt(e,["functionResponse"]);null!=a&&Et(t,["functionResponse"],a);const l=wt(e,["inlineData"]);null!=l&&Et(t,["inlineData"],function(e){const t={},n=wt(e,["data"]);if(null!=n&&Et(t,["data"],n),void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const s=wt(e,["mimeType"]);return null!=s&&Et(t,["mimeType"],s),t}(l));const c=wt(e,["text"]);null!=c&&Et(t,["text"],c);const d=wt(e,["thought"]);null!=d&&Et(t,["thought"],d);const u=wt(e,["thoughtSignature"]);null!=u&&Et(t,["thoughtSignature"],u);const p=wt(e,["videoMetadata"]);null!=p&&Et(t,["videoMetadata"],p);return t}(e))),Et(t,["parts"],e)}const s=wt(e,["role"]);return null!=s&&Et(t,["role"],s),t}function si(e,t){const n=wt(e,["ttl"]);void 0!==t&&null!=n&&Et(t,["ttl"],n);const s=wt(e,["expireTime"]);void 0!==t&&null!=s&&Et(t,["expireTime"],s);const o=wt(e,["displayName"]);void 0!==t&&null!=o&&Et(t,["displayName"],o);const i=wt(e,["contents"]);if(void 0!==t&&null!=i){let e=Ao(i);Array.isArray(e)&&(e=e.map(e=>ni(e))),Et(t,["contents"],e)}const r=wt(e,["systemInstruction"]);void 0!==t&&null!=r&&Et(t,["systemInstruction"],ni(wo(r)));const a=wt(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["functionDeclarations"],e)}if(void 0!==wt(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const s=wt(e,["googleSearchRetrieval"]);null!=s&&Et(t,["googleSearchRetrieval"],s);const o=wt(e,["computerUse"]);null!=o&&Et(t,["computerUse"],o);const i=wt(e,["fileSearch"]);null!=i&&Et(t,["fileSearch"],i);const r=wt(e,["codeExecution"]);null!=r&&Et(t,["codeExecution"],r);if(void 0!==wt(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=wt(e,["googleMaps"]);null!=a&&Et(t,["googleMaps"],function(e){const t={};if(void 0!==wt(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wt(e,["enableWidget"]);null!=n&&Et(t,["enableWidget"],n);return t}(a));const l=wt(e,["googleSearch"]);null!=l&&Et(t,["googleSearch"],function(e){const t={};if(void 0!==wt(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wt(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wt(e,["timeRangeFilter"]);null!=n&&Et(t,["timeRangeFilter"],n);return t}(l));const c=wt(e,["urlContext"]);null!=c&&Et(t,["urlContext"],c);return t}(e))),Et(t,["tools"],e)}const l=wt(e,["toolConfig"]);if(void 0!==t&&null!=l&&Et(t,["toolConfig"],function(e){const t={},n=wt(e,["functionCallingConfig"]);null!=n&&Et(t,["functionCallingConfig"],function(e){const t={},n=wt(e,["mode"]);null!=n&&Et(t,["mode"],n);const s=wt(e,["allowedFunctionNames"]);null!=s&&Et(t,["allowedFunctionNames"],s);if(void 0!==wt(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const s=wt(e,["retrievalConfig"]);null!=s&&Et(t,["retrievalConfig"],s);return t}(l)),void 0!==wt(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}function oi(e,t){const n=wt(e,["ttl"]);void 0!==t&&null!=n&&Et(t,["ttl"],n);const s=wt(e,["expireTime"]);void 0!==t&&null!=s&&Et(t,["expireTime"],s);const o=wt(e,["displayName"]);void 0!==t&&null!=o&&Et(t,["displayName"],o);const i=wt(e,["contents"]);if(void 0!==t&&null!=i){let e=Ao(i);Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["contents"],e)}const r=wt(e,["systemInstruction"]);void 0!==t&&null!=r&&Et(t,["systemInstruction"],wo(r));const a=wt(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==wt(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=wt(e,["description"]);null!=n&&Et(t,["description"],n);const s=wt(e,["name"]);null!=s&&Et(t,["name"],s);const o=wt(e,["parameters"]);null!=o&&Et(t,["parameters"],o);const i=wt(e,["parametersJsonSchema"]);null!=i&&Et(t,["parametersJsonSchema"],i);const r=wt(e,["response"]);null!=r&&Et(t,["response"],r);const a=wt(e,["responseJsonSchema"]);null!=a&&Et(t,["responseJsonSchema"],a);return t}(e))),Et(t,["functionDeclarations"],e)}const s=wt(e,["retrieval"]);null!=s&&Et(t,["retrieval"],s);const o=wt(e,["googleSearchRetrieval"]);null!=o&&Et(t,["googleSearchRetrieval"],o);const i=wt(e,["computerUse"]);null!=i&&Et(t,["computerUse"],i);if(void 0!==wt(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=wt(e,["codeExecution"]);null!=r&&Et(t,["codeExecution"],r);const a=wt(e,["enterpriseWebSearch"]);null!=a&&Et(t,["enterpriseWebSearch"],a);const l=wt(e,["googleMaps"]);null!=l&&Et(t,["googleMaps"],l);const c=wt(e,["googleSearch"]);null!=c&&Et(t,["googleSearch"],c);const d=wt(e,["urlContext"]);null!=d&&Et(t,["urlContext"],d);return t}(e))),Et(t,["tools"],e)}const l=wt(e,["toolConfig"]);void 0!==t&&null!=l&&Et(t,["toolConfig"],l);const c=wt(e,["kmsKeyName"]);return void 0!==t&&null!=c&&Et(t,["encryption_spec","kmsKeyName"],c),{}}function ii(e){const t={},n=wt(e,["config"]);return null!=n&&function(e,t){const n=wt(e,["pageSize"]);void 0!==t&&null!=n&&Et(t,["_query","pageSize"],n);const s=wt(e,["pageToken"]);void 0!==t&&null!=s&&Et(t,["_query","pageToken"],s)}(n,t),t}function ri(e){const t={},n=wt(e,["config"]);return null!=n&&function(e,t){const n=wt(e,["pageSize"]);void 0!==t&&null!=n&&Et(t,["_query","pageSize"],n);const s=wt(e,["pageToken"]);void 0!==t&&null!=s&&Et(t,["_query","pageToken"],s)}(n,t),t}function ai(e,t){const n={},s=wt(t,["name"]);null!=s&&Et(n,["_url","name"],Oo(e,s));const o=wt(t,["config"]);return null!=o&&function(e,t){const n=wt(e,["ttl"]);void 0!==t&&null!=n&&Et(t,["ttl"],n);const s=wt(e,["expireTime"]);void 0!==t&&null!=s&&Et(t,["expireTime"],s)}(o,n),n}function li(e,t){const n={},s=wt(t,["name"]);null!=s&&Et(n,["_url","name"],Oo(e,s));const o=wt(t,["config"]);return null!=o&&function(e,t){const n=wt(e,["ttl"]);void 0!==t&&null!=n&&Et(t,["ttl"],n);const s=wt(e,["expireTime"]);void 0!==t&&null!=s&&Et(t,["expireTime"],s)}(o,n),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ci extends vt{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new ei(Ps.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["model"],po(e,s));const o=wt(t,["config"]);return null!=o&&oi(o,n),n}(this.apiClient,e);return r=yt("cachedContents",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=function(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["model"],po(e,s));const o=wt(t,["config"]);return null!=o&&si(o,n),n}(this.apiClient,e);return r=yt("cachedContents",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async get(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Oo(e,s)),n}(this.apiClient,e);return r=yt("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Oo(e,s)),n}(this.apiClient,e);return r=yt("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async delete(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Oo(e,s)),n}(this.apiClient,e);return r=yt("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);return null!=n&&Et(t,["sdkHttpResponse"],n),t}(e),n=new Xs;return Object.assign(n,t),n})}{const t=function(e,t){const n={},s=wt(t,["name"]);return null!=s&&Et(n,["_url","name"],Oo(e,s)),n}(this.apiClient,e);return r=yt("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);return null!=n&&Et(t,["sdkHttpResponse"],n),t}(e),n=new Xs;return Object.assign(n,t),n})}}async update(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=li(this.apiClient,e);return r=yt("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=ai(this.apiClient,e);return r=yt("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async listInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=ri(e);return r=yt("cachedContents",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["cachedContents"],e)}return t}(e),n=new Qs;return Object.assign(n,t),n})}{const t=ii(e);return r=yt("cachedContents",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["cachedContents"],e)}return t}(e),n=new Qs;return Object.assign(n,t),n})}}}function di(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]])}return n}function ui(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pi(e){return this instanceof pi?(this.v=e,this):new pi(e)}function hi(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,o=n.apply(e,t||[]),i=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),r("next"),r("throw"),r("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),s[Symbol.asyncIterator]=function(){return this},s;function r(e,t){o[e]&&(s[e]=function(t){return new Promise(function(n,s){i.push([e,t,n,s])>1||a(e,t)})},t&&(s[e]=t(s[e])))}function a(e,t){try{(n=o[e](t)).value instanceof pi?Promise.resolve(n.value.v).then(l,c):d(i[0][2],n)}catch(s){d(i[0][3],s)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function mi(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=ui(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(n){t[n]=e[n]&&function(t){return new Promise(function(s,o){(function(e,t,n,s){Promise.resolve(s).then(function(t){e({value:t,done:n})},t)})(s,o,(t=e[n](t)).done,t.value)})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function fi(e){var t;if(null==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&gi(n)}function gi(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function xi(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let s=0;for(;s<n;)if("user"===e[s].role)t.push(e[s]),s++;else{const o=[];let i=!0;for(;s<n&&"model"===e[s].role;)o.push(e[s]),i&&!gi(e[s])&&(i=!1),s++;i?t.push(...o):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class bi{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new vi(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vi{constructor(e,t,n,s={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error(`Role must be user or model, but got ${t.role}.`)}(o)}async sendMessage(e){var t;await this.sendPromise;const n=wo(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t,o;const i=await s,r=null===(t=null===(e=i.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,a=i.automaticFunctionCallingHistory,l=this.getHistory(!0).length;let c=[];null!=a&&(c=null!==(o=a.slice(l))&&void 0!==o?o:[]);const d=r?[r]:[];this.recordHistory(n,d,c)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const n=wo(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,n)}getHistory(e=!1){const t=e?xi(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return hi(this,arguments,function*(){var n,s,o,i,r,a;const l=[];try{for(var c,d=!0,u=mi(e);!(n=(c=yield pi(u.next())).done);d=!0){i=c.value,d=!1;const e=i;if(fi(e)){const t=null===(a=null===(r=e.candidates)||void 0===r?void 0:r[0])||void 0===a?void 0:a.content;void 0!==t&&l.push(t)}yield yield pi(e)}}catch(p){s={error:p}}finally{try{d||n||!(o=u.return)||(yield pi(o.call(u)))}finally{if(s)throw s.error}}this.recordHistory(t,l)})}recordHistory(e,t,n){let s=[];t.length>0&&t.every(e=>void 0!==e.role)?s=t:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...xi(n)):this.history.push(e),this.history.push(...s)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yi extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yi.prototype)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ei(e){const t={},n=wt(e,["config"]);return null!=n&&function(e,t){const n=wt(e,["pageSize"]);void 0!==t&&null!=n&&Et(t,["_query","pageSize"],n);const s=wt(e,["pageToken"]);void 0!==t&&null!=s&&Et(t,["_query","pageToken"],s)}(n,t),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class wi extends vt{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new ei(Ps.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>e)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=Ei(e);return o=yt("files",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),s.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["files"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["files"],e)}return t}(e),n=new so;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=function(e){const t={},n=wt(e,["file"]);return null!=n&&Et(t,["file"],n),t}(e);return o=yt("upload/v1beta/files",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);return null!=n&&Et(t,["sdkHttpResponse"],n),t}(e),n=new oo;return Object.assign(n,t),n})}}async get(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=function(e){const t={},n=wt(e,["name"]);return null!=n&&Et(t,["_url","file"],Po(n)),t}(e);return o=yt("files/{file}",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>e)}}async delete(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=function(e){const t={},n=wt(e,["name"]);return null!=n&&Et(t,["_url","file"],Po(n)),t}(e);return o=yt("files/{file}",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),s.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);return null!=n&&Et(t,["sdkHttpResponse"],n),t}(e),n=new io;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ni(e){const t={},n=wt(e,["data"]);if(null!=n&&Et(t,["data"],n),void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const s=wt(e,["mimeType"]);return null!=s&&Et(t,["mimeType"],s),t}function Ai(e){const t={},n=wt(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["mediaResolution"]);null!=n&&Et(t,["mediaResolution"],n);const s=wt(e,["codeExecutionResult"]);null!=s&&Et(t,["codeExecutionResult"],s);const o=wt(e,["executableCode"]);null!=o&&Et(t,["executableCode"],o);const i=wt(e,["fileData"]);null!=i&&Et(t,["fileData"],function(e){const t={};if(void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wt(e,["fileUri"]);null!=n&&Et(t,["fileUri"],n);const s=wt(e,["mimeType"]);null!=s&&Et(t,["mimeType"],s);return t}(i));const r=wt(e,["functionCall"]);null!=r&&Et(t,["functionCall"],function(e){const t={},n=wt(e,["id"]);null!=n&&Et(t,["id"],n);const s=wt(e,["args"]);null!=s&&Et(t,["args"],s);const o=wt(e,["name"]);null!=o&&Et(t,["name"],o);if(void 0!==wt(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wt(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(r));const a=wt(e,["functionResponse"]);null!=a&&Et(t,["functionResponse"],a);const l=wt(e,["inlineData"]);null!=l&&Et(t,["inlineData"],Ni(l));const c=wt(e,["text"]);null!=c&&Et(t,["text"],c);const d=wt(e,["thought"]);null!=d&&Et(t,["thought"],d);const u=wt(e,["thoughtSignature"]);null!=u&&Et(t,["thoughtSignature"],u);const p=wt(e,["videoMetadata"]);null!=p&&Et(t,["videoMetadata"],p);return t}(e))),Et(t,["parts"],e)}const s=wt(e,["role"]);return null!=s&&Et(t,["role"],s),t}function Si(e,t){const n=wt(e,["generationConfig"]);void 0!==t&&null!=n&&Et(t,["setup","generationConfig"],n);const s=wt(e,["responseModalities"]);void 0!==t&&null!=s&&Et(t,["setup","generationConfig","responseModalities"],s);const o=wt(e,["temperature"]);void 0!==t&&null!=o&&Et(t,["setup","generationConfig","temperature"],o);const i=wt(e,["topP"]);void 0!==t&&null!=i&&Et(t,["setup","generationConfig","topP"],i);const r=wt(e,["topK"]);void 0!==t&&null!=r&&Et(t,["setup","generationConfig","topK"],r);const a=wt(e,["maxOutputTokens"]);void 0!==t&&null!=a&&Et(t,["setup","generationConfig","maxOutputTokens"],a);const l=wt(e,["mediaResolution"]);void 0!==t&&null!=l&&Et(t,["setup","generationConfig","mediaResolution"],l);const c=wt(e,["seed"]);void 0!==t&&null!=c&&Et(t,["setup","generationConfig","seed"],c);const d=wt(e,["speechConfig"]);void 0!==t&&null!=d&&Et(t,["setup","generationConfig","speechConfig"],jo(d));const u=wt(e,["thinkingConfig"]);void 0!==t&&null!=u&&Et(t,["setup","generationConfig","thinkingConfig"],u);const p=wt(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&Et(t,["setup","generationConfig","enableAffectiveDialog"],p);const h=wt(e,["systemInstruction"]);void 0!==t&&null!=h&&Et(t,["setup","systemInstruction"],Ai(wo(h)));const m=wt(e,["tools"]);if(void 0!==t&&null!=m){let e=_o(m);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["functionDeclarations"],e)}if(void 0!==wt(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const s=wt(e,["googleSearchRetrieval"]);null!=s&&Et(t,["googleSearchRetrieval"],s);const o=wt(e,["computerUse"]);null!=o&&Et(t,["computerUse"],o);const i=wt(e,["fileSearch"]);null!=i&&Et(t,["fileSearch"],i);const r=wt(e,["codeExecution"]);null!=r&&Et(t,["codeExecution"],r);if(void 0!==wt(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=wt(e,["googleMaps"]);null!=a&&Et(t,["googleMaps"],function(e){const t={};if(void 0!==wt(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wt(e,["enableWidget"]);return null!=n&&Et(t,["enableWidget"],n),t}(a));const l=wt(e,["googleSearch"]);null!=l&&Et(t,["googleSearch"],function(e){const t={};if(void 0!==wt(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wt(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wt(e,["timeRangeFilter"]);return null!=n&&Et(t,["timeRangeFilter"],n),t}(l));const c=wt(e,["urlContext"]);null!=c&&Et(t,["urlContext"],c);return t}(To(e)))),Et(t,["setup","tools"],e)}const f=wt(e,["sessionResumption"]);void 0!==t&&null!=f&&Et(t,["setup","sessionResumption"],function(e){const t={},n=wt(e,["handle"]);null!=n&&Et(t,["handle"],n);if(void 0!==wt(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(f));const g=wt(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&Et(t,["setup","inputAudioTranscription"],g);const x=wt(e,["outputAudioTranscription"]);void 0!==t&&null!=x&&Et(t,["setup","outputAudioTranscription"],x);const b=wt(e,["realtimeInputConfig"]);void 0!==t&&null!=b&&Et(t,["setup","realtimeInputConfig"],b);const v=wt(e,["contextWindowCompression"]);void 0!==t&&null!=v&&Et(t,["setup","contextWindowCompression"],v);const y=wt(e,["proactivity"]);if(void 0!==t&&null!=y&&Et(t,["setup","proactivity"],y),void 0!==wt(e,["explicitVadSignal"]))throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}function Ci(e,t){const n=wt(e,["generationConfig"]);void 0!==t&&null!=n&&Et(t,["setup","generationConfig"],function(e){const t={},n=wt(e,["modelSelectionConfig"]);null!=n&&Et(t,["modelConfig"],n);const s=wt(e,["responseJsonSchema"]);null!=s&&Et(t,["responseJsonSchema"],s);const o=wt(e,["audioTimestamp"]);null!=o&&Et(t,["audioTimestamp"],o);const i=wt(e,["candidateCount"]);null!=i&&Et(t,["candidateCount"],i);const r=wt(e,["enableAffectiveDialog"]);null!=r&&Et(t,["enableAffectiveDialog"],r);const a=wt(e,["frequencyPenalty"]);null!=a&&Et(t,["frequencyPenalty"],a);const l=wt(e,["logprobs"]);null!=l&&Et(t,["logprobs"],l);const c=wt(e,["maxOutputTokens"]);null!=c&&Et(t,["maxOutputTokens"],c);const d=wt(e,["mediaResolution"]);null!=d&&Et(t,["mediaResolution"],d);const u=wt(e,["presencePenalty"]);null!=u&&Et(t,["presencePenalty"],u);const p=wt(e,["responseLogprobs"]);null!=p&&Et(t,["responseLogprobs"],p);const h=wt(e,["responseMimeType"]);null!=h&&Et(t,["responseMimeType"],h);const m=wt(e,["responseModalities"]);null!=m&&Et(t,["responseModalities"],m);const f=wt(e,["responseSchema"]);null!=f&&Et(t,["responseSchema"],f);const g=wt(e,["routingConfig"]);null!=g&&Et(t,["routingConfig"],g);const x=wt(e,["seed"]);null!=x&&Et(t,["seed"],x);const b=wt(e,["speechConfig"]);null!=b&&Et(t,["speechConfig"],_i(b));const v=wt(e,["stopSequences"]);null!=v&&Et(t,["stopSequences"],v);const y=wt(e,["temperature"]);null!=y&&Et(t,["temperature"],y);const E=wt(e,["thinkingConfig"]);null!=E&&Et(t,["thinkingConfig"],E);const w=wt(e,["topK"]);null!=w&&Et(t,["topK"],w);const N=wt(e,["topP"]);if(null!=N&&Et(t,["topP"],N),void 0!==wt(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(n));const s=wt(e,["responseModalities"]);void 0!==t&&null!=s&&Et(t,["setup","generationConfig","responseModalities"],s);const o=wt(e,["temperature"]);void 0!==t&&null!=o&&Et(t,["setup","generationConfig","temperature"],o);const i=wt(e,["topP"]);void 0!==t&&null!=i&&Et(t,["setup","generationConfig","topP"],i);const r=wt(e,["topK"]);void 0!==t&&null!=r&&Et(t,["setup","generationConfig","topK"],r);const a=wt(e,["maxOutputTokens"]);void 0!==t&&null!=a&&Et(t,["setup","generationConfig","maxOutputTokens"],a);const l=wt(e,["mediaResolution"]);void 0!==t&&null!=l&&Et(t,["setup","generationConfig","mediaResolution"],l);const c=wt(e,["seed"]);void 0!==t&&null!=c&&Et(t,["setup","generationConfig","seed"],c);const d=wt(e,["speechConfig"]);void 0!==t&&null!=d&&Et(t,["setup","generationConfig","speechConfig"],_i(jo(d)));const u=wt(e,["thinkingConfig"]);void 0!==t&&null!=u&&Et(t,["setup","generationConfig","thinkingConfig"],u);const p=wt(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&Et(t,["setup","generationConfig","enableAffectiveDialog"],p);const h=wt(e,["systemInstruction"]);void 0!==t&&null!=h&&Et(t,["setup","systemInstruction"],wo(h));const m=wt(e,["tools"]);if(void 0!==t&&null!=m){let e=_o(m);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==wt(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=wt(e,["description"]);null!=n&&Et(t,["description"],n);const s=wt(e,["name"]);null!=s&&Et(t,["name"],s);const o=wt(e,["parameters"]);null!=o&&Et(t,["parameters"],o);const i=wt(e,["parametersJsonSchema"]);null!=i&&Et(t,["parametersJsonSchema"],i);const r=wt(e,["response"]);null!=r&&Et(t,["response"],r);const a=wt(e,["responseJsonSchema"]);return null!=a&&Et(t,["responseJsonSchema"],a),t}(e))),Et(t,["functionDeclarations"],e)}const s=wt(e,["retrieval"]);null!=s&&Et(t,["retrieval"],s);const o=wt(e,["googleSearchRetrieval"]);null!=o&&Et(t,["googleSearchRetrieval"],o);const i=wt(e,["computerUse"]);null!=i&&Et(t,["computerUse"],i);if(void 0!==wt(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=wt(e,["codeExecution"]);null!=r&&Et(t,["codeExecution"],r);const a=wt(e,["enterpriseWebSearch"]);null!=a&&Et(t,["enterpriseWebSearch"],a);const l=wt(e,["googleMaps"]);null!=l&&Et(t,["googleMaps"],l);const c=wt(e,["googleSearch"]);null!=c&&Et(t,["googleSearch"],c);const d=wt(e,["urlContext"]);null!=d&&Et(t,["urlContext"],d);return t}(To(e)))),Et(t,["setup","tools"],e)}const f=wt(e,["sessionResumption"]);void 0!==t&&null!=f&&Et(t,["setup","sessionResumption"],f);const g=wt(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&Et(t,["setup","inputAudioTranscription"],g);const x=wt(e,["outputAudioTranscription"]);void 0!==t&&null!=x&&Et(t,["setup","outputAudioTranscription"],x);const b=wt(e,["realtimeInputConfig"]);void 0!==t&&null!=b&&Et(t,["setup","realtimeInputConfig"],b);const v=wt(e,["contextWindowCompression"]);void 0!==t&&null!=v&&Et(t,["setup","contextWindowCompression"],v);const y=wt(e,["proactivity"]);void 0!==t&&null!=y&&Et(t,["setup","proactivity"],y);const E=wt(e,["explicitVadSignal"]);return void 0!==t&&null!=E&&Et(t,["setup","explicitVadSignal"],E),{}}function Ii(e){const t={},n=wt(e,["media"]);if(null!=n){let e=ho(n);Array.isArray(e)&&(e=e.map(e=>Ni(e))),Et(t,["mediaChunks"],e)}const s=wt(e,["audio"]);null!=s&&Et(t,["audio"],Ni(go(s)));const o=wt(e,["audioStreamEnd"]);null!=o&&Et(t,["audioStreamEnd"],o);const i=wt(e,["video"]);null!=i&&Et(t,["video"],Ni(fo(i)));const r=wt(e,["text"]);null!=r&&Et(t,["text"],r);const a=wt(e,["activityStart"]);null!=a&&Et(t,["activityStart"],a);const l=wt(e,["activityEnd"]);return null!=l&&Et(t,["activityEnd"],l),t}function ji(e){const t={},n=wt(e,["media"]);if(null!=n){let e=ho(n);Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["mediaChunks"],e)}const s=wt(e,["audio"]);null!=s&&Et(t,["audio"],go(s));const o=wt(e,["audioStreamEnd"]);null!=o&&Et(t,["audioStreamEnd"],o);const i=wt(e,["video"]);null!=i&&Et(t,["video"],fo(i));const r=wt(e,["text"]);null!=r&&Et(t,["text"],r);const a=wt(e,["activityStart"]);null!=a&&Et(t,["activityStart"],a);const l=wt(e,["activityEnd"]);return null!=l&&Et(t,["activityEnd"],l),t}function Ti(e){const t={},n=wt(e,["setupComplete"]);null!=n&&Et(t,["setupComplete"],n);const s=wt(e,["serverContent"]);null!=s&&Et(t,["serverContent"],s);const o=wt(e,["toolCall"]);null!=o&&Et(t,["toolCall"],o);const i=wt(e,["toolCallCancellation"]);null!=i&&Et(t,["toolCallCancellation"],i);const r=wt(e,["usageMetadata"]);null!=r&&Et(t,["usageMetadata"],function(e){const t={},n=wt(e,["promptTokenCount"]);null!=n&&Et(t,["promptTokenCount"],n);const s=wt(e,["cachedContentTokenCount"]);null!=s&&Et(t,["cachedContentTokenCount"],s);const o=wt(e,["candidatesTokenCount"]);null!=o&&Et(t,["responseTokenCount"],o);const i=wt(e,["toolUsePromptTokenCount"]);null!=i&&Et(t,["toolUsePromptTokenCount"],i);const r=wt(e,["thoughtsTokenCount"]);null!=r&&Et(t,["thoughtsTokenCount"],r);const a=wt(e,["totalTokenCount"]);null!=a&&Et(t,["totalTokenCount"],a);const l=wt(e,["promptTokensDetails"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["promptTokensDetails"],e)}const c=wt(e,["cacheTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["cacheTokensDetails"],e)}const d=wt(e,["candidatesTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["responseTokensDetails"],e)}const u=wt(e,["toolUsePromptTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["toolUsePromptTokensDetails"],e)}const p=wt(e,["trafficType"]);null!=p&&Et(t,["trafficType"],p);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(r));const a=wt(e,["goAway"]);null!=a&&Et(t,["goAway"],a);const l=wt(e,["sessionResumptionUpdate"]);null!=l&&Et(t,["sessionResumptionUpdate"],l);const c=wt(e,["voiceActivityDetectionSignal"]);return null!=c&&Et(t,["voiceActivityDetectionSignal"],c),t}function _i(e){const t={},n=wt(e,["voiceConfig"]);null!=n&&Et(t,["voiceConfig"],n);const s=wt(e,["languageCode"]);if(null!=s&&Et(t,["languageCode"],s),void 0!==wt(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Oi(e){const t={},n=wt(e,["content"]);null!=n&&Et(t,["content"],n);const s=wt(e,["citationMetadata"]);null!=s&&Et(t,["citationMetadata"],function(e){const t={},n=wt(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["citations"],e)}return t}(s));const o=wt(e,["tokenCount"]);null!=o&&Et(t,["tokenCount"],o);const i=wt(e,["finishReason"]);null!=i&&Et(t,["finishReason"],i);const r=wt(e,["avgLogprobs"]);null!=r&&Et(t,["avgLogprobs"],r);const a=wt(e,["groundingMetadata"]);null!=a&&Et(t,["groundingMetadata"],a);const l=wt(e,["index"]);null!=l&&Et(t,["index"],l);const c=wt(e,["logprobsResult"]);null!=c&&Et(t,["logprobsResult"],c);const d=wt(e,["safetyRatings"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["safetyRatings"],e)}const u=wt(e,["urlContextMetadata"]);return null!=u&&Et(t,["urlContextMetadata"],u),t}function Ri(e){const t={},n=wt(e,["values"]);null!=n&&Et(t,["values"],n);const s=wt(e,["statistics"]);return null!=s&&Et(t,["statistics"],function(e){const t={},n=wt(e,["truncated"]);null!=n&&Et(t,["truncated"],n);const s=wt(e,["token_count"]);null!=s&&Et(t,["tokenCount"],s);return t}(s)),t}function ki(e){const t={},n=wt(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["mediaResolution"]);null!=n&&Et(t,["mediaResolution"],n);const s=wt(e,["codeExecutionResult"]);null!=s&&Et(t,["codeExecutionResult"],s);const o=wt(e,["executableCode"]);null!=o&&Et(t,["executableCode"],o);const i=wt(e,["fileData"]);null!=i&&Et(t,["fileData"],function(e){const t={};if(void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wt(e,["fileUri"]);null!=n&&Et(t,["fileUri"],n);const s=wt(e,["mimeType"]);null!=s&&Et(t,["mimeType"],s);return t}(i));const r=wt(e,["functionCall"]);null!=r&&Et(t,["functionCall"],function(e){const t={},n=wt(e,["id"]);null!=n&&Et(t,["id"],n);const s=wt(e,["args"]);null!=s&&Et(t,["args"],s);const o=wt(e,["name"]);null!=o&&Et(t,["name"],o);if(void 0!==wt(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wt(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(r));const a=wt(e,["functionResponse"]);null!=a&&Et(t,["functionResponse"],a);const l=wt(e,["inlineData"]);null!=l&&Et(t,["inlineData"],function(e){const t={},n=wt(e,["data"]);if(null!=n&&Et(t,["data"],n),void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const s=wt(e,["mimeType"]);return null!=s&&Et(t,["mimeType"],s),t}(l));const c=wt(e,["text"]);null!=c&&Et(t,["text"],c);const d=wt(e,["thought"]);null!=d&&Et(t,["thought"],d);const u=wt(e,["thoughtSignature"]);null!=u&&Et(t,["thoughtSignature"],u);const p=wt(e,["videoMetadata"]);null!=p&&Et(t,["videoMetadata"],p);return t}(e))),Et(t,["parts"],e)}const s=wt(e,["role"]);return null!=s&&Et(t,["role"],s),t}function Pi(e,t){const n=wt(e,["systemInstruction"]);void 0!==t&&null!=n&&Et(t,["systemInstruction"],wo(n));const s=wt(e,["tools"]);if(void 0!==t&&null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>mr(e))),Et(t,["tools"],e)}const o=wt(e,["generationConfig"]);return void 0!==t&&null!=o&&Et(t,["generationConfig"],function(e){const t={},n=wt(e,["modelSelectionConfig"]);null!=n&&Et(t,["modelConfig"],n);const s=wt(e,["responseJsonSchema"]);null!=s&&Et(t,["responseJsonSchema"],s);const o=wt(e,["audioTimestamp"]);null!=o&&Et(t,["audioTimestamp"],o);const i=wt(e,["candidateCount"]);null!=i&&Et(t,["candidateCount"],i);const r=wt(e,["enableAffectiveDialog"]);null!=r&&Et(t,["enableAffectiveDialog"],r);const a=wt(e,["frequencyPenalty"]);null!=a&&Et(t,["frequencyPenalty"],a);const l=wt(e,["logprobs"]);null!=l&&Et(t,["logprobs"],l);const c=wt(e,["maxOutputTokens"]);null!=c&&Et(t,["maxOutputTokens"],c);const d=wt(e,["mediaResolution"]);null!=d&&Et(t,["mediaResolution"],d);const u=wt(e,["presencePenalty"]);null!=u&&Et(t,["presencePenalty"],u);const p=wt(e,["responseLogprobs"]);null!=p&&Et(t,["responseLogprobs"],p);const h=wt(e,["responseMimeType"]);null!=h&&Et(t,["responseMimeType"],h);const m=wt(e,["responseModalities"]);null!=m&&Et(t,["responseModalities"],m);const f=wt(e,["responseSchema"]);null!=f&&Et(t,["responseSchema"],f);const g=wt(e,["routingConfig"]);null!=g&&Et(t,["routingConfig"],g);const x=wt(e,["seed"]);null!=x&&Et(t,["seed"],x);const b=wt(e,["speechConfig"]);null!=b&&Et(t,["speechConfig"],hr(b));const v=wt(e,["stopSequences"]);null!=v&&Et(t,["stopSequences"],v);const y=wt(e,["temperature"]);null!=y&&Et(t,["temperature"],y);const E=wt(e,["thinkingConfig"]);null!=E&&Et(t,["thinkingConfig"],E);const w=wt(e,["topK"]);null!=w&&Et(t,["topK"],w);const N=wt(e,["topP"]);null!=N&&Et(t,["topP"],N);if(void 0!==wt(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(o)),{}}function Di(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["contents"]);if(null!=o){let e=Ao(o);Array.isArray(e)&&(e=e.map(e=>ki(e))),Et(n,["contents"],e)}const i=wt(t,["config"]);return null!=i&&function(e){if(void 0!==wt(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==wt(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==wt(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(i),n}function Mi(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["prompt"]);null!=o&&Et(n,["instances[0]","prompt"],o);const i=wt(t,["referenceImages"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["referenceImage"]);null!=n&&Et(t,["referenceImage"],sr(n));const s=wt(e,["referenceId"]);null!=s&&Et(t,["referenceId"],s);const o=wt(e,["referenceType"]);null!=o&&Et(t,["referenceType"],o);const i=wt(e,["maskImageConfig"]);null!=i&&Et(t,["maskImageConfig"],function(e){const t={},n=wt(e,["maskMode"]);null!=n&&Et(t,["maskMode"],n);const s=wt(e,["segmentationClasses"]);null!=s&&Et(t,["maskClasses"],s);const o=wt(e,["maskDilation"]);null!=o&&Et(t,["dilation"],o);return t}(i));const r=wt(e,["controlImageConfig"]);null!=r&&Et(t,["controlImageConfig"],function(e){const t={},n=wt(e,["controlType"]);null!=n&&Et(t,["controlType"],n);const s=wt(e,["enableControlImageComputation"]);return null!=s&&Et(t,["computeControl"],s),t}(r));const a=wt(e,["styleImageConfig"]);null!=a&&Et(t,["styleImageConfig"],a);const l=wt(e,["subjectImageConfig"]);null!=l&&Et(t,["subjectImageConfig"],l);return t}(e))),Et(n,["instances[0]","referenceImages"],e)}const r=wt(t,["config"]);return null!=r&&function(e,t){const n=wt(e,["outputGcsUri"]);void 0!==t&&null!=n&&Et(t,["parameters","storageUri"],n);const s=wt(e,["negativePrompt"]);void 0!==t&&null!=s&&Et(t,["parameters","negativePrompt"],s);const o=wt(e,["numberOfImages"]);void 0!==t&&null!=o&&Et(t,["parameters","sampleCount"],o);const i=wt(e,["aspectRatio"]);void 0!==t&&null!=i&&Et(t,["parameters","aspectRatio"],i);const r=wt(e,["guidanceScale"]);void 0!==t&&null!=r&&Et(t,["parameters","guidanceScale"],r);const a=wt(e,["seed"]);void 0!==t&&null!=a&&Et(t,["parameters","seed"],a);const l=wt(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&Et(t,["parameters","safetySetting"],l);const c=wt(e,["personGeneration"]);void 0!==t&&null!=c&&Et(t,["parameters","personGeneration"],c);const d=wt(e,["includeSafetyAttributes"]);void 0!==t&&null!=d&&Et(t,["parameters","includeSafetyAttributes"],d);const u=wt(e,["includeRaiReason"]);void 0!==t&&null!=u&&Et(t,["parameters","includeRaiReason"],u);const p=wt(e,["language"]);void 0!==t&&null!=p&&Et(t,["parameters","language"],p);const h=wt(e,["outputMimeType"]);void 0!==t&&null!=h&&Et(t,["parameters","outputOptions","mimeType"],h);const m=wt(e,["outputCompressionQuality"]);void 0!==t&&null!=m&&Et(t,["parameters","outputOptions","compressionQuality"],m);const f=wt(e,["addWatermark"]);void 0!==t&&null!=f&&Et(t,["parameters","addWatermark"],f);const g=wt(e,["labels"]);void 0!==t&&null!=g&&Et(t,["labels"],g);const x=wt(e,["editMode"]);void 0!==t&&null!=x&&Et(t,["parameters","editMode"],x);const b=wt(e,["baseSteps"]);void 0!==t&&null!=b&&Et(t,["parameters","editConfig","baseSteps"],b)}(r,n),n}function Ui(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["contents"]);if(null!=o){let t=No(e,o);Array.isArray(t)&&(t=t.map(e=>e)),Et(n,["requests[]","content"],t)}const i=wt(t,["config"]);null!=i&&function(e,t){const n=wt(e,["taskType"]);void 0!==t&&null!=n&&Et(t,["requests[]","taskType"],n);const s=wt(e,["title"]);void 0!==t&&null!=s&&Et(t,["requests[]","title"],s);const o=wt(e,["outputDimensionality"]);if(void 0!==t&&null!=o&&Et(t,["requests[]","outputDimensionality"],o),void 0!==wt(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==wt(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(i,n);const r=wt(t,["model"]);return void 0!==r&&Et(n,["requests[]","model"],uo(e,r)),n}function Li(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["contents"]);if(null!=o){let t=No(e,o);Array.isArray(t)&&(t=t.map(e=>e)),Et(n,["instances[]","content"],t)}const i=wt(t,["config"]);return null!=i&&function(e,t){const n=wt(e,["taskType"]);void 0!==t&&null!=n&&Et(t,["instances[]","task_type"],n);const s=wt(e,["title"]);void 0!==t&&null!=s&&Et(t,["instances[]","title"],s);const o=wt(e,["outputDimensionality"]);void 0!==t&&null!=o&&Et(t,["parameters","outputDimensionality"],o);const i=wt(e,["mimeType"]);void 0!==t&&null!=i&&Et(t,["instances[]","mimeType"],i);const r=wt(e,["autoTruncate"]);void 0!==t&&null!=r&&Et(t,["parameters","autoTruncate"],r)}(i,n),n}function qi(e,t,n){const s={},o=wt(t,["systemInstruction"]);void 0!==n&&null!=o&&Et(n,["systemInstruction"],ki(wo(o)));const i=wt(t,["temperature"]);null!=i&&Et(s,["temperature"],i);const r=wt(t,["topP"]);null!=r&&Et(s,["topP"],r);const a=wt(t,["topK"]);null!=a&&Et(s,["topK"],a);const l=wt(t,["candidateCount"]);null!=l&&Et(s,["candidateCount"],l);const c=wt(t,["maxOutputTokens"]);null!=c&&Et(s,["maxOutputTokens"],c);const d=wt(t,["stopSequences"]);null!=d&&Et(s,["stopSequences"],d);const u=wt(t,["responseLogprobs"]);null!=u&&Et(s,["responseLogprobs"],u);const p=wt(t,["logprobs"]);null!=p&&Et(s,["logprobs"],p);const h=wt(t,["presencePenalty"]);null!=h&&Et(s,["presencePenalty"],h);const m=wt(t,["frequencyPenalty"]);null!=m&&Et(s,["frequencyPenalty"],m);const f=wt(t,["seed"]);null!=f&&Et(s,["seed"],f);const g=wt(t,["responseMimeType"]);null!=g&&Et(s,["responseMimeType"],g);const x=wt(t,["responseSchema"]);null!=x&&Et(s,["responseSchema"],Co(x));const b=wt(t,["responseJsonSchema"]);if(null!=b&&Et(s,["responseJsonSchema"],b),void 0!==wt(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==wt(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=wt(t,["safetySettings"]);if(void 0!==n&&null!=v){let e=v;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["category"]);null!=n&&Et(t,["category"],n);if(void 0!==wt(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const s=wt(e,["threshold"]);null!=s&&Et(t,["threshold"],s);return t}(e))),Et(n,["safetySettings"],e)}const y=wt(t,["tools"]);if(void 0!==n&&null!=y){let e=_o(y);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["functionDeclarations"],e)}if(void 0!==wt(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const s=wt(e,["googleSearchRetrieval"]);null!=s&&Et(t,["googleSearchRetrieval"],s);const o=wt(e,["computerUse"]);null!=o&&Et(t,["computerUse"],o);const i=wt(e,["fileSearch"]);null!=i&&Et(t,["fileSearch"],i);const r=wt(e,["codeExecution"]);null!=r&&Et(t,["codeExecution"],r);if(void 0!==wt(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=wt(e,["googleMaps"]);null!=a&&Et(t,["googleMaps"],function(e){const t={};if(void 0!==wt(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wt(e,["enableWidget"]);null!=n&&Et(t,["enableWidget"],n);return t}(a));const l=wt(e,["googleSearch"]);null!=l&&Et(t,["googleSearch"],function(e){const t={};if(void 0!==wt(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wt(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wt(e,["timeRangeFilter"]);null!=n&&Et(t,["timeRangeFilter"],n);return t}(l));const c=wt(e,["urlContext"]);null!=c&&Et(t,["urlContext"],c);return t}(To(e)))),Et(n,["tools"],e)}const E=wt(t,["toolConfig"]);if(void 0!==n&&null!=E&&Et(n,["toolConfig"],function(e){const t={},n=wt(e,["functionCallingConfig"]);null!=n&&Et(t,["functionCallingConfig"],function(e){const t={},n=wt(e,["mode"]);null!=n&&Et(t,["mode"],n);const s=wt(e,["allowedFunctionNames"]);if(null!=s&&Et(t,["allowedFunctionNames"],s),void 0!==wt(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const s=wt(e,["retrievalConfig"]);null!=s&&Et(t,["retrievalConfig"],s);return t}(E)),void 0!==wt(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const w=wt(t,["cachedContent"]);void 0!==n&&null!=w&&Et(n,["cachedContent"],Oo(e,w));const N=wt(t,["responseModalities"]);null!=N&&Et(s,["responseModalities"],N);const A=wt(t,["mediaResolution"]);null!=A&&Et(s,["mediaResolution"],A);const S=wt(t,["speechConfig"]);if(null!=S&&Et(s,["speechConfig"],Io(S)),void 0!==wt(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=wt(t,["thinkingConfig"]);null!=C&&Et(s,["thinkingConfig"],C);const I=wt(t,["imageConfig"]);null!=I&&Et(s,["imageConfig"],function(e){const t={},n=wt(e,["aspectRatio"]);null!=n&&Et(t,["aspectRatio"],n);const s=wt(e,["imageSize"]);null!=s&&Et(t,["imageSize"],s);if(void 0!==wt(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==wt(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(I));const j=wt(t,["enableEnhancedCivicAnswers"]);return null!=j&&Et(s,["enableEnhancedCivicAnswers"],j),s}function Gi(e,t,n){const s={},o=wt(t,["systemInstruction"]);void 0!==n&&null!=o&&Et(n,["systemInstruction"],wo(o));const i=wt(t,["temperature"]);null!=i&&Et(s,["temperature"],i);const r=wt(t,["topP"]);null!=r&&Et(s,["topP"],r);const a=wt(t,["topK"]);null!=a&&Et(s,["topK"],a);const l=wt(t,["candidateCount"]);null!=l&&Et(s,["candidateCount"],l);const c=wt(t,["maxOutputTokens"]);null!=c&&Et(s,["maxOutputTokens"],c);const d=wt(t,["stopSequences"]);null!=d&&Et(s,["stopSequences"],d);const u=wt(t,["responseLogprobs"]);null!=u&&Et(s,["responseLogprobs"],u);const p=wt(t,["logprobs"]);null!=p&&Et(s,["logprobs"],p);const h=wt(t,["presencePenalty"]);null!=h&&Et(s,["presencePenalty"],h);const m=wt(t,["frequencyPenalty"]);null!=m&&Et(s,["frequencyPenalty"],m);const f=wt(t,["seed"]);null!=f&&Et(s,["seed"],f);const g=wt(t,["responseMimeType"]);null!=g&&Et(s,["responseMimeType"],g);const x=wt(t,["responseSchema"]);null!=x&&Et(s,["responseSchema"],Co(x));const b=wt(t,["responseJsonSchema"]);null!=b&&Et(s,["responseJsonSchema"],b);const v=wt(t,["routingConfig"]);null!=v&&Et(s,["routingConfig"],v);const y=wt(t,["modelSelectionConfig"]);null!=y&&Et(s,["modelConfig"],y);const E=wt(t,["safetySettings"]);if(void 0!==n&&null!=E){let e=E;Array.isArray(e)&&(e=e.map(e=>e)),Et(n,["safetySettings"],e)}const w=wt(t,["tools"]);if(void 0!==n&&null!=w){let e=_o(w);Array.isArray(e)&&(e=e.map(e=>mr(To(e)))),Et(n,["tools"],e)}const N=wt(t,["toolConfig"]);void 0!==n&&null!=N&&Et(n,["toolConfig"],N);const A=wt(t,["labels"]);void 0!==n&&null!=A&&Et(n,["labels"],A);const S=wt(t,["cachedContent"]);void 0!==n&&null!=S&&Et(n,["cachedContent"],Oo(e,S));const C=wt(t,["responseModalities"]);null!=C&&Et(s,["responseModalities"],C);const I=wt(t,["mediaResolution"]);null!=I&&Et(s,["mediaResolution"],I);const j=wt(t,["speechConfig"]);null!=j&&Et(s,["speechConfig"],hr(Io(j)));const T=wt(t,["audioTimestamp"]);null!=T&&Et(s,["audioTimestamp"],T);const _=wt(t,["thinkingConfig"]);null!=_&&Et(s,["thinkingConfig"],_);const O=wt(t,["imageConfig"]);if(null!=O&&Et(s,["imageConfig"],function(e){const t={},n=wt(e,["aspectRatio"]);null!=n&&Et(t,["aspectRatio"],n);const s=wt(e,["imageSize"]);null!=s&&Et(t,["imageSize"],s);const o=wt(e,["outputMimeType"]);null!=o&&Et(t,["imageOutputOptions","mimeType"],o);const i=wt(e,["outputCompressionQuality"]);null!=i&&Et(t,["imageOutputOptions","compressionQuality"],i);return t}(O)),void 0!==wt(t,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function Fi(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["contents"]);if(null!=o){let e=Ao(o);Array.isArray(e)&&(e=e.map(e=>ki(e))),Et(n,["contents"],e)}const i=wt(t,["config"]);return null!=i&&Et(n,["generationConfig"],qi(e,i,n)),n}function Hi(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["contents"]);if(null!=o){let e=Ao(o);Array.isArray(e)&&(e=e.map(e=>e)),Et(n,["contents"],e)}const i=wt(t,["config"]);return null!=i&&Et(n,["generationConfig"],Gi(e,i,n)),n}function Vi(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["candidates"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>Oi(e))),Et(t,["candidates"],e)}const o=wt(e,["modelVersion"]);null!=o&&Et(t,["modelVersion"],o);const i=wt(e,["promptFeedback"]);null!=i&&Et(t,["promptFeedback"],i);const r=wt(e,["responseId"]);null!=r&&Et(t,["responseId"],r);const a=wt(e,["usageMetadata"]);return null!=a&&Et(t,["usageMetadata"],a),t}function zi(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["candidates"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["candidates"],e)}const o=wt(e,["createTime"]);null!=o&&Et(t,["createTime"],o);const i=wt(e,["modelVersion"]);null!=i&&Et(t,["modelVersion"],i);const r=wt(e,["promptFeedback"]);null!=r&&Et(t,["promptFeedback"],r);const a=wt(e,["responseId"]);null!=a&&Et(t,["responseId"],a);const l=wt(e,["usageMetadata"]);return null!=l&&Et(t,["usageMetadata"],l),t}function Bi(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["prompt"]);null!=o&&Et(n,["instances[0]","prompt"],o);const i=wt(t,["config"]);return null!=i&&function(e,t){if(void 0!==wt(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==wt(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=wt(e,["numberOfImages"]);void 0!==t&&null!=n&&Et(t,["parameters","sampleCount"],n);const s=wt(e,["aspectRatio"]);void 0!==t&&null!=s&&Et(t,["parameters","aspectRatio"],s);const o=wt(e,["guidanceScale"]);if(void 0!==t&&null!=o&&Et(t,["parameters","guidanceScale"],o),void 0!==wt(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=wt(e,["safetyFilterLevel"]);void 0!==t&&null!=i&&Et(t,["parameters","safetySetting"],i);const r=wt(e,["personGeneration"]);void 0!==t&&null!=r&&Et(t,["parameters","personGeneration"],r);const a=wt(e,["includeSafetyAttributes"]);void 0!==t&&null!=a&&Et(t,["parameters","includeSafetyAttributes"],a);const l=wt(e,["includeRaiReason"]);void 0!==t&&null!=l&&Et(t,["parameters","includeRaiReason"],l);const c=wt(e,["language"]);void 0!==t&&null!=c&&Et(t,["parameters","language"],c);const d=wt(e,["outputMimeType"]);void 0!==t&&null!=d&&Et(t,["parameters","outputOptions","mimeType"],d);const u=wt(e,["outputCompressionQuality"]);if(void 0!==t&&null!=u&&Et(t,["parameters","outputOptions","compressionQuality"],u),void 0!==wt(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==wt(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const p=wt(e,["imageSize"]);if(void 0!==t&&null!=p&&Et(t,["parameters","sampleImageSize"],p),void 0!==wt(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(i,n),n}function $i(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["prompt"]);null!=o&&Et(n,["instances[0]","prompt"],o);const i=wt(t,["config"]);return null!=i&&function(e,t){const n=wt(e,["outputGcsUri"]);void 0!==t&&null!=n&&Et(t,["parameters","storageUri"],n);const s=wt(e,["negativePrompt"]);void 0!==t&&null!=s&&Et(t,["parameters","negativePrompt"],s);const o=wt(e,["numberOfImages"]);void 0!==t&&null!=o&&Et(t,["parameters","sampleCount"],o);const i=wt(e,["aspectRatio"]);void 0!==t&&null!=i&&Et(t,["parameters","aspectRatio"],i);const r=wt(e,["guidanceScale"]);void 0!==t&&null!=r&&Et(t,["parameters","guidanceScale"],r);const a=wt(e,["seed"]);void 0!==t&&null!=a&&Et(t,["parameters","seed"],a);const l=wt(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&Et(t,["parameters","safetySetting"],l);const c=wt(e,["personGeneration"]);void 0!==t&&null!=c&&Et(t,["parameters","personGeneration"],c);const d=wt(e,["includeSafetyAttributes"]);void 0!==t&&null!=d&&Et(t,["parameters","includeSafetyAttributes"],d);const u=wt(e,["includeRaiReason"]);void 0!==t&&null!=u&&Et(t,["parameters","includeRaiReason"],u);const p=wt(e,["language"]);void 0!==t&&null!=p&&Et(t,["parameters","language"],p);const h=wt(e,["outputMimeType"]);void 0!==t&&null!=h&&Et(t,["parameters","outputOptions","mimeType"],h);const m=wt(e,["outputCompressionQuality"]);void 0!==t&&null!=m&&Et(t,["parameters","outputOptions","compressionQuality"],m);const f=wt(e,["addWatermark"]);void 0!==t&&null!=f&&Et(t,["parameters","addWatermark"],f);const g=wt(e,["labels"]);void 0!==t&&null!=g&&Et(t,["labels"],g);const x=wt(e,["imageSize"]);void 0!==t&&null!=x&&Et(t,["parameters","sampleImageSize"],x);const b=wt(e,["enhancePrompt"]);void 0!==t&&null!=b&&Et(t,["parameters","enhancePrompt"],b)}(i,n),n}function Ji(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["predictions"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["_self"]);null!=n&&Et(t,["image"],function(e){const t={},n=wt(e,["bytesBase64Encoded"]);null!=n&&Et(t,["imageBytes"],ko(n));const s=wt(e,["mimeType"]);null!=s&&Et(t,["mimeType"],s);return t}(n));const s=wt(e,["raiFilteredReason"]);null!=s&&Et(t,["raiFilteredReason"],s);const o=wt(e,["_self"]);null!=o&&Et(t,["safetyAttributes"],cr(o));return t}(e))),Et(t,["generatedImages"],e)}const o=wt(e,["positivePromptSafetyAttributes"]);return null!=o&&Et(t,["positivePromptSafetyAttributes"],cr(o)),t}function Wi(e,t){const n=wt(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&Et(t,["parameters","sampleCount"],n),void 0!==wt(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==wt(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const s=wt(e,["durationSeconds"]);if(void 0!==t&&null!=s&&Et(t,["parameters","durationSeconds"],s),void 0!==wt(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=wt(e,["aspectRatio"]);void 0!==t&&null!=o&&Et(t,["parameters","aspectRatio"],o);const i=wt(e,["resolution"]);void 0!==t&&null!=i&&Et(t,["parameters","resolution"],i);const r=wt(e,["personGeneration"]);if(void 0!==t&&null!=r&&Et(t,["parameters","personGeneration"],r),void 0!==wt(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=wt(e,["negativePrompt"]);void 0!==t&&null!=a&&Et(t,["parameters","negativePrompt"],a);const l=wt(e,["enhancePrompt"]);if(void 0!==t&&null!=l&&Et(t,["parameters","enhancePrompt"],l),void 0!==wt(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const c=wt(e,["lastFrame"]);void 0!==t&&null!=c&&Et(t,["instances[0]","lastFrame"],nr(c));const d=wt(e,["referenceImages"]);if(void 0!==t&&null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["image"]);null!=n&&Et(t,["image"],nr(n));const s=wt(e,["referenceType"]);null!=s&&Et(t,["referenceType"],s);return t}(e))),Et(t,["instances[0]","referenceImages"],e)}if(void 0!==wt(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==wt(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.");return{}}function Yi(e,t){const n=wt(e,["numberOfVideos"]);void 0!==t&&null!=n&&Et(t,["parameters","sampleCount"],n);const s=wt(e,["outputGcsUri"]);void 0!==t&&null!=s&&Et(t,["parameters","storageUri"],s);const o=wt(e,["fps"]);void 0!==t&&null!=o&&Et(t,["parameters","fps"],o);const i=wt(e,["durationSeconds"]);void 0!==t&&null!=i&&Et(t,["parameters","durationSeconds"],i);const r=wt(e,["seed"]);void 0!==t&&null!=r&&Et(t,["parameters","seed"],r);const a=wt(e,["aspectRatio"]);void 0!==t&&null!=a&&Et(t,["parameters","aspectRatio"],a);const l=wt(e,["resolution"]);void 0!==t&&null!=l&&Et(t,["parameters","resolution"],l);const c=wt(e,["personGeneration"]);void 0!==t&&null!=c&&Et(t,["parameters","personGeneration"],c);const d=wt(e,["pubsubTopic"]);void 0!==t&&null!=d&&Et(t,["parameters","pubsubTopic"],d);const u=wt(e,["negativePrompt"]);void 0!==t&&null!=u&&Et(t,["parameters","negativePrompt"],u);const p=wt(e,["enhancePrompt"]);void 0!==t&&null!=p&&Et(t,["parameters","enhancePrompt"],p);const h=wt(e,["generateAudio"]);void 0!==t&&null!=h&&Et(t,["parameters","generateAudio"],h);const m=wt(e,["lastFrame"]);void 0!==t&&null!=m&&Et(t,["instances[0]","lastFrame"],sr(m));const f=wt(e,["referenceImages"]);if(void 0!==t&&null!=f){let e=f;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["image"]);null!=n&&Et(t,["image"],sr(n));const s=wt(e,["referenceType"]);null!=s&&Et(t,["referenceType"],s);return t}(e))),Et(t,["instances[0]","referenceImages"],e)}const g=wt(e,["mask"]);void 0!==t&&null!=g&&Et(t,["instances[0]","mask"],function(e){const t={},n=wt(e,["image"]);null!=n&&Et(t,["_self"],sr(n));const s=wt(e,["maskMode"]);null!=s&&Et(t,["maskMode"],s);return t}(g));const x=wt(e,["compressionQuality"]);return void 0!==t&&null!=x&&Et(t,["parameters","compressionQuality"],x),{}}function Ki(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["metadata"]);null!=s&&Et(t,["metadata"],s);const o=wt(e,["done"]);null!=o&&Et(t,["done"],o);const i=wt(e,["error"]);null!=i&&Et(t,["error"],i);const r=wt(e,["response","generateVideoResponse"]);return null!=r&&Et(t,["response"],function(e){const t={},n=wt(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["video"]);null!=n&&Et(t,["video"],function(e){const t={},n=wt(e,["uri"]);null!=n&&Et(t,["uri"],n);const s=wt(e,["encodedVideo"]);null!=s&&Et(t,["videoBytes"],ko(s));const o=wt(e,["encoding"]);null!=o&&Et(t,["mimeType"],o);return t}(n));return t}(e))),Et(t,["generatedVideos"],e)}const s=wt(e,["raiMediaFilteredCount"]);null!=s&&Et(t,["raiMediaFilteredCount"],s);const o=wt(e,["raiMediaFilteredReasons"]);null!=o&&Et(t,["raiMediaFilteredReasons"],o);return t}(r)),t}function Xi(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["metadata"]);null!=s&&Et(t,["metadata"],s);const o=wt(e,["done"]);null!=o&&Et(t,["done"],o);const i=wt(e,["error"]);null!=i&&Et(t,["error"],i);const r=wt(e,["response"]);return null!=r&&Et(t,["response"],function(e){const t={},n=wt(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["_self"]);null!=n&&Et(t,["video"],function(e){const t={},n=wt(e,["gcsUri"]);null!=n&&Et(t,["uri"],n);const s=wt(e,["bytesBase64Encoded"]);null!=s&&Et(t,["videoBytes"],ko(s));const o=wt(e,["mimeType"]);null!=o&&Et(t,["mimeType"],o);return t}(n));return t}(e))),Et(t,["generatedVideos"],e)}const s=wt(e,["raiMediaFilteredCount"]);null!=s&&Et(t,["raiMediaFilteredCount"],s);const o=wt(e,["raiMediaFilteredReasons"]);null!=o&&Et(t,["raiMediaFilteredReasons"],o);return t}(r)),t}function Qi(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["prompt"]);null!=o&&Et(n,["instances[0]","prompt"],o);const i=wt(t,["image"]);null!=i&&Et(n,["instances[0]","image"],nr(i));const r=wt(t,["video"]);null!=r&&Et(n,["instances[0]","video"],br(r));const a=wt(t,["source"]);null!=a&&function(e,t){const n={},s=wt(e,["prompt"]);void 0!==t&&null!=s&&Et(t,["instances[0]","prompt"],s);const o=wt(e,["image"]);void 0!==t&&null!=o&&Et(t,["instances[0]","image"],nr(o));const i=wt(e,["video"]);void 0!==t&&null!=i&&Et(t,["instances[0]","video"],br(i))}(a,n);const l=wt(t,["config"]);return null!=l&&Wi(l,n),n}function Zi(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["prompt"]);null!=o&&Et(n,["instances[0]","prompt"],o);const i=wt(t,["image"]);null!=i&&Et(n,["instances[0]","image"],sr(i));const r=wt(t,["video"]);null!=r&&Et(n,["instances[0]","video"],vr(r));const a=wt(t,["source"]);null!=a&&function(e,t){const n={},s=wt(e,["prompt"]);void 0!==t&&null!=s&&Et(t,["instances[0]","prompt"],s);const o=wt(e,["image"]);void 0!==t&&null!=o&&Et(t,["instances[0]","image"],sr(o));const i=wt(e,["video"]);void 0!==t&&null!=i&&Et(t,["instances[0]","video"],vr(i))}(a,n);const l=wt(t,["config"]);return null!=l&&Yi(l,n),n}function er(e){const t={},n=wt(e,["_self"]);null!=n&&Et(t,["image"],tr(n));const s=wt(e,["raiFilteredReason"]);null!=s&&Et(t,["raiFilteredReason"],s);const o=wt(e,["_self"]);null!=o&&Et(t,["safetyAttributes"],dr(o));const i=wt(e,["prompt"]);return null!=i&&Et(t,["enhancedPrompt"],i),t}function tr(e){const t={},n=wt(e,["gcsUri"]);null!=n&&Et(t,["gcsUri"],n);const s=wt(e,["bytesBase64Encoded"]);null!=s&&Et(t,["imageBytes"],ko(s));const o=wt(e,["mimeType"]);return null!=o&&Et(t,["mimeType"],o),t}function nr(e){const t={};if(void 0!==wt(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=wt(e,["imageBytes"]);null!=n&&Et(t,["bytesBase64Encoded"],ko(n));const s=wt(e,["mimeType"]);return null!=s&&Et(t,["mimeType"],s),t}function sr(e){const t={},n=wt(e,["gcsUri"]);null!=n&&Et(t,["gcsUri"],n);const s=wt(e,["imageBytes"]);null!=s&&Et(t,["bytesBase64Encoded"],ko(s));const o=wt(e,["mimeType"]);return null!=o&&Et(t,["mimeType"],o),t}function or(e,t){const n={},s=wt(t,["config"]);return null!=s&&function(e,t,n){const s=wt(t,["pageSize"]);void 0!==n&&null!=s&&Et(n,["_query","pageSize"],s);const o=wt(t,["pageToken"]);void 0!==n&&null!=o&&Et(n,["_query","pageToken"],o);const i=wt(t,["filter"]);void 0!==n&&null!=i&&Et(n,["_query","filter"],i);const r=wt(t,["queryBase"]);void 0!==n&&null!=r&&Et(n,["_url","models_url"],Do(e,r))}(e,s,n),n}function ir(e,t){const n={},s=wt(t,["config"]);return null!=s&&function(e,t,n){const s=wt(t,["pageSize"]);void 0!==n&&null!=s&&Et(n,["_query","pageSize"],s);const o=wt(t,["pageToken"]);void 0!==n&&null!=o&&Et(n,["_query","pageToken"],o);const i=wt(t,["filter"]);void 0!==n&&null!=i&&Et(n,["_query","filter"],i);const r=wt(t,["queryBase"]);void 0!==n&&null!=r&&Et(n,["_url","models_url"],Do(e,r))}(e,s,n),n}function rr(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["displayName"]);null!=s&&Et(t,["displayName"],s);const o=wt(e,["description"]);null!=o&&Et(t,["description"],o);const i=wt(e,["version"]);null!=i&&Et(t,["version"],i);const r=wt(e,["_self"]);null!=r&&Et(t,["tunedModelInfo"],function(e){const t={},n=wt(e,["baseModel"]);null!=n&&Et(t,["baseModel"],n);const s=wt(e,["createTime"]);null!=s&&Et(t,["createTime"],s);const o=wt(e,["updateTime"]);null!=o&&Et(t,["updateTime"],o);return t}(r));const a=wt(e,["inputTokenLimit"]);null!=a&&Et(t,["inputTokenLimit"],a);const l=wt(e,["outputTokenLimit"]);null!=l&&Et(t,["outputTokenLimit"],l);const c=wt(e,["supportedGenerationMethods"]);null!=c&&Et(t,["supportedActions"],c);const d=wt(e,["temperature"]);null!=d&&Et(t,["temperature"],d);const u=wt(e,["maxTemperature"]);null!=u&&Et(t,["maxTemperature"],u);const p=wt(e,["topP"]);null!=p&&Et(t,["topP"],p);const h=wt(e,["topK"]);null!=h&&Et(t,["topK"],h);const m=wt(e,["thinking"]);return null!=m&&Et(t,["thinking"],m),t}function ar(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["displayName"]);null!=s&&Et(t,["displayName"],s);const o=wt(e,["description"]);null!=o&&Et(t,["description"],o);const i=wt(e,["versionId"]);null!=i&&Et(t,["version"],i);const r=wt(e,["deployedModels"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["endpoint"]);null!=n&&Et(t,["name"],n);const s=wt(e,["deployedModelId"]);return null!=s&&Et(t,["deployedModelId"],s),t}(e))),Et(t,["endpoints"],e)}const a=wt(e,["labels"]);null!=a&&Et(t,["labels"],a);const l=wt(e,["_self"]);null!=l&&Et(t,["tunedModelInfo"],function(e){const t={},n=wt(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&Et(t,["baseModel"],n);const s=wt(e,["createTime"]);null!=s&&Et(t,["createTime"],s);const o=wt(e,["updateTime"]);null!=o&&Et(t,["updateTime"],o);return t}(l));const c=wt(e,["defaultCheckpointId"]);null!=c&&Et(t,["defaultCheckpointId"],c);const d=wt(e,["checkpoints"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["checkpoints"],e)}return t}function lr(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["source"]);null!=o&&function(e,t){const n={},s=wt(e,["prompt"]);void 0!==t&&null!=s&&Et(t,["instances[0]","prompt"],s);const o=wt(e,["personImage"]);void 0!==t&&null!=o&&Et(t,["instances[0]","personImage","image"],sr(o));const i=wt(e,["productImages"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["productImage"]);return null!=n&&Et(t,["image"],sr(n)),t}(e))),Et(t,["instances[0]","productImages"],e)}}(o,n);const i=wt(t,["config"]);return null!=i&&function(e,t){const n=wt(e,["numberOfImages"]);void 0!==t&&null!=n&&Et(t,["parameters","sampleCount"],n);const s=wt(e,["baseSteps"]);void 0!==t&&null!=s&&Et(t,["parameters","baseSteps"],s);const o=wt(e,["outputGcsUri"]);void 0!==t&&null!=o&&Et(t,["parameters","storageUri"],o);const i=wt(e,["seed"]);void 0!==t&&null!=i&&Et(t,["parameters","seed"],i);const r=wt(e,["safetyFilterLevel"]);void 0!==t&&null!=r&&Et(t,["parameters","safetySetting"],r);const a=wt(e,["personGeneration"]);void 0!==t&&null!=a&&Et(t,["parameters","personGeneration"],a);const l=wt(e,["addWatermark"]);void 0!==t&&null!=l&&Et(t,["parameters","addWatermark"],l);const c=wt(e,["outputMimeType"]);void 0!==t&&null!=c&&Et(t,["parameters","outputOptions","mimeType"],c);const d=wt(e,["outputCompressionQuality"]);void 0!==t&&null!=d&&Et(t,["parameters","outputOptions","compressionQuality"],d);const u=wt(e,["enhancePrompt"]);void 0!==t&&null!=u&&Et(t,["parameters","enhancePrompt"],u);const p=wt(e,["labels"]);void 0!==t&&null!=p&&Et(t,["labels"],p)}(i,n),n}function cr(e){const t={},n=wt(e,["safetyAttributes","categories"]);null!=n&&Et(t,["categories"],n);const s=wt(e,["safetyAttributes","scores"]);null!=s&&Et(t,["scores"],s);const o=wt(e,["contentType"]);return null!=o&&Et(t,["contentType"],o),t}function dr(e){const t={},n=wt(e,["safetyAttributes","categories"]);null!=n&&Et(t,["categories"],n);const s=wt(e,["safetyAttributes","scores"]);null!=s&&Et(t,["scores"],s);const o=wt(e,["contentType"]);return null!=o&&Et(t,["contentType"],o),t}function ur(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["source"]);null!=o&&function(e,t){const n={},s=wt(e,["prompt"]);void 0!==t&&null!=s&&Et(t,["instances[0]","prompt"],s);const o=wt(e,["image"]);void 0!==t&&null!=o&&Et(t,["instances[0]","image"],sr(o));const i=wt(e,["scribbleImage"]);void 0!==t&&null!=i&&Et(t,["instances[0]","scribble"],function(e){const t={},n=wt(e,["image"]);return null!=n&&Et(t,["image"],sr(n)),t}(i))}(o,n);const i=wt(t,["config"]);return null!=i&&function(e,t){const n=wt(e,["mode"]);void 0!==t&&null!=n&&Et(t,["parameters","mode"],n);const s=wt(e,["maxPredictions"]);void 0!==t&&null!=s&&Et(t,["parameters","maxPredictions"],s);const o=wt(e,["confidenceThreshold"]);void 0!==t&&null!=o&&Et(t,["parameters","confidenceThreshold"],o);const i=wt(e,["maskDilation"]);void 0!==t&&null!=i&&Et(t,["parameters","maskDilation"],i);const r=wt(e,["binaryColorThreshold"]);void 0!==t&&null!=r&&Et(t,["parameters","binaryColorThreshold"],r);const a=wt(e,["labels"]);void 0!==t&&null!=a&&Et(t,["labels"],a)}(i,n),n}function pr(e){const t={},n=wt(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["_self"]);null!=n&&Et(t,["mask"],tr(n));const s=wt(e,["labels"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["labels"],e)}return t}(e))),Et(t,["generatedMasks"],e)}return t}function hr(e){const t={},n=wt(e,["voiceConfig"]);null!=n&&Et(t,["voiceConfig"],n);const s=wt(e,["languageCode"]);if(null!=s&&Et(t,["languageCode"],s),void 0!==wt(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function mr(e){const t={},n=wt(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==wt(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=wt(e,["description"]);null!=n&&Et(t,["description"],n);const s=wt(e,["name"]);null!=s&&Et(t,["name"],s);const o=wt(e,["parameters"]);null!=o&&Et(t,["parameters"],o);const i=wt(e,["parametersJsonSchema"]);null!=i&&Et(t,["parametersJsonSchema"],i);const r=wt(e,["response"]);null!=r&&Et(t,["response"],r);const a=wt(e,["responseJsonSchema"]);return null!=a&&Et(t,["responseJsonSchema"],a),t}(e))),Et(t,["functionDeclarations"],e)}const s=wt(e,["retrieval"]);null!=s&&Et(t,["retrieval"],s);const o=wt(e,["googleSearchRetrieval"]);null!=o&&Et(t,["googleSearchRetrieval"],o);const i=wt(e,["computerUse"]);if(null!=i&&Et(t,["computerUse"],i),void 0!==wt(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=wt(e,["codeExecution"]);null!=r&&Et(t,["codeExecution"],r);const a=wt(e,["enterpriseWebSearch"]);null!=a&&Et(t,["enterpriseWebSearch"],a);const l=wt(e,["googleMaps"]);null!=l&&Et(t,["googleMaps"],l);const c=wt(e,["googleSearch"]);null!=c&&Et(t,["googleSearch"],c);const d=wt(e,["urlContext"]);return null!=d&&Et(t,["urlContext"],d),t}function fr(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","name"],uo(e,s));const o=wt(t,["config"]);return null!=o&&function(e,t){const n=wt(e,["displayName"]);void 0!==t&&null!=n&&Et(t,["displayName"],n);const s=wt(e,["description"]);void 0!==t&&null!=s&&Et(t,["description"],s);const o=wt(e,["defaultCheckpointId"]);void 0!==t&&null!=o&&Et(t,["defaultCheckpointId"],o)}(o,n),n}function gr(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["config"]);return null!=o&&function(e,t){const n=wt(e,["displayName"]);void 0!==t&&null!=n&&Et(t,["displayName"],n);const s=wt(e,["description"]);void 0!==t&&null!=s&&Et(t,["description"],s);const o=wt(e,["defaultCheckpointId"]);void 0!==t&&null!=o&&Et(t,["defaultCheckpointId"],o)}(o,n),n}function xr(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["image"]);null!=o&&Et(n,["instances[0]","image"],sr(o));const i=wt(t,["upscaleFactor"]);null!=i&&Et(n,["parameters","upscaleConfig","upscaleFactor"],i);const r=wt(t,["config"]);return null!=r&&function(e,t){const n=wt(e,["outputGcsUri"]);void 0!==t&&null!=n&&Et(t,["parameters","storageUri"],n);const s=wt(e,["safetyFilterLevel"]);void 0!==t&&null!=s&&Et(t,["parameters","safetySetting"],s);const o=wt(e,["personGeneration"]);void 0!==t&&null!=o&&Et(t,["parameters","personGeneration"],o);const i=wt(e,["includeRaiReason"]);void 0!==t&&null!=i&&Et(t,["parameters","includeRaiReason"],i);const r=wt(e,["outputMimeType"]);void 0!==t&&null!=r&&Et(t,["parameters","outputOptions","mimeType"],r);const a=wt(e,["outputCompressionQuality"]);void 0!==t&&null!=a&&Et(t,["parameters","outputOptions","compressionQuality"],a);const l=wt(e,["enhanceInputImage"]);void 0!==t&&null!=l&&Et(t,["parameters","upscaleConfig","enhanceInputImage"],l);const c=wt(e,["imagePreservationFactor"]);void 0!==t&&null!=c&&Et(t,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=wt(e,["labels"]);void 0!==t&&null!=d&&Et(t,["labels"],d);const u=wt(e,["numberOfImages"]);void 0!==t&&null!=u&&Et(t,["parameters","sampleCount"],u);const p=wt(e,["mode"]);void 0!==t&&null!=p&&Et(t,["parameters","mode"],p)}(r,n),n}function br(e){const t={},n=wt(e,["uri"]);null!=n&&Et(t,["uri"],n);const s=wt(e,["videoBytes"]);null!=s&&Et(t,["encodedVideo"],ko(s));const o=wt(e,["mimeType"]);return null!=o&&Et(t,["encoding"],o),t}function vr(e){const t={},n=wt(e,["uri"]);null!=n&&Et(t,["gcsUri"],n);const s=wt(e,["videoBytes"]);null!=s&&Et(t,["bytesBase64Encoded"],ko(s));const o=wt(e,["mimeType"]);return null!=o&&Et(t,["mimeType"],o),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yr(e){const t={},n=wt(e,["config"]);return null!=n&&function(e,t){const n=wt(e,["displayName"]);void 0!==t&&null!=n&&Et(t,["displayName"],n)}(n,t),t}function Er(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["_url","name"],n);const s=wt(e,["config"]);return null!=s&&function(e,t){const n=wt(e,["force"]);void 0!==t&&null!=n&&Et(t,["_query","force"],n)}(s,t),t}function wr(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["name"],n);const s=wt(e,["metadata"]);null!=s&&Et(t,["metadata"],s);const o=wt(e,["done"]);null!=o&&Et(t,["done"],o);const i=wt(e,["error"]);null!=i&&Et(t,["error"],i);const r=wt(e,["response"]);return null!=r&&Et(t,["response"],function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["parent"]);null!=s&&Et(t,["parent"],s);const o=wt(e,["documentName"]);null!=o&&Et(t,["documentName"],o);return t}(r)),t}function Nr(e){const t={},n=wt(e,["fileSearchStoreName"]);null!=n&&Et(t,["_url","file_search_store_name"],n);const s=wt(e,["fileName"]);null!=s&&Et(t,["fileName"],s);const o=wt(e,["config"]);return null!=o&&function(e,t){const n=wt(e,["customMetadata"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["customMetadata"],e)}const s=wt(e,["chunkingConfig"]);void 0!==t&&null!=s&&Et(t,["chunkingConfig"],s)}(o,t),t}function Ar(e){const t={},n=wt(e,["config"]);return null!=n&&function(e,t){const n=wt(e,["pageSize"]);void 0!==t&&null!=n&&Et(t,["_query","pageSize"],n);const s=wt(e,["pageToken"]);void 0!==t&&null!=s&&Et(t,["_query","pageToken"],s)}(n,t),t}function Sr(e,t){const n=wt(e,["mimeType"]);void 0!==t&&null!=n&&Et(t,["mimeType"],n);const s=wt(e,["displayName"]);void 0!==t&&null!=s&&Et(t,["displayName"],s);const o=wt(e,["customMetadata"]);if(void 0!==t&&null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["customMetadata"],e)}const i=wt(e,["chunkingConfig"]);return void 0!==t&&null!=i&&Et(t,["chunkingConfig"],i),{}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Cr="x-goog-api-client";class Ir{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const s=[this.getRequestUrlInternal(t)];n&&s.push(this.getBaseResourcePath()),""!==e&&s.push(e);return new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!e.path.startsWith("projects/")&&("GET"!==e.httpMethod||!e.path.startsWith("publishers/google/models"))))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[i,r]of Object.entries(e.queryParams))s.searchParams.append(i,String(r));let o={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,s.toString(),e.abortSignal),this.unaryApiCall(s,o,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[s,o]of Object.entries(t))"object"==typeof o?n[s]=Object.assign(Object.assign({},n[s]),o):void 0!==o&&(n[s]=o);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,n);s.searchParams.has("alt")&&"sse"===s.searchParams.get("alt")||s.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,s.toString(),e.abortSignal),this.streamApiCall(s,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,s){if(t&&t.timeout||s){const n=new AbortController,o=n.signal;if(t.timeout&&(null==t?void 0:t.timeout)>0){const e=setTimeout(()=>n.abort(),t.timeout);e&&"function"==typeof e.unref&&e.unref()}s&&s.addEventListener("abort",()=>{n.abort()}),e.signal=o}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return;let n={};if("string"==typeof e.body&&e.body.length>0)try{const t=JSON.parse(e.body);if("object"!=typeof t||null===t||Array.isArray(t))return;n=t}catch(i){return}function s(e,t){const n=Object.assign({},e);for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const e=t[o],i=n[o];e&&"object"==typeof e&&!Array.isArray(e)&&i&&"object"==typeof i&&!Array.isArray(i)?n[o]=s(i,e):n[o]=e}return n}const o=s(n,t);e.body=JSON.stringify(o)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await jr(e),new Ms(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await jr(e),this.processStreamResponse(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}processStreamResponse(e){return hi(this,arguments,function*(){var t;const n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.getReader(),s=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";const i="data:",r=["\n\n","\r\r","\r\n\r\n"];for(;;){const{done:a,value:l}=yield pi(n.read());if(a){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=s.decode(l,{stream:!0});try{const e=JSON.parse(c);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,s=t.code,o=`got status: ${n}. ${JSON.stringify(e)}`;if(s>=400&&s<600){throw new yi({message:o,status:s})}}}catch(o){if("ApiError"===o.name)throw o}t+=c;let d=-1,u=0;for(;;){d=-1,u=0;for(const e of r){const n=t.indexOf(e);-1!==n&&(-1===d||n<d)&&(d=n,u=e.length)}if(-1===d)break;const n=t.substring(0,d);t=t.substring(d+u);const s=n.trim();if(s.startsWith(i)){const t=s.substring(i.length).trim();try{const n=new Response(t,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield pi(new Ms(n))}catch(o){throw new Error(`exception parsing stream chunk ${t}. ${o}`)}}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw new Error(`exception ${e} sending request`)})}getDefaultHeaders(){const e={},t="google-genai-sdk/1.33.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[Cr]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[t,s]of Object.entries(e.headers))n.append(t,s);e.timeout&&e.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return"string"==typeof e&&(n=e.replace(/[/\\]+$/,""),n=null!==(t=n.split(/[/\\]/).pop())&&void 0!==t?t:""),n}async uploadFile(e,t){var n;const s={};null!=t&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,i=await o.stat(e);s.sizeBytes=String(i.size);const r=null!==(n=null==t?void 0:t.mimeType)&&void 0!==n?n:i.type;if(void 0===r||""===r)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=r;const a={file:s},l=this.getFileName(e),c=yt("upload/v1beta/files",a._url),d=await this.fetchUploadUrl(c,s.sizeBytes,s.mimeType,l,a,null==t?void 0:t.httpOptions);return o.upload(e,d,this)}async uploadFileToFileSearchStore(e,t,n){var s;const o=this.clientOptions.uploader,i=await o.stat(t),r=String(i.size),a=null!==(s=null==n?void 0:n.mimeType)&&void 0!==s?s:i.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const l=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(t),d={};null!=n&&Sr(n,d);const u=await this.fetchUploadUrl(l,r,a,c,d,null==n?void 0:n.httpOptions);return o.uploadToFileSearchStore(t,u,this)}async downloadFile(e){const t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,n,s,o,i){var r;let a={};a=i||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${n}`},s?{"X-Goog-Upload-File-Name":s}:{})};const l=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:a});if(!l||!(null==l?void 0:l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=null===(r=null==l?void 0:l.headers)||void 0===r?void 0:r["x-goog-upload-url"];if(void 0===c)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function jr(e){var t;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const n=e.status;let s;s=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(s);if(n>=400&&n<600){throw new yi({message:o,status:n})}throw new Error(o)}}function Tr(e){for(const t of e){if(Or(t))return!0;if("object"==typeof t&&"inputSchema"in t)return!0}return false}function _r(e){var t;const n=null!==(t=e[Cr])&&void 0!==t?t:"";e[Cr]=(n+" mcp_used/unknown").trimStart()}function Or(e){return null!==e&&"object"==typeof e&&e instanceof kr}function Rr(e){return hi(this,arguments,function*(e,t=100){let n,s=0;for(;s<t;){const t=yield pi(e.listTools({cursor:n}));for(const e of t.tools)yield yield pi(e),s++;if(!t.nextCursor)break;n=t.nextCursor}})}class kr{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new kr(e,t)}async initialize(){var e,t,n,s;if(this.mcpTools.length>0)return;const o={},i=[];for(const d of this.mcpClients)try{for(var r,a=!0,l=(t=void 0,mi(Rr(d)));!(e=(r=await l.next()).done);a=!0){s=r.value,a=!1;const e=s;i.push(e);const t=e.name;if(o[t])throw new Error(`Duplicate function name ${t} found in MCP tools. Please ensure function names are unique.`);o[t]=d}}catch(c){t={error:c}}finally{try{a||e||!(n=l.return)||await n.call(l)}finally{if(t)throw t.error}}this.mcpTools=i,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),function(e,t={}){const n=[],s=new Set;for(const o of e){const e=o.name;if(s.has(e))throw new Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);s.add(e);const i=Lo(o,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[n.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await e.callTool({name:n.name,arguments:n.args},void 0,s);t.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return t}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pr{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),i=function(e){const t=new Headers;for(const[n,s]of Object.entries(e))t.append(n,s);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(this.apiClient.getDefaultHeaders()),r=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${this.apiClient.getApiKey()}`;let a=()=>{};const l=new Promise(e=>{a=e}),c=e.callbacks,d=(this.apiClient,{onopen:function(){a({})},onmessage:e=>{!async function(e,t,n){const s=new lo;let o;o=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),Object.assign(s,o),t(s)}(0,c.onmessage,e)},onerror:null!==(t=null==c?void 0:c.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==c?void 0:c.onclose)&&void 0!==n?n:function(e){}}),u=this.webSocketFactory.create(r,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(i),d);u.connect(),await l;const p={setup:{model:uo(this.apiClient,e.model)}};return u.send(JSON.stringify(p)),new Dr(u,this.apiClient)}}class Dr{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=function(e){const t={},n=wt(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["weightedPrompts"],e)}return t}(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=function(e){const t={},n=wt(e,["musicGenerationConfig"]);return null!=n&&Et(t,["musicGenerationConfig"],n),t}(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Rs.PLAY)}pause(){this.sendPlaybackControl(Rs.PAUSE)}stop(){this.sendPlaybackControl(Rs.STOP)}resetContext(){this.sendPlaybackControl(Rs.RESET_CONTEXT)}close(){this.conn.close()}}class Mr{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new Pr(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,s,o,i,r;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const d=this.apiClient.getHeaders();e.config&&e.config.tools&&Tr(e.config.tools)&&_r(d);const u=function(e){const t=new Headers;for(const[n,s]of Object.entries(e))t.append(n,s);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(d);if(this.apiClient.isVertexAI())c=`${a}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u,c);else{const e=this.apiClient.getApiKey();let t="BidiGenerateContent",n="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(t="BidiGenerateContentConstrained",n="access_token"),c=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.${t}?${n}=${e}`}let p=()=>{};const h=new Promise(e=>{p=e}),m=e.callbacks,f=this.apiClient,g={onopen:function(){var e;null===(e=null==m?void 0:m.onopen)||void 0===e||e.call(m),p({})},onmessage:e=>{!async function(e,t,n){const s=new ao;let o;o=n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const i=JSON.parse(o);if(e.isVertexAI()){const e=Ti(i);Object.assign(s,e)}else{const e=i;Object.assign(s,e)}t(s)}(f,m.onmessage,e)},onerror:null!==(t=null==m?void 0:m.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==m?void 0:m.onclose)&&void 0!==n?n:function(e){}},x=this.webSocketFactory.create(c,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(u),g);x.connect(),await h;let b=uo(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&b.startsWith("publishers/")){b=`projects/${this.apiClient.getProject()}/locations/${this.apiClient.getLocation()}/`+b}let v={};this.apiClient.isVertexAI()&&void 0===(null===(s=e.config)||void 0===s?void 0:s.responseModalities)&&(void 0===e.config?e.config={responseModalities:[mn.AUDIO]}:e.config.responseModalities=[mn.AUDIO]),null===(o=e.config)||void 0===o||o.generationConfig;const y=null!==(r=null===(i=e.config)||void 0===i?void 0:i.tools)&&void 0!==r?r:[],E=[];for(const N of y)if(this.isCallableTool(N)){const e=N;E.push(await e.tool())}else E.push(N);E.length>0&&(e.config.tools=E);const w={model:b,config:e.config,callbacks:e.callbacks};return v=this.apiClient.isVertexAI()?function(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["setup","model"],uo(e,s));const o=wt(t,["config"]);return null!=o&&Et(n,["config"],Ci(o,n)),n}(this.apiClient,w):function(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["setup","model"],uo(e,s));const o=wt(t,["config"]);return null!=o&&Et(n,["config"],Si(o,n)),n}(this.apiClient,w),delete v.config,x.send(JSON.stringify(v)),new Lr(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}const Ur={turnComplete:!0};class Lr{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let s=[];try{s=Ao(t.turns),e.isVertexAI()||(s=s.map(e=>ki(e)))}catch(n){throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const s of n){if("object"!=typeof s||null===s||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Ur),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:ji(e)}:{realtimeInput:Ii(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function qr(e){var t,n,s;if(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.disable)return!0;let o=!1;for(const r of null!==(n=null==e?void 0:e.tools)&&void 0!==n?n:[])if(Gr(r)){o=!0;break}if(!o)return!0;const i=null===(s=null==e?void 0:e.automaticFunctionCalling)||void 0===s?void 0:s.maximumRemoteCalls;return!!(i&&(i<0||!Number.isInteger(i))||0==i)}function Gr(e){return"callTool"in e&&"function"==typeof e.callTool}function Fr(e){var t;const n=[];return(null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.tools)?(e.config.tools.forEach((e,t)=>{if(Gr(e))return;const s=e;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(t)}),n):n}function Hr(e){var t;return!(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.ignoreCallHistory)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vr extends vt{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,s,o,i;const r=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!function(e){var t,n,s;return null!==(s=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some(e=>Gr(e)))&&void 0!==s&&s}(e)||qr(e.config))return await this.generateContentInternal(r);const a=Fr(e);if(a.length>0){const e=a.map(e=>`tools[${e}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${e}.`)}let l,c;const d=Ao(r.contents),u=null!==(s=null===(n=null===(t=r.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==s?s:10;let p=0;for(;p<u&&(l=await this.generateContentInternal(r),l.functionCalls&&0!==l.functionCalls.length);){const t=l.candidates[0].content,n=[];for(const s of null!==(i=null===(o=e.config)||void 0===o?void 0:o.tools)&&void 0!==i?i:[])if(Gr(s)){const e=s,t=await e.callTool(l.functionCalls);n.push(...t)}p++,c={role:"user",parts:n},r.contents=Ao(r.contents),r.contents.push(t),r.contents.push(c),Hr(r.config)&&(d.push(t),d.push(c))}return Hr(r.config)&&(l.automaticFunctionCallingHistory=d),l},this.generateContentStream=async e=>{var t,n,s,o,i;if(this.maybeMoveToResponseJsonSchem(e),qr(e.config)){const t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}const r=Fr(e);if(r.length>0){const e=r.map(e=>`tools[${e}]`).join(", ");throw new Error(`Incompatible tools found at ${e}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const a=null===(s=null===(n=null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.toolConfig)||void 0===n?void 0:n.functionCallingConfig)||void 0===s?void 0:s.streamFunctionCallArguments,l=null===(i=null===(o=null==e?void 0:e.config)||void 0===o?void 0:o.automaticFunctionCalling)||void 0===i?void 0:i.disable;if(a&&!l)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n;const s=[];if(null==e?void 0:e.generatedImages)for(const i of e.generatedImages)i&&(null==i?void 0:i.safetyAttributes)&&"Positive Prompt"===(null===(t=null==i?void 0:i.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null==i?void 0:i.safetyAttributes:s.push(i);let o;return o=n?{generatedImages:s,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:s,sdkHttpResponse:e.sdkHttpResponse},o}),this.list=async e=>{var t;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(t=n.config)||void 0===t?void 0:t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new ei(Ps.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(n),n)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{var t,n,s,o,i,r;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(t=e.video)||void 0===t?void 0:t.uri)&&(null===(n=e.video)||void 0===n?void 0:n.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null===(o=null===(s=e.source)||void 0===s?void 0:s.video)||void 0===o?void 0:o.uri)&&(null===(r=null===(i=e.source)||void 0===i?void 0:i.video)||void 0===r?void 0:r.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,s;const o=null===(t=e.config)||void 0===t?void 0:t.tools;if(!o)return e;const i=await Promise.all(o.map(async e=>{if(Gr(e)){const t=e;return await t.tool()}return e})),r={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(r.config.tools=i,e.config&&e.config.tools&&Tr(e.config.tools)){const t=null!==(s=null===(n=e.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==s?s:{};let o=Object.assign({},t);0===Object.keys(o).length&&(o=this.apiClient.getDefaultHeaders()),_r(o),r.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:o})}return r}async initAfcToolsMap(e){var t,n,s;const o=new Map;for(const i of null!==(n=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==n?n:[])if(Gr(i)){const e=i,t=await e.tool();for(const n of null!==(s=t.functionDeclarations)&&void 0!==s?s:[]){if(!n.name)throw new Error("Function declaration name is required.");if(o.has(n.name))throw new Error(`Duplicate tool declaration name: ${n.name}`);o.set(n.name,e)}}return o}async processAfcStream(e){var t,n,s;const o=null!==(s=null===(n=null===(t=e.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==s?s:10;let i=!1,r=0;return function(e,t,n){return hi(this,arguments,function*(){for(var s,a,l,c,d,u;r<o;){i&&(r++,i=!1);const g=yield pi(e.processParamsMaybeAddMcpUsage(n)),x=yield pi(e.generateContentStreamInternal(g)),b=[],v=[];try{for(var p,h=!0,m=(a=void 0,mi(x));!(s=(p=yield pi(m.next())).done);h=!0){c=p.value,h=!1;const e=c;if(yield yield pi(e),e.candidates&&(null===(d=e.candidates[0])||void 0===d?void 0:d.content)){v.push(e.candidates[0].content);for(const n of null!==(u=e.candidates[0].content.parts)&&void 0!==u?u:[])if(r<o&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!t.has(n.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${t.keys()}, mising tool: ${n.functionCall.name}`);{const e=yield pi(t.get(n.functionCall.name).callTool([n.functionCall]));b.push(...e)}}}}}catch(f){a={error:f}}finally{try{h||s||!(l=m.return)||(yield pi(l.call(m)))}finally{if(a)throw a.error}}if(!(b.length>0))break;{i=!0;const e=new Us;e.candidates=[{content:{role:"user",parts:b}}],yield yield pi(e);const t=[];t.push(...v),t.push({role:"user",parts:b});const s=Ao(n.contents).concat(t);n.contents=s}}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=Hi(this.apiClient,e);return r=yt("{model}:generateContent",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=zi(e),n=new Us;return Object.assign(n,t),n})}{const t=Fi(this.apiClient,e);return r=yt("{model}:generateContent",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=Vi(e),n=new Us;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=Hi(this.apiClient,e);r=yt("{model}:streamGenerateContent?alt=sse",s._url),a=s._query,delete s._url,delete s._query;return i=this.apiClient.requestStream({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),i.then(function(e){return hi(this,arguments,function*(){var t,n,s,o;try{for(var i,r=!0,a=mi(e);!(t=(i=yield pi(a.next())).done);r=!0){o=i.value,r=!1;const e=o,t=zi(yield pi(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Us;Object.assign(n,t),yield yield pi(n)}}catch(l){n={error:l}}finally{try{r||t||!(s=a.return)||(yield pi(s.call(a)))}finally{if(n)throw n.error}}})})}{const t=Fi(this.apiClient,e);r=yt("{model}:streamGenerateContent?alt=sse",t._url),a=t._query,delete t._url,delete t._query;return i=this.apiClient.requestStream({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}),i.then(function(e){return hi(this,arguments,function*(){var t,n,s,o;try{for(var i,r=!0,a=mi(e);!(t=(i=yield pi(a.next())).done);r=!0){o=i.value,r=!1;const e=o,t=Vi(yield pi(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new Us;Object.assign(n,t),yield yield pi(n)}}catch(l){n={error:l}}finally{try{r||t||!(s=a.return)||(yield pi(s.call(a)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=Li(this.apiClient,e);return r=yt("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["predictions[]","embeddings"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>Ri(e))),Et(t,["embeddings"],e)}const o=wt(e,["metadata"]);return null!=o&&Et(t,["metadata"],o),t}(e),n=new Ls;return Object.assign(n,t),n})}{const t=Ui(this.apiClient,e);return r=yt("{model}:batchEmbedContents",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["embeddings"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["embeddings"],e)}const o=wt(e,["metadata"]);return null!=o&&Et(t,["metadata"],o),t}(e),n=new Ls;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=$i(this.apiClient,e);return r=yt("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["predictions"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>er(e))),Et(t,["generatedImages"],e)}const o=wt(e,["positivePromptSafetyAttributes"]);return null!=o&&Et(t,["positivePromptSafetyAttributes"],dr(o)),t}(e),n=new qs;return Object.assign(n,t),n})}{const t=Bi(this.apiClient,e);return r=yt("{model}:predict",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=Ji(e),n=new qs;return Object.assign(n,t),n})}}async editImageInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI()){const r=Mi(this.apiClient,e);return o=yt("{model}:predict",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),s.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["predictions"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>er(e))),Et(t,["generatedImages"],e)}return t}(e),n=new Gs;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI()){const r=xr(this.apiClient,e);return o=yt("{model}:predict",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),s.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["predictions"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>er(e))),Et(t,["generatedImages"],e)}return t}(e),n=new Fs;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI()){const r=lr(this.apiClient,e);return o=yt("{model}:predict",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>{const t=function(e){const t={},n=wt(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>er(e))),Et(t,["generatedImages"],e)}return t}(e),n=new Hs;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI()){const r=ur(this.apiClient,e);return o=yt("{model}:predict",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>{const t=pr(e),n=new Vs;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},s=wt(t,["model"]);return null!=s&&Et(n,["_url","name"],uo(e,s)),n}(this.apiClient,e);return r=yt("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>ar(e))}{const t=function(e,t){const n={},s=wt(t,["model"]);return null!=s&&Et(n,["_url","name"],uo(e,s)),n}(this.apiClient,e);return r=yt("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>rr(e))}}async listInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=ir(this.apiClient,e);return r=yt("{models_url}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["_self"]);if(null!=o){let e=Mo(o);Array.isArray(e)&&(e=e.map(e=>ar(e))),Et(t,["models"],e)}return t}(e),n=new zs;return Object.assign(n,t),n})}{const t=or(this.apiClient,e);return r=yt("{models_url}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["_self"]);if(null!=o){let e=Mo(o);Array.isArray(e)&&(e=e.map(e=>rr(e))),Et(t,["models"],e)}return t}(e),n=new zs;return Object.assign(n,t),n})}}async update(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=gr(this.apiClient,e);return r=yt("{model}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>ar(e))}{const t=fr(this.apiClient,e);return r=yt("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>rr(e))}}async delete(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},s=wt(t,["model"]);return null!=s&&Et(n,["_url","name"],uo(e,s)),n}(this.apiClient,e);return r=yt("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);return null!=n&&Et(t,["sdkHttpResponse"],n),t}(e),n=new Bs;return Object.assign(n,t),n})}{const t=function(e,t){const n={},s=wt(t,["model"]);return null!=s&&Et(n,["_url","name"],uo(e,s)),n}(this.apiClient,e);return r=yt("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);return null!=n&&Et(t,["sdkHttpResponse"],n),t}(e),n=new Bs;return Object.assign(n,t),n})}}async countTokens(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["contents"]);if(null!=o){let e=Ao(o);Array.isArray(e)&&(e=e.map(e=>e)),Et(n,["contents"],e)}const i=wt(t,["config"]);return null!=i&&Pi(i,n),n}(this.apiClient,e);return r=yt("{model}:countTokens",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["totalTokens"]);return null!=s&&Et(t,["totalTokens"],s),t}(e),n=new $s;return Object.assign(n,t),n})}{const t=Di(this.apiClient,e);return r=yt("{model}:countTokens",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["totalTokens"]);null!=s&&Et(t,["totalTokens"],s);const o=wt(e,["cachedContentTokenCount"]);return null!=o&&Et(t,["cachedContentTokenCount"],o),t}(e),n=new $s;return Object.assign(n,t),n})}}async computeTokens(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["_url","model"],uo(e,s));const o=wt(t,["contents"]);if(null!=o){let e=Ao(o);Array.isArray(e)&&(e=e.map(e=>e)),Et(n,["contents"],e)}return n}(this.apiClient,e);return o=yt("{model}:computeTokens",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),s.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["tokensInfo"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["tokensInfo"],e)}return t}(e),n=new Js;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=Zi(this.apiClient,e);return r=yt("{model}:predictLongRunning",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>{const t=Xi(e),n=new Ws;return Object.assign(n,t),n})}{const t=Qi(this.apiClient,e);return r=yt("{model}:predictLongRunning",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>{const t=Ki(e),n=new Ws;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zr extends vt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e){const t={},n=wt(e,["operationName"]);return null!=n&&Et(t,["_url","operationName"],n),t}(e);return r=yt("{operationName}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i}{const t=function(e){const t={},n=wt(e,["operationName"]);return null!=n&&Et(t,["_url","operationName"],n),t}(e);return r=yt("{operationName}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i}}async fetchPredictVideosOperationInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=wt(e,["operationName"]);null!=n&&Et(t,["operationName"],n);const s=wt(e,["resourceName"]);return null!=s&&Et(t,["_url","resourceName"],s),t}(e);return o=yt("{resourceName}:fetchPredictOperation",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s}throw new Error("This method is only supported by the Vertex AI.")}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Br(e){const t={},n=wt(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["mediaResolution"]);null!=n&&Et(t,["mediaResolution"],n);const s=wt(e,["codeExecutionResult"]);null!=s&&Et(t,["codeExecutionResult"],s);const o=wt(e,["executableCode"]);null!=o&&Et(t,["executableCode"],o);const i=wt(e,["fileData"]);null!=i&&Et(t,["fileData"],function(e){const t={};if(void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=wt(e,["fileUri"]);null!=n&&Et(t,["fileUri"],n);const s=wt(e,["mimeType"]);null!=s&&Et(t,["mimeType"],s);return t}(i));const r=wt(e,["functionCall"]);null!=r&&Et(t,["functionCall"],function(e){const t={},n=wt(e,["id"]);null!=n&&Et(t,["id"],n);const s=wt(e,["args"]);null!=s&&Et(t,["args"],s);const o=wt(e,["name"]);null!=o&&Et(t,["name"],o);if(void 0!==wt(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==wt(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(r));const a=wt(e,["functionResponse"]);null!=a&&Et(t,["functionResponse"],a);const l=wt(e,["inlineData"]);null!=l&&Et(t,["inlineData"],function(e){const t={},n=wt(e,["data"]);if(null!=n&&Et(t,["data"],n),void 0!==wt(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const s=wt(e,["mimeType"]);return null!=s&&Et(t,["mimeType"],s),t}(l));const c=wt(e,["text"]);null!=c&&Et(t,["text"],c);const d=wt(e,["thought"]);null!=d&&Et(t,["thought"],d);const u=wt(e,["thoughtSignature"]);null!=u&&Et(t,["thoughtSignature"],u);const p=wt(e,["videoMetadata"]);null!=p&&Et(t,["videoMetadata"],p);return t}(e))),Et(t,["parts"],e)}const s=wt(e,["role"]);return null!=s&&Et(t,["role"],s),t}function $r(e,t,n){const s=wt(t,["expireTime"]);void 0!==n&&null!=s&&Et(n,["expireTime"],s);const o=wt(t,["newSessionExpireTime"]);void 0!==n&&null!=o&&Et(n,["newSessionExpireTime"],o);const i=wt(t,["uses"]);void 0!==n&&null!=i&&Et(n,["uses"],i);const r=wt(t,["liveConnectConstraints"]);void 0!==n&&null!=r&&Et(n,["bidiGenerateContentSetup"],function(e,t){const n={},s=wt(t,["model"]);null!=s&&Et(n,["setup","model"],uo(e,s));const o=wt(t,["config"]);null!=o&&Et(n,["config"],function(e,t){const n={},s=wt(e,["generationConfig"]);void 0!==t&&null!=s&&Et(t,["setup","generationConfig"],s);const o=wt(e,["responseModalities"]);void 0!==t&&null!=o&&Et(t,["setup","generationConfig","responseModalities"],o);const i=wt(e,["temperature"]);void 0!==t&&null!=i&&Et(t,["setup","generationConfig","temperature"],i);const r=wt(e,["topP"]);void 0!==t&&null!=r&&Et(t,["setup","generationConfig","topP"],r);const a=wt(e,["topK"]);void 0!==t&&null!=a&&Et(t,["setup","generationConfig","topK"],a);const l=wt(e,["maxOutputTokens"]);void 0!==t&&null!=l&&Et(t,["setup","generationConfig","maxOutputTokens"],l);const c=wt(e,["mediaResolution"]);void 0!==t&&null!=c&&Et(t,["setup","generationConfig","mediaResolution"],c);const d=wt(e,["seed"]);void 0!==t&&null!=d&&Et(t,["setup","generationConfig","seed"],d);const u=wt(e,["speechConfig"]);void 0!==t&&null!=u&&Et(t,["setup","generationConfig","speechConfig"],jo(u));const p=wt(e,["thinkingConfig"]);void 0!==t&&null!=p&&Et(t,["setup","generationConfig","thinkingConfig"],p);const h=wt(e,["enableAffectiveDialog"]);void 0!==t&&null!=h&&Et(t,["setup","generationConfig","enableAffectiveDialog"],h);const m=wt(e,["systemInstruction"]);void 0!==t&&null!=m&&Et(t,["setup","systemInstruction"],Br(wo(m)));const f=wt(e,["tools"]);if(void 0!==t&&null!=f){let e=_o(f);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=wt(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["functionDeclarations"],e)}if(void 0!==wt(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const s=wt(e,["googleSearchRetrieval"]);null!=s&&Et(t,["googleSearchRetrieval"],s);const o=wt(e,["computerUse"]);null!=o&&Et(t,["computerUse"],o);const i=wt(e,["fileSearch"]);null!=i&&Et(t,["fileSearch"],i);const r=wt(e,["codeExecution"]);null!=r&&Et(t,["codeExecution"],r);if(void 0!==wt(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=wt(e,["googleMaps"]);null!=a&&Et(t,["googleMaps"],function(e){const t={};if(void 0!==wt(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=wt(e,["enableWidget"]);null!=n&&Et(t,["enableWidget"],n);return t}(a));const l=wt(e,["googleSearch"]);null!=l&&Et(t,["googleSearch"],function(e){const t={};if(void 0!==wt(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==wt(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=wt(e,["timeRangeFilter"]);null!=n&&Et(t,["timeRangeFilter"],n);return t}(l));const c=wt(e,["urlContext"]);null!=c&&Et(t,["urlContext"],c);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(To(e)))),Et(t,["setup","tools"],e)}const g=wt(e,["sessionResumption"]);void 0!==t&&null!=g&&Et(t,["setup","sessionResumption"],function(e){const t={},n=wt(e,["handle"]);null!=n&&Et(t,["handle"],n);if(void 0!==wt(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(g));const x=wt(e,["inputAudioTranscription"]);void 0!==t&&null!=x&&Et(t,["setup","inputAudioTranscription"],x);const b=wt(e,["outputAudioTranscription"]);void 0!==t&&null!=b&&Et(t,["setup","outputAudioTranscription"],b);const v=wt(e,["realtimeInputConfig"]);void 0!==t&&null!=v&&Et(t,["setup","realtimeInputConfig"],v);const y=wt(e,["contextWindowCompression"]);void 0!==t&&null!=y&&Et(t,["setup","contextWindowCompression"],y);const E=wt(e,["proactivity"]);void 0!==t&&null!=E&&Et(t,["setup","proactivity"],E);if(void 0!==wt(e,["explicitVadSignal"]))throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}(o,n));return n}(e,r));const a=wt(t,["lockAdditionalFields"]);return void 0!==n&&null!=a&&Et(n,["fieldMask"],a),{}}function Jr(e,t){let n=null;const s=e.bidiGenerateContentSetup;if("object"==typeof s&&null!==s&&"setup"in s){const t=s.setup;"object"==typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==s&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const s=function(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const s=e[n];if("object"==typeof s&&null!=s&&Object.keys(s).length>0){const e=Object.keys(s).map(e=>`${n}.${e}`);t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null==t?void 0:t.lockAdditionalFields)&&0===(null==t?void 0:t.lockAdditionalFields.length))s?e.fieldMask=s:delete e.fieldMask;else if((null==t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==o&&Array.isArray(o)&&o.length>0){const t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];o.length>0&&(n=o.map(e=>t.includes(e)?`generationConfig.${e}`:e));const i=[];s&&i.push(s),n.length>0&&i.push(...n),i.length>0?e.fieldMask=i.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==o&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class Wr extends vt{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const r=function(e,t){const n={},s=wt(t,["config"]);return null!=s&&Et(n,["config"],$r(e,s,n)),n}(this.apiClient,e);o=yt("auth_tokens",r._url),i=r._query,delete r.config,delete r._url,delete r._query;const a=Jr(r,e.config);return s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>e)}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yr(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["_url","name"],n);const s=wt(e,["config"]);return null!=s&&function(e,t){const n=wt(e,["force"]);void 0!==t&&null!=n&&Et(t,["_query","force"],n)}(s,t),t}function Kr(e){const t={},n=wt(e,["parent"]);null!=n&&Et(t,["_url","parent"],n);const s=wt(e,["config"]);return null!=s&&function(e,t){const n=wt(e,["pageSize"]);void 0!==t&&null!=n&&Et(t,["_query","pageSize"],n);const s=wt(e,["pageToken"]);void 0!==t&&null!=s&&Et(t,["_query","pageToken"],s)}(s,t),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Xr extends vt{constructor(e){super(),this.apiClient=e,this.list=async e=>new ei(Ps.PAGED_ITEM_DOCUMENTS,t=>this.listInternal({parent:e.parent,config:t.config}),await this.listInternal(e),e)}async get(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=function(e){const t={},n=wt(e,["name"]);return null!=n&&Et(t,["_url","name"],n),t}(e);return o=yt("{name}",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>e)}}async delete(e){var t,n;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Yr(e);s=yt("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=Kr(e);return o=yt("{parent}/documents",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["documents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["documents"],e)}return t}(e),n=new Zs;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qr extends vt{constructor(e,t=new Xr(e)){super(),this.apiClient=e,this.documents=t,this.list=async(e={})=>new ei(Ps.PAGED_ITEM_FILE_SEARCH_STORES,e=>this.listInternal(e),await this.listInternal(e),e)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=yr(e);return o=yt("fileSearchStores",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>e)}}async get(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=function(e){const t={},n=wt(e,["name"]);return null!=n&&Et(t,["_url","name"],n),t}(e);return o=yt("{name}",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>e)}}async delete(e){var t,n;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Er(e);s=yt("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=Ar(e);return o=yt("fileSearchStores",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["fileSearchStores"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["fileSearchStores"],e)}return t}(e),n=new eo;return Object.assign(n,t),n})}}async uploadToFileSearchStoreInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=function(e){const t={},n=wt(e,["fileSearchStoreName"]);null!=n&&Et(t,["_url","file_search_store_name"],n);const s=wt(e,["config"]);return null!=s&&Sr(s,t),t}(e);return o=yt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);return null!=n&&Et(t,["sdkHttpResponse"],n),t}(e),n=new to;return Object.assign(n,t),n})}}async importFile(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=Nr(e);return o=yt("{file_search_store_name}:importFile",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),s.then(e=>{const t=wr(e),n=new no;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Zr=function(){const{crypto:e}=globalThis;if(null==e?void 0:e.randomUUID)return Zr=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function ea(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const ta=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch(t){}try{return new Error(JSON.stringify(e))}catch(n){}}return new Error(e)};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class na extends Error{}class sa extends na{constructor(e,t,n,s){super(`${sa.makeMessage(e,t,n)}`),this.status=e,this.headers=s,this.error=t}static makeMessage(e,t,n){const s=(null==t?void 0:t.message)?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,n,s){if(!e||!s)return new ia({message:n,cause:ta(t)});const o=t;return 400===e?new aa(e,o,n,s):401===e?new la(e,o,n,s):403===e?new ca(e,o,n,s):404===e?new da(e,o,n,s):409===e?new ua(e,o,n,s):422===e?new pa(e,o,n,s):429===e?new ha(e,o,n,s):e>=500?new ma(e,o,n,s):new sa(e,o,n,s)}}class oa extends sa{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ia extends sa{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class ra extends ia{constructor({message:e}={}){super({message:null!=e?e:"Request timed out."})}}class aa extends sa{}class la extends sa{}class ca extends sa{}class da extends sa{}class ua extends sa{}class pa extends sa{}class ha extends sa{}class ma extends sa{}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fa=/^[a-z][a-z0-9+.-]*:/i;let ga=e=>(ga=Array.isArray,ga(e));const xa=ga;const ba="0.0.1";const va=()=>{var e,t,n,s,o;const i="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===i)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":Ea(Deno.build.os),"X-Stainless-Arch":ya(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!==(t=null===(e=Deno.version)||void 0===e?void 0:e.deno)&&void 0!==t?t:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===i)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":Ea(null!==(n=globalThis.process.platform)&&void 0!==n?n:"unknown"),"X-Stainless-Arch":ya(null!==(s=globalThis.process.arch)&&void 0!==s?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!==(o=globalThis.process.version)&&void 0!==o?o:"unknown"};const r=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}}return null}();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ba,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const ya=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",Ea=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let wa;function Na(...e){const t=globalThis.ReadableStream;if(void 0===t)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Aa(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Na({start(){},async pull(e){const{done:n,value:s}=await t.next();n?e.close():e.enqueue(s)},async cancel(){var e;await(null===(e=t.return)||void 0===e?void 0:e.call(t))}})}function Sa(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return(null==e?void 0:e.done)&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Ca=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),Ia=()=>{var e;if("undefined"==typeof File){const{process:t}=globalThis,n="string"==typeof(null===(e=null==t?void 0:t.versions)||void 0===e?void 0:e.node)&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ja(e,t,n){return Ia(),new File(e,null!=t?t:"unknown_file",n)}const Ta=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _a(e){var t,n,s,o,i;let r=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)r.push(e);else if(Ta(e))r.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!(e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator])(e)){const t=null===(i=null==e?void 0:e.constructor)||void 0===i?void 0:i.name;throw new Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";const t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(e)}`)}try{for(var a,l=!0,c=mi(e);!(t=(a=await c.next()).done);l=!0){o=a.value,l=!1;const e=o;r.push(...await _a(e))}}catch(d){n={error:d}}finally{try{l||t||!(s=c.return)||await s.call(c)}finally{if(n)throw n.error}}}return r}class Oa{constructor(e){this._client=e}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function Ra(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}Oa._key=[];const ka=Object.freeze(Object.create(null)),Pa=((e=Ra)=>function(t,...n){if(1===t.length)return t[0];let s=!1;const o=[],i=t.reduce((t,i,r)=>{var a,l,c;/[?#]/.test(i)&&(s=!0);const d=n[r];let u=(s?encodeURIComponent:e)(""+d);return r!==n.length&&(null==d||"object"==typeof d&&d.toString===(null===(c=Object.getPrototypeOf(null!==(l=Object.getPrototypeOf(null!==(a=d.hasOwnProperty)&&void 0!==a?a:ka))&&void 0!==l?l:ka))||void 0===c?void 0:c.toString))&&(u=d+"",o.push({start:t.length+i.length,length:u.length,error:`Value of type ${Object.prototype.toString.call(d).slice(8,-1)} is not a valid path parameter`})),t+i+(r===n.length?"":u)},""),r=i.split(/[?#]/,1)[0],a=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let l;for(;null!==(l=a.exec(r));)o.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(o.sort((e,t)=>e.start-t.start),o.length>0){let e=0;const t=o.reduce((t,n)=>{const s=" ".repeat(n.start-e),o="^".repeat(n.length);return e=n.start+n.length,t+s+o},"");throw new na(`Path parameters result in path with invalid segments:\n${o.map(e=>e.error).join("\n")}\n${i}\n${t}`)}return i})(Ra);
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Da extends Oa{create(e,t){var n;const{api_version:s=this._client.apiVersion}=e,o=di(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new na("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new na("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Pa`/${s}/interactions`,Object.assign(Object.assign({body:o},t),{stream:null!==(n=e.stream)&&void 0!==n&&n}))}delete(e,t={},n){const{api_version:s=this._client.apiVersion}=null!=t?t:{};return this._client.delete(Pa`/${s}/interactions/${e}`,n)}cancel(e,t={},n){const{api_version:s=this._client.apiVersion}=null!=t?t:{};return this._client.post(Pa`/${s}/interactions/${e}/cancel`,n)}get(e,t={},n){var s;const o=null!=t?t:{},{api_version:i=this._client.apiVersion}=o,r=di(o,["api_version"]);return this._client.get(Pa`/${i}/interactions/${e}`,Object.assign(Object.assign({query:r},n),{stream:null!==(s=null==t?void 0:t.stream)&&void 0!==s&&s}))}}Da._key=Object.freeze(["interactions"]);class Ma extends Da{}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ua,La;function qa(e){let t;return(null!=Ua?Ua:(t=new globalThis.TextEncoder,Ua=t.encode.bind(t)))(e)}function Ga(e){let t;return(null!=La?La:(t=new globalThis.TextDecoder,La=t.decode.bind(t)))(e)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fa{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?qa(e):e;this.buffer=function(e){let t=0;for(const o of e)t+=o.length;const n=new Uint8Array(t);let s=0;for(const o of e)n.set(o,s),s+=o.length;return n}([this.buffer,t]);const n=[];let s;for(;null!=(s=Ha(this.buffer,this.carriageReturnIndex));){if(s.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=s.index;continue}if(null!=this.carriageReturnIndex&&(s.index!==this.carriageReturnIndex+1||s.carriage)){n.push(Ga(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const e=null!==this.carriageReturnIndex?s.preceding-1:s.preceding,t=Ga(this.buffer.subarray(0,e));n.push(t),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode("\n"):[]}}function Ha(e,t){for(let n=null!=t?t:0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function Va(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */Fa.NEWLINE_CHARS=new Set(["\n","\r"]),Fa.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const za={off:0,error:200,warn:300,info:400,debug:500},Ba=(e,t,n)=>{var s,o;if(e)return s=za,o=e,Object.prototype.hasOwnProperty.call(s,o)?e:void Ka(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(za))}`)};function $a(){}function Ja(e,t,n){return!t||za[e]>za[n]?$a:t[e].bind(t)}const Wa={error:$a,warn:$a,info:$a,debug:$a};let Ya=new WeakMap;function Ka(e){var t;const n=e.logger,s=null!==(t=e.logLevel)&&void 0!==t?t:"off";if(!n)return Wa;const o=Ya.get(n);if(o&&o[0]===s)return o[1];const i={error:Ja("error",n,s),warn:Ja("warn",n,s),info:Ja("info",n,s),debug:Ja("debug",n,s)};return Ya.set(n,[s,i]),i}const Xa=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-goog-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qa{constructor(e,t,n){this.iterator=e,this.controller=t,this.client=n}static fromSSEResponse(e,t,n){let s=!1;const o=n?Ka(n):console;return new Qa(function(){return hi(this,arguments,function*(){var n,i,r,a;if(s)throw new na("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let l=!1;try{try{for(var c,d=!0,u=mi(function(e,t){return hi(this,arguments,function*(){var n,s,o,i;if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new na("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new na("Attempted to iterate over a response with no body")}const r=new Za,a=new Fa,l=Sa(e.body);try{for(var c,d=!0,u=mi(function(e){return hi(this,arguments,function*(){var t,n,s,o;let i=new Uint8Array;try{for(var r,a=!0,l=mi(e);!(t=(r=yield pi(l.next())).done);a=!0){o=r.value,a=!1;const e=o;if(null==e)continue;const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?qa(e):e;let n,s=new Uint8Array(i.length+t.length);for(s.set(i),s.set(t,i.length),i=s;-1!==(n=Va(i));)yield yield pi(i.slice(0,n)),i=i.slice(n)}}catch(c){n={error:c}}finally{try{a||t||!(s=l.return)||(yield pi(s.call(l)))}finally{if(n)throw n.error}}i.length>0&&(yield yield pi(i))})}(l));!(n=(c=yield pi(u.next())).done);d=!0){i=c.value,d=!1;const e=i;for(const t of a.decode(e)){const e=r.decode(t);e&&(yield yield pi(e))}}}catch(p){s={error:p}}finally{try{d||n||!(o=u.return)||(yield pi(o.call(u)))}finally{if(s)throw s.error}}for(const e of a.flush()){const t=r.decode(e);t&&(yield yield pi(t))}})}(e,t));!(n=(c=yield pi(u.next())).done);d=!0){a=c.value,d=!1;const e=a;if(!l)if(e.data.startsWith("[DONE]"))l=!0;else try{yield yield pi(JSON.parse(e.data))}catch(p){throw o.error("Could not parse message into JSON:",e.data),o.error("From chunk:",e.raw),p}}}catch(h){i={error:h}}finally{try{d||n||!(r=u.return)||(yield pi(r.call(u)))}finally{if(i)throw i.error}}l=!0}catch(p){if(ea(p))return yield pi(void 0);throw p}finally{l||t.abort()}})},t,n)}static fromReadableStream(e,t,n){let s=!1;return new Qa(function(){return hi(this,arguments,function*(){var n,o,i,r;if(s)throw new na("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{try{for(var l,c=!0,d=mi(function(){return hi(this,arguments,function*(){var t,n,s,o;const i=new Fa,r=Sa(e);try{for(var a,l=!0,c=mi(r);!(t=(a=yield pi(c.next())).done);l=!0){o=a.value,l=!1;const e=o;for(const t of i.decode(e))yield yield pi(t)}}catch(d){n={error:d}}finally{try{l||t||!(s=c.return)||(yield pi(s.call(c)))}finally{if(n)throw n.error}}for(const e of i.flush())yield yield pi(e)})}());!(n=(l=yield pi(d.next())).done);c=!0){r=l.value,c=!1;const e=r;a||e&&(yield yield pi(JSON.parse(e)))}}catch(u){o={error:u}}finally{try{c||n||!(i=d.return)||(yield pi(i.call(d)))}finally{if(o)throw o.error}}a=!0}catch(p){if(ea(p))return yield pi(void 0);throw p}finally{a||t.abort()}})},t,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),s=s=>({next:()=>{if(0===s.length){const s=n.next();e.push(s),t.push(s)}return s.shift()}});return[new Qa(()=>s(e),this.controller,this.client),new Qa(()=>s(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return Na({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:s}=await t.next();if(s)return e.close();const o=qa(JSON.stringify(n)+"\n");e.enqueue(o)}catch(n){e.error(n)}},async cancel(){var e;await(null===(e=t.return)||void 0===e?void 0:e.call(t))}})}}class Za{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,s]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(e,":");return s.startsWith(" ")&&(s=s.substring(1)),"event"===t?this.event=s:"data"===t&&this.data.push(s),null}}async function el(e,t){const{response:n,requestLogID:s,retryOfRequestLogID:o,startTime:i}=t,r=await(async()=>{var s;if(t.options.stream)return Ka(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Qa.fromSSEResponse(n,t.controller,e);if(204===n.status)return null;if(t.options.__binaryResponse)return n;const o=n.headers.get("content-type"),i=null===(s=null==o?void 0:o.split(";")[0])||void 0===s?void 0:s.trim();if((null==i?void 0:i.includes("application/json"))||(null==i?void 0:i.endsWith("+json"))){return await n.json()}return await n.text()})();return Ka(e).debug(`[${s}] response parsed`,Xa({retryOfRequestLogID:o,url:n.url,status:n.status,body:r,durationMs:Date.now()-i})),r}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tl extends Promise{constructor(e,t,n=el){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new tl(this.client,this.responsePromise,async(t,n)=>e(await this.parseResponse(t,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nl=Symbol("brand.privateNullableHeaders");function*sl(e){if(!e)return;if(nl in e){const{values:t,nulls:n}=e;yield*t.entries();for(const e of n)yield[e,null];return}let t,n=!1;e instanceof Headers?t=e.entries():xa(e)?t=e:(n=!0,t=Object.entries(null!=e?e:{}));for(let s of t){const e=s[0];if("string"!=typeof e)throw new TypeError("expected header name to be a string");const t=xa(s[1])?s[1]:[s[1]];let o=!1;for(const s of t)void 0!==s&&(n&&!o&&(o=!0,yield[e,null]),yield[e,s])}}const ol=e=>{const t=new Headers,n=new Set;for(const s of e){const e=new Set;for(const[o,i]of sl(s)){const s=o.toLowerCase();e.has(s)||(t.delete(o),e.add(s)),null===i?(t.delete(o),n.add(s)):(t.append(o,i),n.delete(s))}}return{[nl]:!0,values:t,nulls:n}},il=e=>{var t,n,s,o,i,r;return void 0!==globalThis.process?null!==(s=null===(n=null===(t=ft)||void 0===t?void 0:t[e])||void 0===n?void 0:n.trim())&&void 0!==s?s:void 0:void 0!==globalThis.Deno?null===(r=null===(i=null===(o=globalThis.Deno.env)||void 0===o?void 0:o.get)||void 0===i?void 0:i.call(o,e))||void 0===r?void 0:r.trim():void 0};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
var rl;class al{constructor(e){var t,n,s,o,i,r,a,l=void 0===e?{}:e,{baseURL:c=il("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(null!==(t=il("GEMINI_API_KEY"))&&void 0!==t?t:null),apiVersion:u="v1beta"}=l,p=di(l,["baseURL","apiKey","apiVersion"]);const h=Object.assign(Object.assign({apiKey:d,apiVersion:u},p),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=h.baseURL,this.timeout=null!==(n=h.timeout)&&void 0!==n?n:al.DEFAULT_TIMEOUT,this.logger=null!==(s=h.logger)&&void 0!==s?s:console;const m="warn";this.logLevel=m,this.logLevel=null!==(i=null!==(o=Ba(h.logLevel,"ClientOptions.logLevel",this))&&void 0!==o?o:Ba(il("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))&&void 0!==i?i:m,this.fetchOptions=h.fetchOptions,this.maxRetries=null!==(r=h.maxRetries)&&void 0!==r?r:2,this.fetch=null!==(a=h.fetch)&&void 0!==a?a:
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=Ca,this._options=h,this.apiKey=d,this.apiVersion=u}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-goog-api-key")||t.has("x-goog-api-key")))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(null!=this.apiKey)return ol([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new na(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ba}`}defaultIdempotencyKey(){return`stainless-node-retry-${Zr()}`}makeStatusError(e,t,n,s){return sa.generate(e,t,n,s)}buildURL(e,t,n){const s=!this.baseURLOverridden()&&n||this.baseURL,o=(e=>fa.test(e))(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return function(e){if(!e)return!0;for(const t in e)return!1;return!0}(i)||(t=Object.assign(Object.assign({},i),t)),"object"==typeof t&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(n=>Object.assign({method:e,path:t},n)))}request(e,t=null){return new tl(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,n){var s,o,i;const r=await e,a=null!==(s=r.maxRetries)&&void 0!==s?s:this.maxRetries;null==t&&(t=a),await this.prepareOptions(r);const{req:l,url:c,timeout:d}=await this.buildRequest(r,{retryCount:a-t});await this.prepareRequest(l,{url:c,options:r});const u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=void 0===n?"":`, retryOf: ${n}`,h=Date.now();if(Ka(this).debug(`[${u}] sending request`,Xa({retryOfRequestLogID:n,method:r.method,url:c,options:r,headers:l.headers})),null===(o=r.signal)||void 0===o?void 0:o.aborted)throw new oa;const m=new AbortController,f=await this.fetchWithTimeout(c,l,d,m).catch(ta),g=Date.now();if(f instanceof globalThis.Error){const e=`retrying, ${t} attempts remaining`;if(null===(i=r.signal)||void 0===i?void 0:i.aborted)throw new oa;const s=ea(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return Ka(this).info(`[${u}] connection ${s?"timed out":"failed"} - ${e}`),Ka(this).debug(`[${u}] connection ${s?"timed out":"failed"} (${e})`,Xa({retryOfRequestLogID:n,url:c,durationMs:g-h,message:f.message})),this.retryRequest(r,t,null!=n?n:u);if(Ka(this).info(`[${u}] connection ${s?"timed out":"failed"} - error; no more retries left`),Ka(this).debug(`[${u}] connection ${s?"timed out":"failed"} (error; no more retries left)`,Xa({retryOfRequestLogID:n,url:c,durationMs:g-h,message:f.message})),s)throw new ra;throw new ia({cause:f})}const x=`[${u}${p}] ${l.method} ${c} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${g-h}ms`;if(!f.ok){const e=await this.shouldRetry(f);if(t&&e){const e=`retrying, ${t} attempts remaining`;return await async function(e){var t,n;if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void(await(null===(n=(t=e[Symbol.asyncIterator]()).return)||void 0===n?void 0:n.call(t)));const s=e.getReader(),o=s.cancel();s.releaseLock(),await o}(f.body),Ka(this).info(`${x} - ${e}`),Ka(this).debug(`[${u}] response error (${e})`,Xa({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:g-h})),this.retryRequest(r,t,null!=n?n:u,f.headers)}const s=e?"error; no more retries left":"error; not retryable";Ka(this).info(`${x} - ${s}`);const o=await f.text().catch(e=>ta(e).message),i=(e=>{try{return JSON.parse(e)}catch(t){return}})(o),a=i?void 0:o;Ka(this).debug(`[${u}] response error (${s})`,Xa({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,message:a,durationMs:Date.now()-h}));throw this.makeStatusError(f.status,i,a,f.headers)}return Ka(this).info(x),Ka(this).debug(`[${u}] response start`,Xa({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:g-h})),{response:f,options:r,controller:m,requestLogID:u,retryOfRequestLogID:n,startTime:h}}async fetchWithTimeout(e,t,n,s){const o=t||{},{signal:i,method:r}=o,a=di(o,["signal","method"]);i&&i.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),n),c=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||"object"==typeof a.body&&null!==a.body&&Symbol.asyncIterator in a.body,d=Object.assign(Object.assign(Object.assign({signal:s.signal},c?{duplex:"half"}:{}),{method:"GET"}),a);r&&(d.method=r.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n,s){var o;let i;const r=null==s?void 0:s.get("retry-after-ms");if(r){const e=parseFloat(r);Number.isNaN(e)||(i=e)}const a=null==s?void 0:s.get("retry-after");if(a&&!i){const e=parseFloat(a);i=Number.isNaN(e)?Date.parse(a)-Date.now():1e3*e}if(!(i&&0<=i&&i<6e4)){const n=null!==(o=e.maxRetries)&&void 0!==o?o:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,n)}var l;return await(l=i,new Promise(e=>setTimeout(e,l))),this.makeRequest(e,t-1,n)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:t=0}={}){var n,s,o;const i=Object.assign({},e),{method:r,path:a,query:l,defaultBaseURL:c}=i,d=this.buildURL(a,l,c);"timeout"in i&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new na(`${e} must be an integer`);if(t<0)throw new na(`${e} must be a positive integer`)})("timeout",i.timeout),i.timeout=null!==(n=i.timeout)&&void 0!==n?n:this.timeout;const{bodyHeaders:u,body:p}=this.buildBody({options:i}),h=await this.buildHeaders({options:e,method:r,bodyHeaders:u,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:r,headers:h},i.signal&&{signal:i.signal}),globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"}),p&&{body:p}),null!==(s=this.fetchOptions)&&void 0!==s?s:{}),null!==(o=i.fetchOptions)&&void 0!==o?o:{}),url:d,timeout:i.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:n,retryCount:s}){let o={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const i=ol([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),null!=wa?wa:wa=va()),await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=ol([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:Aa(e)}:this.encoder({body:e,headers:n})}}al.DEFAULT_TIMEOUT=6e4;class ll extends al{constructor(){super(...arguments),this.interactions=new Ma(this)}}function cl(e,t){const n={},s=wt(e,["baseModel"]);null!=s&&Et(n,["baseModel"],s);const o=wt(e,["preTunedModel"]);null!=o&&Et(n,["preTunedModel"],o);const i=wt(e,["trainingDataset"]);null!=i&&function(e){const t={};if(void 0!==wt(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==wt(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=wt(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Et(t,["examples","examples"],e)}}(i);const r=wt(e,["config"]);return null!=r&&function(e,t){const n={};if(void 0!==wt(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const s=wt(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=s&&Et(t,["displayName"],s),void 0!==wt(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const o=wt(e,["epochCount"]);void 0!==t&&null!=o&&Et(t,["tuningTask","hyperparameters","epochCount"],o);const i=wt(e,["learningRateMultiplier"]);if(null!=i&&Et(n,["tuningTask","hyperparameters","learningRateMultiplier"],i),void 0!==wt(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==wt(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==wt(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const r=wt(e,["batchSize"]);void 0!==t&&null!=r&&Et(t,["tuningTask","hyperparameters","batchSize"],r);const a=wt(e,["learningRate"]);if(void 0!==t&&null!=a&&Et(t,["tuningTask","hyperparameters","learningRate"],a),void 0!==wt(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==wt(e,["beta"]))throw new Error("beta parameter is not supported in Gemini API.")}(r,n),n}function dl(e,t){const n={},s=wt(e,["baseModel"]);null!=s&&Et(n,["baseModel"],s);const o=wt(e,["preTunedModel"]);null!=o&&Et(n,["preTunedModel"],o);const i=wt(e,["trainingDataset"]);null!=i&&function(e,t,n){const s={};let o=wt(n,["config","method"]);void 0===o&&(o="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===o){const n=wt(e,["gcsUri"]);void 0!==t&&null!=n&&Et(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===o){const n=wt(e,["gcsUri"]);void 0!==t&&null!=n&&Et(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let i=wt(n,["config","method"]);void 0===i&&(i="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===i){const n=wt(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&Et(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===i){const n=wt(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&Et(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==wt(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(i,n,t);const r=wt(e,["config"]);return null!=r&&function(e,t,n){let s=wt(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){const n=wt(e,["validationDataset"]);void 0!==t&&null!=n&&Et(t,["supervisedTuningSpec"],fl(n))}else if("PREFERENCE_TUNING"===s){const n=wt(e,["validationDataset"]);void 0!==t&&null!=n&&Et(t,["preferenceOptimizationSpec"],fl(n))}const o=wt(e,["tunedModelDisplayName"]);void 0!==t&&null!=o&&Et(t,["tunedModelDisplayName"],o);const i=wt(e,["description"]);void 0!==t&&null!=i&&Et(t,["description"],i);let r=wt(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const n=wt(e,["epochCount"]);void 0!==t&&null!=n&&Et(t,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===r){const n=wt(e,["epochCount"]);void 0!==t&&null!=n&&Et(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let a=wt(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){const n=wt(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&Et(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===a){const n=wt(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&Et(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let l=wt(n,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){const n=wt(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&Et(t,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===l){const n=wt(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&Et(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let c=wt(n,["config","method"]);if(void 0===c&&(c="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===c){const n=wt(e,["adapterSize"]);void 0!==t&&null!=n&&Et(t,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===c){const n=wt(e,["adapterSize"]);void 0!==t&&null!=n&&Et(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==wt(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==wt(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const d=wt(e,["labels"]);void 0!==t&&null!=d&&Et(t,["labels"],d);const u=wt(e,["beta"]);void 0!==t&&null!=u&&Et(t,["preferenceOptimizationSpec","hyperParameters","beta"],u)}(r,n,t),n}function ul(e,t){const n={},s=wt(e,["config"]);return null!=s&&function(e,t){const n=wt(e,["pageSize"]);void 0!==t&&null!=n&&Et(t,["_query","pageSize"],n);const s=wt(e,["pageToken"]);void 0!==t&&null!=s&&Et(t,["_query","pageToken"],s);const o=wt(e,["filter"]);void 0!==t&&null!=o&&Et(t,["_query","filter"],o)}(s,n),n}function pl(e,t){const n={},s=wt(e,["config"]);return null!=s&&function(e,t){const n=wt(e,["pageSize"]);void 0!==t&&null!=n&&Et(t,["_query","pageSize"],n);const s=wt(e,["pageToken"]);void 0!==t&&null!=s&&Et(t,["_query","pageToken"],s);const o=wt(e,["filter"]);void 0!==t&&null!=o&&Et(t,["_query","filter"],o)}(s,n),n}function hl(e,t){const n={},s=wt(e,["sdkHttpResponse"]);null!=s&&Et(n,["sdkHttpResponse"],s);const o=wt(e,["name"]);null!=o&&Et(n,["name"],o);const i=wt(e,["state"]);null!=i&&Et(n,["state"],Ro(i));const r=wt(e,["createTime"]);null!=r&&Et(n,["createTime"],r);const a=wt(e,["tuningTask","startTime"]);null!=a&&Et(n,["startTime"],a);const l=wt(e,["tuningTask","completeTime"]);null!=l&&Et(n,["endTime"],l);const c=wt(e,["updateTime"]);null!=c&&Et(n,["updateTime"],c);const d=wt(e,["description"]);null!=d&&Et(n,["description"],d);const u=wt(e,["baseModel"]);null!=u&&Et(n,["baseModel"],u);const p=wt(e,["_self"]);return null!=p&&Et(n,["tunedModel"],function(e){const t={},n=wt(e,["name"]);null!=n&&Et(t,["model"],n);const s=wt(e,["name"]);return null!=s&&Et(t,["endpoint"],s),t}(p)),n}function ml(e,t){const n={},s=wt(e,["sdkHttpResponse"]);null!=s&&Et(n,["sdkHttpResponse"],s);const o=wt(e,["name"]);null!=o&&Et(n,["name"],o);const i=wt(e,["state"]);null!=i&&Et(n,["state"],Ro(i));const r=wt(e,["createTime"]);null!=r&&Et(n,["createTime"],r);const a=wt(e,["startTime"]);null!=a&&Et(n,["startTime"],a);const l=wt(e,["endTime"]);null!=l&&Et(n,["endTime"],l);const c=wt(e,["updateTime"]);null!=c&&Et(n,["updateTime"],c);const d=wt(e,["error"]);null!=d&&Et(n,["error"],d);const u=wt(e,["description"]);null!=u&&Et(n,["description"],u);const p=wt(e,["baseModel"]);null!=p&&Et(n,["baseModel"],p);const h=wt(e,["tunedModel"]);null!=h&&Et(n,["tunedModel"],h);const m=wt(e,["preTunedModel"]);null!=m&&Et(n,["preTunedModel"],m);const f=wt(e,["supervisedTuningSpec"]);null!=f&&Et(n,["supervisedTuningSpec"],f);const g=wt(e,["preferenceOptimizationSpec"]);null!=g&&Et(n,["preferenceOptimizationSpec"],g);const x=wt(e,["tuningDataStats"]);null!=x&&Et(n,["tuningDataStats"],x);const b=wt(e,["encryptionSpec"]);null!=b&&Et(n,["encryptionSpec"],b);const v=wt(e,["partnerModelTuningSpec"]);null!=v&&Et(n,["partnerModelTuningSpec"],v);const y=wt(e,["customBaseModel"]);null!=y&&Et(n,["customBaseModel"],y);const E=wt(e,["experiment"]);null!=E&&Et(n,["experiment"],E);const w=wt(e,["labels"]);null!=w&&Et(n,["labels"],w);const N=wt(e,["outputUri"]);null!=N&&Et(n,["outputUri"],N);const A=wt(e,["pipelineJob"]);null!=A&&Et(n,["pipelineJob"],A);const S=wt(e,["serviceAccount"]);null!=S&&Et(n,["serviceAccount"],S);const C=wt(e,["tunedModelDisplayName"]);null!=C&&Et(n,["tunedModelDisplayName"],C);const I=wt(e,["veoTuningSpec"]);return null!=I&&Et(n,["veoTuningSpec"],I),n}function fl(e,t){const n={},s=wt(e,["gcsUri"]);null!=s&&Et(n,["validationDatasetUri"],s);const o=wt(e,["vertexDatasetResource"]);return null!=o&&Et(n,["validationDatasetUri"],o),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */rl=ll,ll.GeminiNextGenAPIClient=rl,ll.GeminiNextGenAPIClientError=na,ll.APIError=sa,ll.APIConnectionError=ia,ll.APIConnectionTimeoutError=ra,ll.APIUserAbortError=oa,ll.NotFoundError=da,ll.ConflictError=ua,ll.RateLimitError=ha,ll.BadRequestError=aa,ll.AuthenticationError=la,ll.InternalServerError=ma,ll.PermissionDeniedError=ca,ll.UnprocessableEntityError=pa,ll.toFile=async function(e,t,n){if(Ia(),(e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&Ta(e))(e=await e))return e instanceof File?e:ja([await e.arrayBuffer()],e.name);if((e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob)(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),ja(await _a(s),t,n)}const s=await _a(e);if(t||(t=function(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}(e)),!(null==n?void 0:n.type)){const e=s.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(n=Object.assign(Object.assign({},n),{type:e}))}return ja(s,t,n)},ll.Interactions=Ma;class gl extends vt{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new ei(Ps.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var t;if(this.apiClient.isVertexAI()){if(e.baseModel.startsWith("projects/")){const n={tunedModelName:e.baseModel};(null===(t=e.config)||void 0===t?void 0:t.preTunedModelCheckpointId)&&(n.checkpointId=e.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},e),{preTunedModel:n});return s.baseModel=void 0,await this.tuneInternal(s)}{const t=Object.assign({},e);return await this.tuneInternal(t)}}{const t=Object.assign({},e),n=await this.tuneMldevInternal(t);let s="";void 0!==n.metadata&&void 0!==n.metadata.tunedModel?s=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(s=n.name.split("/operations/")[0]);return{name:s,state:wn.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e){const t={},n=wt(e,["name"]);return null!=n&&Et(t,["_url","name"],n),t}(e);return r=yt("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>ml(e))}{const t=function(e){const t={},n=wt(e,["name"]);return null!=n&&Et(t,["_url","name"],n),t}(e);return r=yt("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>hl(e))}}async listInternal(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=pl(e);return r=yt("tuningJobs",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["tuningJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>ml(e))),Et(t,["tuningJobs"],e)}return t}(e),n=new Ys;return Object.assign(n,t),n})}{const t=ul(e);return r=yt("tunedModels",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["nextPageToken"]);null!=s&&Et(t,["nextPageToken"],s);const o=wt(e,["tunedModels"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>hl(e))),Et(t,["tuningJobs"],e)}return t}(e),n=new Ys;return Object.assign(n,t),n})}}async cancel(e){var t,n,s,o;let i,r="",a={};if(this.apiClient.isVertexAI()){const s=function(e){const t={},n=wt(e,["name"]);return null!=n&&Et(t,["_url","name"],n),t}(e);return r=yt("{name}:cancel",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);return null!=n&&Et(t,["sdkHttpResponse"],n),t}(e),n=new Ks;return Object.assign(n,t),n})}{const t=
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function(e){const t={},n=wt(e,["name"]);return null!=n&&Et(t,["_url","name"],n),t}(e);return r=yt("{name}:cancel",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(s=e.config)||void 0===s?void 0:s.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=wt(e,["sdkHttpResponse"]);return null!=n&&Et(t,["sdkHttpResponse"],n),t}(e),n=new Ks;return Object.assign(n,t),n})}}async tuneInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI()){const r=dl(e,e);return o=yt("tuningJobs",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),s.then(e=>ml(e))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let s,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=cl(e);return o=yt("tunedModels",r._url),i=r._query,delete r._url,delete r._query,s=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),s.then(e=>function(e){const t={},n=wt(e,["sdkHttpResponse"]);null!=n&&Et(t,["sdkHttpResponse"],n);const s=wt(e,["name"]);null!=s&&Et(t,["name"],s);const o=wt(e,["metadata"]);null!=o&&Et(t,["metadata"],o);const i=wt(e,["done"]);null!=i&&Et(t,["done"],i);const r=wt(e,["error"]);return null!=r&&Et(t,["error"],r),t}(e))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xl{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const bl="x-goog-upload-status";async function vl(e,t,n){var s,o;let i=0,r=0,a=new Ms(new Response),l="upload";for(i=e.size;r<i;){const c=Math.min(8388608,i-r),d=e.slice(r,r+c);r+c>=i&&(l+=", finalize");let u=0,p=1e3;for(;u<3&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(r),"Content-Length":String(c)}}}),!(null===(s=null==a?void 0:a.headers)||void 0===s?void 0:s[bl]));)u++,await yl(p),p*=2;if(r+=c,"active"!==(null===(o=null==a?void 0:a.headers)||void 0===o?void 0:o[bl]))break;if(i<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}function yl(e){return new Promise(t=>setTimeout(t,e))}class El{async upload(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var s;const o=await vl(e,t,n),i=await(null==o?void 0:o.json());if("final"!==(null===(s=null==o?void 0:o.headers)||void 0===s?void 0:s[bl]))throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}(e,t,n)}async uploadToFileSearchStore(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var s;const o=await vl(e,t,n),i=await(null==o?void 0:o.json());if("final"!==(null===(s=null==o?void 0:o.headers)||void 0===s?void 0:s[bl]))throw new Error("Failed to upload file: Upload status is not finalized.");const r=jt(i),a=new co;return Object.assign(a,r),a}(e,t,n)}async stat(e){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wl{create(e,t,n){return new Nl(e,t,n)}}class Nl{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Al="x-goog-api-key";class Sl{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(null===e.get(Al)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Al,this.apiKey)}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cl{get interactions(){if(void 0!==this._interactions)return this._interactions;if(this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;null==e||e.extraBody;const t=new ll({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:null==e?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const n=bt(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new Sl(this.apiKey);this.apiClient=new Ir({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/web",uploader:new El,downloader:new xl}),this.models=new Vr(this.apiClient),this.live=new Mr(this.apiClient,s,new wl),this.batches=new ti(this.apiClient),this.chats=new bi(this.models,this.apiClient),this.caches=new ci(this.apiClient),this.files=new wi(this.apiClient),this.operations=new zr(this.apiClient),this.authTokens=new Wr(this.apiClient),this.tunings=new gl(this.apiClient),this.fileSearchStores=new Qr(this.apiClient)}}const Il=new class{constructor(){var e,t;this.ai=null,this.modelId="gemini-2.5-flash",this.apiKey="",this.apiKey=(null==(t=null==(e=import.meta)?void 0:e.env)?void 0:t.VITE_GEMINI_API_KEY)||""}getAI(){if(!this.apiKey)throw new Error("Chave da API Gemini n√£o configurada. Configure VITE_GEMINI_API_KEY nas vari√°veis de ambiente.");return this.ai||(this.ai=new Cl({apiKey:this.apiKey})),this.ai}isConfigured(){return!!this.apiKey}async generateTasksFromGoal(e){if(!e)return[];if(!this.isConfigured())throw new Error("Servi√ßo de IA n√£o configurado. Entre em contato com o administrador.");try{const t=this.getAI(),n=(await t.models.generateContent({model:this.modelId,contents:`Tenho um objetivo de projeto: "${e}". Gere uma lista de 3-5 tarefas Kanban concretas e acion√°veis para alcan√ßar isso. Responda em portugu√™s.`,config:{responseMimeType:"application/json",responseSchema:{type:Dt.ARRAY,items:{type:Dt.OBJECT,properties:{title:{type:Dt.STRING,description:"T√≠tulo curto e objetivo da tarefa"},description:{type:Dt.STRING,description:"Breve descri√ß√£o do que precisa ser feito"},priority:{type:Dt.STRING,enum:[T.Low,T.Medium,T.High,T.Urgent]},tags:{type:Dt.ARRAY,items:{type:Dt.STRING}}},required:["title","description","priority","tags"]}}}})).text;return n?JSON.parse(n):[]}catch(t){throw new Error("Falha ao gerar tarefas com IA. Verifique a configura√ß√£o da API.")}}async breakDownTask(e,t){if(!this.isConfigured())throw new Error("Servi√ßo de IA n√£o configurado. Entre em contato com o administrador.");try{const n=this.getAI(),s=(await n.models.generateContent({model:this.modelId,contents:`Divida esta tarefa de assist√™ncia t√©cnica em 3-6 etapas menores de diagn√≥stico/reparo: T√≠tulo: "${e}", Descri√ß√£o: "${t}". Responda em portugu√™s.`,config:{responseMimeType:"application/json",responseSchema:{type:Dt.OBJECT,properties:{subtasks:{type:Dt.ARRAY,items:{type:Dt.STRING},description:"Lista de sub-etapas acion√°veis"}}}}})).text;return s?JSON.parse(s):{subtasks:[]}}catch(n){throw new Error("Falha ao gerar diagn√≥stico com IA.")}}},jl=({isOpen:e,onClose:t,task:n,onSave:s,onDelete:o,showToast:i,diagnosticFee:r})=>{var c,d,u,p;const[h,m]=a.useState(null),[f,g]=a.useState("info"),[x,b]=a.useState(""),[v,y]=a.useState(!1),[E,w]=a.useState(!1),[N,A]=a.useState("full"),[S,I]=a.useState(!1),[j,T]=a.useState(!1),[O,R]=a.useState(!1),[k,P]=a.useState(!1),[D,M]=a.useState(!1),[U,L]=a.useState(!1),q=a.useRef(null);if(a.useEffect(()=>{n&&m({...n}),P(!1),A("full"),T(!1),M(!1)},[n,e]),a.useEffect(()=>{if(S&&j){const e=setTimeout(()=>{G()},500);return()=>clearTimeout(e)}},[S,j]),!e||!h)return null;const G=async()=>{const e=document.getElementById("pdf-document-root");if(!e)return i("Erro Interno","Elemento do PDF n√£o encontrado.","error"),void I(!1);const t=window.html2pdf;if(void 0===t)return i("Erro de PDF","Biblioteca n√£o carregada.","error"),void I(!1);window.scrollTo(0,0);const n={margin:[10,10,10,10],filename:"entry"===N?`Recibo-Entrada-${h.osNumber}.pdf`:`OS-${h.osNumber}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:1.5,useCORS:!0,logging:!1,scrollY:0,backgroundColor:"#ffffff"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};try{await t().set(n).from(e).save(),i("Download Iniciado","Documento baixado.","success")}catch(s){i("Erro ao Gerar PDF","Verifique o console.","error")}finally{I(!1)}};if(E)return C.jsxs("div",{className:"fixed inset-0 bg-white z-[60] overflow-y-auto flex justify-center",children:[C.jsxs("div",{className:"absolute top-4 right-4 z-[70] flex gap-3",children:[C.jsx("button",{onClick:()=>w(!1),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded shadow font-bold transition-colors",children:"Fechar"}),C.jsxs("button",{onClick:()=>I(!0),disabled:S,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow font-bold transition-colors flex items-center gap-2 disabled:opacity-50",children:[S?C.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):C.jsx(ne,{size:16}),S?"Gerando...":"Baixar PDF"]})]}),C.jsxs("div",{className:"absolute top-4 left-4 z-[70] flex gap-2 bg-slate-100 p-1 rounded-lg border border-slate-300 shadow-sm flex-wrap max-w-[70%]",children:[C.jsx("button",{onClick:()=>{A("entry"),T(!1)},className:"px-3 py-1.5 text-xs font-bold rounded transition-colors "+("entry"===N?"bg-slate-800 text-white":"text-slate-600 hover:bg-slate-200"),children:"Recibo Entrada"}),C.jsx("button",{onClick:()=>{A("full"),T(!1)},className:"px-3 py-1.5 text-xs font-bold rounded transition-colors "+("full"===N?"bg-slate-800 text-white":"text-slate-600 hover:bg-slate-200"),children:"Or√ßamento/OS Completa"})]}),S&&C.jsxs("div",{className:"fixed inset-0 z-[80] bg-white/95 flex flex-col items-center justify-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mb-4"}),C.jsx("p",{className:"text-slate-900 font-bold mb-4",children:"Gerando PDF..."})]}),C.jsx("div",{className:"w-full max-w-[800px] shadow-2xl my-16 md:my-10 relative",children:C.jsx(ht,{task:h,mode:N,onReady:()=>T(!0),diagnosticFee:r})})]});const F=(e,t)=>m(n=>n?{...n,[e]:t}:null),H=(e,t)=>{const n=t.replace(/\D/g,""),s=parseInt(n||"0",10)/100;F(e,s)},V=e=>null==e?"0,00":Number(e).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),$=e=>{const t=e.replace(/\D/g,"");if(11!==t.length)return!1;if(/^(\d)\1+$/.test(t))return!1;let n=0;for(let o=0;o<9;o++)n+=parseInt(t[o])*(10-o);let s=10*n%11;if(10!==s&&11!==s||(s=0),s!==parseInt(t[9]))return!1;n=0;for(let o=0;o<10;o++)n+=parseInt(t[o])*(11-o);return s=10*n%11,10!==s&&11!==s||(s=0),s===parseInt(t[10])},J=e=>{const t=e.replace(/\D/g,"");if(14!==t.length)return!1;if(/^(\d)\1+$/.test(t))return!1;const n=[5,4,3,2,9,8,7,6,5,4,3,2],s=[6,5,4,3,2,9,8,7,6,5,4,3,2];let o=0;for(let r=0;r<12;r++)o+=parseInt(t[r])*n[r];let i=o%11;if(i<2){if(0!==parseInt(t[12]))return!1}else if(parseInt(t[12])!==11-i)return!1;o=0;for(let r=0;r<13;r++)o+=parseInt(t[r])*s[r];return i=o%11,i<2?0===parseInt(t[13]):parseInt(t[13])===11-i},K=e=>{const t=e.replace(/\D/g,"");return 11===t.length?$(e):14===t.length&&J(e)},Z=()=>{if(!(null==h?void 0:h.clientPhone))return i("Telefone Inv√°lido","O telefone do cliente √© obrigat√≥rio.","warning"),g("info"),!1;return!(h.clientPhone.replace(/\D/g,"").length<10)||(i("Telefone Inv√°lido","O telefone deve conter DDD + N√∫mero (m√≠n. 10 d√≠gitos).","warning"),g("info"),!1)},ee=[{id:"info",label:"Info",icon:Ge},{id:"technical",label:"T√©c",icon:ye},{id:"financial",label:"Fin",icon:te},{id:"chat",label:"Chat",icon:Ce}];return C.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:[k&&C.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/80 p-4",children:C.jsxs("div",{className:"glass-panel bg-slate-900 border border-red-500/30 rounded-xl w-full max-w-sm p-6 text-center animate-in zoom-in-95",children:[C.jsx(De,{size:32,className:"text-red-500 mx-auto mb-4"}),C.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Excluir O.S.?"}),C.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"Esta a√ß√£o √© irrevers√≠vel."}),C.jsxs("div",{className:"flex gap-3",children:[C.jsx("button",{onClick:()=>P(!1),className:"flex-1 py-3 bg-slate-800 text-slate-300 rounded-xl font-medium",children:"Cancelar"}),C.jsx("button",{onClick:()=>{(null==h?void 0:h.id)&&(o(h.id),P(!1))},className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold",children:"Excluir"})]})]})}),O&&C.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/80 p-4",children:C.jsxs("div",{className:"glass-panel bg-slate-900 border border-slate-700 rounded-xl w-full max-w-md p-6 animate-in zoom-in-95",children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsx("h3",{className:"text-white font-bold",children:"Assinatura do T√©cnico"}),C.jsx("button",{onClick:()=>R(!1),title:"Fechar","aria-label":"Fechar modal de assinatura",children:C.jsx(He,{className:"text-slate-400"})})]}),C.jsx("div",{className:"bg-white rounded-xl overflow-hidden mb-4 border-2 border-slate-600",children:C.jsx(pt,{onChange:e=>m(t=>t?{...t,techSignature:e}:null)})}),C.jsx("button",{onClick:()=>R(!1),className:"w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-500 transition-colors",children:"Confirmar Assinatura"})]})}),C.jsxs("div",{className:"w-full h-[100dvh] md:h-[90vh] md:max-w-6xl md:rounded-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row bg-[#0f172a] border border-white/10",children:[C.jsxs("aside",{className:"w-full md:w-72 bg-slate-900/95 border-b md:border-b-0 md:border-r border-white/5 flex flex-col flex-shrink-0 z-20",children:[C.jsxs("div",{className:"p-4 border-b border-white/5 flex justify-between items-center bg-slate-900",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("div",{className:"bg-blue-600/20 p-1.5 rounded",children:C.jsx("span",{className:"font-mono font-bold text-blue-400 tracking-tight text-lg",children:h.osNumber})}),C.jsx("div",{className:"md:hidden",children:C.jsxs("button",{onClick:()=>M(e=>!e),className:"text-xs flex items-center gap-1 text-slate-400 bg-slate-800 px-2 py-1 rounded-full border border-slate-700",type:"button",children:[D?C.jsx(Y,{size:14},"chevron-up"):C.jsx(W,{size:14},"chevron-down"),C.jsx("span",{children:D?"Ocultar Detalhes":"Ver Detalhes"})]})})]}),C.jsx("button",{onClick:t,className:"md:hidden p-2 text-slate-400 hover:text-white bg-slate-800 rounded-lg",title:"Fechar","aria-label":"Fechar modal",children:C.jsx(He,{size:20})})]}),C.jsxs("div",{className:"hidden md:block md:flex-1 p-4 space-y-4 overflow-y-auto custom-scrollbar",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-2 bg-slate-800 p-2 rounded-lg border border-slate-700",children:[C.jsx("span",{className:"w-3 h-3 rounded-full shadow-lg flex-shrink-0 "+(h.columnId===_.Done?"bg-green-500 shadow-green-500/50":h.columnId===_.Execution?"bg-blue-500 shadow-blue-500/50":"bg-yellow-500 shadow-yellow-500/50")}),C.jsx("select",{className:"bg-transparent text-sm font-bold text-slate-200 focus:outline-none cursor-pointer uppercase tracking-tight w-full truncate",value:h.columnId,onChange:e=>F("columnId",e.target.value),title:"Status da Ordem de Servi√ßo","aria-label":"Alterar status da O.S.",children:tt.map(e=>C.jsx("option",{value:e.id,className:"bg-slate-900",children:e.title},e.id))})]}),C.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-xl border border-white/5 space-y-3",children:[C.jsxs("div",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"bg-slate-700 p-2 rounded-lg",children:C.jsx(Ge,{size:16,className:"text-slate-300"})}),C.jsxs("div",{className:"overflow-hidden w-full",children:[C.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Cliente"}),C.jsx("input",{className:"bg-slate-900/50 text-sm font-semibold text-white w-full p-2 rounded border border-slate-700 focus:border-blue-500 outline-none",value:h.clientName,onChange:e=>F("clientName",e.target.value),placeholder:"Nome do Cliente"})]})]}),C.jsxs("div",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"bg-slate-700 p-2 rounded-lg",children:C.jsx(be,{size:16,className:"text-slate-300"})}),C.jsxs("div",{className:"overflow-hidden w-full",children:[C.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Equipamento"}),C.jsx("input",{className:"bg-slate-900/50 text-sm text-slate-200 w-full p-2 rounded border border-slate-700 focus:border-blue-500 outline-none",value:h.equipment,onChange:e=>F("equipment",e.target.value),placeholder:"Modelo do Equipamento"})]})]}),C.jsxs("div",{className:"pt-2 border-t border-white/5 flex justify-between items-center bg-slate-900/50 p-2 rounded",children:[C.jsx("span",{className:"text-[10px] text-slate-500 font-bold",children:"Total Estimado"}),C.jsxs("span",{className:"text-sm font-mono font-bold text-green-400",children:["R$ ",V((h.serviceCost||0)+(h.partsCost||0))]})]})]}),C.jsxs("div",{className:"pt-4 border-t border-white/5 flex gap-2",children:[C.jsx("button",{onClick:e=>{e.preventDefault(),P(!0)},className:"p-3 rounded-xl bg-slate-800 hover:bg-red-900/20 text-slate-400 hover:text-red-500 transition-colors flex-1 flex justify-center",title:"Excluir O.S.","aria-label":"Excluir Ordem de Servi√ßo",children:C.jsx(De,{size:18})}),C.jsx("button",{onClick:()=>w(!0),className:"p-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-blue-400 transition-colors flex-1 flex justify-center",title:"Imprimir/PDF","aria-label":"Gerar PDF",children:C.jsx(Ne,{size:18})})]})]}),D&&C.jsxs("div",{className:"md:hidden flex-1 p-4 space-y-4 overflow-y-auto custom-scrollbar animate-in fade-in slide-in-from-top-2 duration-200",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-2 bg-slate-800 p-2 rounded-lg border border-slate-700",children:[C.jsx("span",{className:"w-3 h-3 rounded-full shadow-lg flex-shrink-0 "+(h.columnId===_.Done?"bg-green-500 shadow-green-500/50":h.columnId===_.Execution?"bg-blue-500 shadow-blue-500/50":"bg-yellow-500 shadow-yellow-500/50")}),C.jsx("select",{className:"bg-transparent text-sm font-bold text-slate-200 focus:outline-none cursor-pointer uppercase tracking-tight w-full truncate",value:h.columnId,onChange:e=>F("columnId",e.target.value),title:"Status da Ordem de Servi√ßo","aria-label":"Alterar status da O.S.",children:tt.map(e=>C.jsx("option",{value:e.id,className:"bg-slate-900",children:e.title},e.id))})]}),C.jsxs("div",{className:"bg-slate-800/50 p-3 rounded-xl border border-white/5 space-y-3",children:[C.jsxs("div",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"bg-slate-700 p-2 rounded-lg",children:C.jsx(Ge,{size:16,className:"text-slate-300"})}),C.jsxs("div",{className:"overflow-hidden w-full",children:[C.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Cliente"}),C.jsx("input",{className:"bg-slate-900/50 text-sm font-semibold text-white w-full p-2 rounded border border-slate-700 focus:border-blue-500 outline-none",value:h.clientName,onChange:e=>F("clientName",e.target.value),placeholder:"Nome do Cliente"})]})]}),C.jsxs("div",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"bg-slate-700 p-2 rounded-lg",children:C.jsx(be,{size:16,className:"text-slate-300"})}),C.jsxs("div",{className:"overflow-hidden w-full",children:[C.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Equipamento"}),C.jsx("input",{className:"bg-slate-900/50 text-sm text-slate-200 w-full p-2 rounded border border-slate-700 focus:border-blue-500 outline-none",value:h.equipment,onChange:e=>F("equipment",e.target.value),placeholder:"Modelo do Equipamento"})]})]}),C.jsxs("div",{className:"pt-2 border-t border-white/5 flex justify-between items-center bg-slate-900/50 p-2 rounded",children:[C.jsx("span",{className:"text-[10px] text-slate-500 font-bold",children:"Total Estimado"}),C.jsxs("span",{className:"text-sm font-mono font-bold text-green-400",children:["R$ ",V((h.serviceCost||0)+(h.partsCost||0))]})]})]}),C.jsxs("div",{className:"pt-4 border-t border-white/5 flex gap-2",children:[C.jsx("button",{onClick:e=>{e.preventDefault(),P(!0)},className:"p-3 rounded-xl bg-slate-800 hover:bg-red-900/20 text-slate-400 hover:text-red-500 transition-colors flex-1 flex justify-center",title:"Excluir O.S.","aria-label":"Excluir Ordem de Servi√ßo",children:C.jsx(De,{size:18})}),C.jsx("button",{onClick:()=>w(!0),className:"p-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-blue-400 transition-colors flex-1 flex justify-center",title:"Imprimir/PDF","aria-label":"Gerar PDF",children:C.jsx(Ne,{size:18})})]})]}),C.jsx("div",{className:"md:hidden border-t border-slate-800 bg-slate-900 px-2 py-2",children:C.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:ee.map(e=>C.jsxs("button",{onClick:()=>g(e.id),className:"flex-1 min-w-[80px] flex flex-col items-center justify-center gap-1 py-2 px-1 rounded-lg text-xs font-medium transition-all "+(f===e.id?"bg-blue-600 text-white":"text-slate-400 bg-slate-800"),children:[C.jsx(e.icon,{size:16}),e.label]},e.id))})}),C.jsxs("nav",{className:"hidden md:block p-4 space-y-1 mt-auto border-t border-white/5",children:[C.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-600 px-2 mb-2",children:"√Åreas de Trabalho"}),ee.map(e=>C.jsxs("button",{onClick:()=>g(e.id),className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl text-sm font-medium transition-all "+(f===e.id?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200"),children:[C.jsx(e.icon,{size:18}),"Info"===e.label?"Informa√ß√µes":"T√©c"===e.label?"T√©cnico":"Fin"===e.label?"Financeiro":"Chat",f===e.id&&C.jsx("div",{className:"ml-auto w-1.5 h-1.5 bg-white rounded-full"})]},e.id))]})]}),C.jsxs("main",{className:"flex-1 flex flex-col bg-[#0f172a] relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-4 right-4 z-30 hidden md:block",children:C.jsx("button",{onClick:t,className:"p-2 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-full shadow-lg transition-colors",title:"Fechar","aria-label":"Fechar modal",children:C.jsx(He,{size:20})})}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar pb-24",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-4 md:mb-6",children:[(null==(c=ee.find(e=>e.id===f))?void 0:c.icon)&&l.createElement(ee.find(e=>e.id===f).icon,{className:"text-blue-500",size:24}),C.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Info"===(null==(d=ee.find(e=>e.id===f))?void 0:d.label)?"Informa√ß√µes":"T√©c"===(null==(u=ee.find(e=>e.id===f))?void 0:u.label)?"T√©cnico":"Fin"===(null==(p=ee.find(e=>e.id===f))?void 0:p.label)?"Financeiro":"Chat"})]}),C.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:["info"===f&&C.jsxs("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:[C.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl border border-blue-500/30 bg-gradient-to-r from-blue-900/20 to-slate-900",children:[C.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[C.jsxs("label",{className:"text-xs text-blue-400 font-bold uppercase tracking-wider flex items-center gap-2",children:[C.jsx(Ge,{size:14})," Dados do Cliente"]}),(()=>{const e=(h.clientPhone||"").replace(/\D/g,""),t=e.length>=10,n=`https://wa.me/${e.startsWith("55")?e:`55${e}`}?text=${encodeURIComponent(`üîß *AINFOTECH - Ordem de Servi√ßo*\n\nOl√°, *${h.clientName}*! üëã\n\nSeu equipamento foi registrado em nosso sistema.\n\nüìã *N√∫mero da O.S.:* ${h.osNumber}\nüì± *Equipamento:* ${h.equipment||"N√£o informado"}\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüì≤ *COMO ACOMPANHAR SEU SERVI√áO:*\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n1Ô∏è‚É£ Acesse nosso site:\nüëâ ${et}\n\n2Ô∏è‚É£ Clique em *"Entrar no Sistema"*\n\n3Ô∏è‚É£ Selecione *"Sou Cliente"*\n\n4Ô∏è‚É£ Digite apenas os n√∫meros da sua O.S.: *${h.osNumber.replace("OS-","")}*\n\n5Ô∏è‚É£ Pronto! Voc√™ ter√° acesso a:\n   ‚úÖ Status do servi√ßo em tempo real\n   ‚úÖ Or√ßamento detalhado\n   ‚úÖ Chat direto com o t√©cnico\n   ‚úÖ Download do PDF (Recibo/Or√ßamento)\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüí° Guarde este n√∫mero da O.S.!\nQualquer d√∫vida, estamos √† disposi√ß√£o.\n\nAtenciosamente,\n*AINFOTECH - Reparo e Manuten√ß√£o*\nüìû (79) 9 9908-0924`)}`;return C.jsxs("a",{href:t?n:void 0,target:"_blank",rel:"noopener noreferrer",onClick:e=>{t||(e.preventDefault(),i("Telefone Inv√°lido","Preencha o telefone do cliente corretamente para enviar a mensagem.","warning"))},className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg "+(t?"bg-green-600 hover:bg-green-500 text-white cursor-pointer hover:scale-105 active:scale-95 shadow-green-900/30":"bg-slate-700 text-slate-400 cursor-not-allowed opacity-60"),title:t?"Enviar instru√ß√µes via WhatsApp":"Preencha o telefone do cliente primeiro",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),C.jsx("span",{className:"hidden sm:inline",children:"Enviar Instru√ß√µes"}),C.jsx("span",{className:"sm:hidden",children:"WhatsApp"})]})})()]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[C.jsxs("div",{className:"space-y-1.5 md:space-y-2 md:col-span-2",children:[C.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase",children:"Nome Completo *"}),C.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded-xl p-3 text-base text-white font-medium focus:border-blue-500 outline-none transition-all",value:h.clientName,onChange:e=>F("clientName",e.target.value),placeholder:"Nome do Cliente"})]}),C.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[C.jsxs("label",{className:"text-xs text-slate-500 font-bold uppercase flex items-center gap-2",children:["Telefone *",(h.clientPhone||"").replace(/\D/g,"").length>=10?C.jsx(X,{size:12,className:"text-green-400"}):null]}),C.jsx("input",{className:"w-full bg-slate-900 border rounded-xl p-3 text-sm text-slate-200 transition-all outline-none "+((h.clientPhone||"").replace(/\D/g,"").length>=10?"border-green-500/50 focus:border-green-500":"border-slate-700 focus:border-blue-500"),value:h.clientPhone,onChange:e=>{return t=e.target.value,F("clientPhone",(e=>{const t=e.replace(/\D/g,"").slice(0,11);return t.length<=2?t:t.length<=6?`(${t.slice(0,2)}) ${t.slice(2)}`:t.length<=10?`(${t.slice(0,2)}) ${t.slice(2,6)}-${t.slice(6)}`:`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7)}`})(t));var t},type:"tel",placeholder:"(79) 99999-9999",maxLength:16}),C.jsx("p",{className:"text-[10px] text-slate-500",children:(h.clientPhone||"").replace(/\D/g,"").length>=10?C.jsx("span",{className:"text-green-400",children:"‚úì Telefone v√°lido - WhatsApp liberado"}):"Digite o DDD + n√∫mero para liberar o WhatsApp"})]}),C.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[C.jsxs("label",{className:"text-xs text-slate-500 font-bold uppercase flex items-center gap-2",children:["CPF/CNPJ",(()=>{const e=h.clientCpf||"",t=e.replace(/\D/g,"");return 11===t.length||14===t.length?K(e)?C.jsx(X,{size:12,className:"text-green-400"}):C.jsx(Q,{size:12,className:"text-red-400"}):null})()]}),C.jsx("input",{className:`w-full bg-slate-900 border rounded-xl p-3 text-sm text-slate-200 transition-all outline-none ${(()=>{const e=h.clientCpf||"",t=e.replace(/\D/g,"");return 11===t.length||14===t.length?K(e)?"border-green-500/50 focus:border-green-500":"border-red-500/50 focus:border-red-500":"border-slate-700 focus:border-blue-500"})()}`,value:h.clientCpf||"",onChange:e=>{return t=e.target.value,F("clientCpf",(e=>{const t=e.replace(/\D/g,"");if(t.length<=11)return t.length<=3?t:t.length<=6?`${t.slice(0,3)}.${t.slice(3)}`:t.length<=9?`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6)}`:`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6,9)}-${t.slice(9,11)}`;{const e=t.slice(0,14);return e.length<=2?e:e.length<=5?`${e.slice(0,2)}.${e.slice(2)}`:e.length<=8?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5)}`:e.length<=12?`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8)}`:`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8,12)}-${e.slice(12)}`}})(t));var t},placeholder:"000.000.000-00 ou 00.000.000/0000-00",type:"tel",maxLength:18}),C.jsx("p",{className:"text-[10px] text-slate-500",children:(()=>{const e=h.clientCpf||"",t=e.replace(/\D/g,"");return 11===t.length?$(e)?C.jsx("span",{className:"text-green-400",children:"‚úì CPF v√°lido"}):C.jsx("span",{className:"text-red-400",children:"‚úó CPF inv√°lido"}):14===t.length?J(e)?C.jsx("span",{className:"text-green-400",children:"‚úì CNPJ v√°lido"}):C.jsx("span",{className:"text-red-400",children:"‚úó CNPJ inv√°lido"}):t.length>0?`${t.length}/11 d√≠gitos`:"Opcional - pessoa f√≠sica ou jur√≠dica"})()})]}),C.jsxs("div",{className:"space-y-1.5 md:space-y-2 md:col-span-2",children:[C.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase",children:"Endere√ßo Completo"}),C.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded-xl p-3 text-sm text-slate-200",value:h.clientAddress||"",onChange:e=>F("clientAddress",e.target.value),placeholder:"Rua, N¬∫, Bairro, Cidade"})]})]}),C.jsx("div",{className:"mt-4 p-3 rounded-xl bg-green-900/20 border border-green-500/30",children:C.jsxs("p",{className:"text-xs text-green-300",children:[C.jsx("strong",{children:"üí° Dica:"})," Ao clicar no bot√£o WhatsApp, voc√™ enviar√° automaticamente as instru√ß√µes de acesso ao portal do cliente com o n√∫mero da O.S. ",h.osNumber]})})]}),C.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl border border-slate-700/50",children:[C.jsx("label",{className:"text-xs text-slate-500 font-bold block mb-2 md:mb-4 uppercase tracking-wider",children:"T√≠tulo da O.S. / Equipamento"}),C.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded-xl p-3 md:p-4 text-base md:text-lg text-white font-medium focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all",value:h.title,onChange:e=>F("title",e.target.value),placeholder:"Ex: Formata√ß√£o Notebook Dell"}),C.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[C.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[C.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase",children:"Modelo do Equipamento"}),C.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded-xl p-3 text-sm text-slate-200",value:h.equipment,onChange:e=>F("equipment",e.target.value),placeholder:"Ex: Dell Inspiron 15"})]}),C.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[C.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase",children:"N√∫mero de S√©rie"}),C.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded-xl p-3 text-sm text-slate-200",value:h.serialNumber||"",onChange:e=>F("serialNumber",e.target.value),placeholder:"S/N do Equipamento"})]})]})]}),C.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl border border-slate-700/50",children:[C.jsx("label",{className:"text-xs text-slate-500 font-bold block mb-2 md:mb-4 uppercase tracking-wider",children:"Problema Relatado & Checklist"}),C.jsx("textarea",{className:"w-full h-24 bg-slate-900 border border-slate-700 rounded-xl p-3 text-sm text-slate-200 resize-none mb-4 md:mb-6 focus:border-blue-500 outline-none",value:h.description,onChange:e=>F("description",e.target.value),placeholder:"Descreva o problema relatado pelo cliente..."}),C.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 md:gap-3",children:(h.checklist||[]).map(e=>C.jsxs("button",{onClick:()=>{return t=e.id,m(e=>e?{...e,checklist:(e.checklist||[]).map(e=>e.id===t?{...e,checked:!e.checked}:e)}:null);var t},className:"text-xs p-3 rounded-xl border text-left flex items-center gap-3 transition-all "+(e.checked?"bg-green-500/10 border-green-500/50 text-green-400":"bg-slate-900 border-slate-800 text-slate-500 hover:border-slate-600"),children:[C.jsx("div",{className:"w-4 h-4 flex-shrink-0 rounded border flex items-center justify-center "+(e.checked?"bg-green-500 border-green-500":"border-slate-600"),children:e.checked&&C.jsx(X,{size:10,className:"text-slate-900"})}),C.jsx("span",{className:"truncate font-medium",children:e.label})]},e.id))})]}),C.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl border border-orange-500/30 bg-gradient-to-r from-orange-900/10 to-slate-900",children:[C.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[C.jsxs("div",{children:[C.jsxs("label",{className:"text-xs text-orange-400 font-bold uppercase tracking-wider flex items-center gap-2",children:[C.jsx(B,{size:14})," Registro Fotogr√°fico de Entrada"]}),C.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"üì∏ Tire fotos do equipamento para documentar o estado f√≠sico na chegada"})]}),C.jsxs("button",{onClick:()=>{var e;return null==(e=q.current)?void 0:e.click()},className:"flex items-center gap-2 px-4 py-2.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-sm font-bold transition-all shadow-lg shadow-orange-900/30 hover:scale-105 active:scale-95",type:"button",children:[C.jsx(B,{size:16}),C.jsx("span",{className:"hidden sm:inline",children:"Adicionar Foto"}),C.jsx("span",{className:"sm:hidden",children:"+ Foto"})]}),C.jsx("input",{type:"file",ref:q,className:"hidden",onChange:async e=>{var t,n;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type))return i("Tipo Inv√°lido","Apenas imagens JPEG, PNG, GIF ou WebP s√£o permitidas.","error"),void(e.target.value="");if(s.size>10485760)return i("Arquivo Grande","O arquivo √© muito grande. M√°ximo permitido: 10MB.","error"),void(e.target.value="");const o=(null==(n=null==h?void 0:h.photos)?void 0:n.length)||0;if(o>=6)return i("Limite Atingido","M√°ximo de 6 fotos permitido.","warning"),void(e.target.value="");try{i("Processando...","Comprimindo imagem...","info");const e=await(e=>new Promise((t,n)=>{const s=new FileReader;s.readAsDataURL(e),s.onerror=()=>n("Erro ao ler arquivo"),s.onload=e=>{var s;const o=new Image;o.src=null==(s=e.target)?void 0:s.result,o.onerror=()=>n("Erro ao carregar imagem"),o.onload=()=>{const e=document.createElement("canvas"),s=e.getContext("2d");if(!s)return void n("Canvas n√£o suportado");const i=800;let r=o.width,a=o.height;r>a?r>i&&(a=Math.round(a*i/r),r=i):a>i&&(r=Math.round(r*i/a),a=i),e.width=r,e.height=a,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(o,0,0,r,a);const l=e.toDataURL("image/jpeg",.5);t(l)}}}))(s);m(t=>t?{...t,photos:[...t.photos||[],e]}:null),i("Foto Adicionada",`Imagem ${o+1}/6 anexada.`,"success")}catch(r){i("Erro","N√£o foi poss√≠vel processar a imagem.","error")}e.target.value=""},accept:"image/*","aria-label":"Selecionar foto do equipamento"})]}),C.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:[(h.photos||[]).map((e,t)=>C.jsxs("div",{className:"relative aspect-[4/3] bg-black rounded-xl border-2 border-slate-700 overflow-hidden group shadow-lg",children:[C.jsx("img",{src:e,className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity",alt:`Foto ${t+1}`}),C.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:C.jsxs("span",{className:"text-[10px] text-white font-bold",children:["Foto #",t+1]})}),C.jsx("button",{onClick:()=>{return e=t,m(t=>t?{...t,photos:[...t.photos||[]].filter((t,n)=>n!==e)}:null);var e},className:"absolute top-2 right-2 bg-red-600 hover:bg-red-500 text-white p-1.5 rounded-lg opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-all shadow-lg",title:"Remover foto",type:"button",children:C.jsx(De,{size:12})})]},t)),C.jsxs("button",{onClick:()=>{var e;return null==(e=q.current)?void 0:e.click()},className:"aspect-[4/3] border-2 border-dashed border-slate-700 rounded-xl flex flex-col items-center justify-center gap-2 text-slate-500 hover:text-orange-400 hover:border-orange-500/50 transition-all bg-slate-900/50",type:"button",children:[C.jsx(B,{size:24}),C.jsx("span",{className:"text-[10px] font-bold",children:"+ Adicionar"})]})]}),C.jsx("div",{className:"mt-4 p-3 rounded-xl bg-orange-900/20 border border-orange-500/30",children:C.jsxs("p",{className:"text-xs text-orange-300",children:[C.jsx("strong",{children:"‚ö†Ô∏è Importante:"})," Estas fotos documentam o estado f√≠sico do equipamento na entrada e s√£o anexadas ao PDF do recibo. Elas protegem voc√™ e o cliente em caso de d√∫vidas sobre danos pr√©-existentes."]})})]})]}),"technical"===f&&C.jsx("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:C.jsxs("div",{className:"glass-panel p-0 rounded-2xl border border-slate-700/50 overflow-hidden flex flex-col h-[400px] md:h-[500px]",children:[C.jsxs("div",{className:"bg-slate-900/50 p-3 border-b border-white/5 flex justify-between items-center",children:[C.jsx("span",{className:"text-xs font-bold text-blue-400 uppercase tracking-wider ml-2",children:"Diagn√≥stico & Laudo"}),C.jsxs("button",{onClick:async()=>{if(Il.isConfigured()){y(!0);try{const e=(await Il.breakDownTask(h.title,h.description)).subtasks.map((e,t)=>({id:`st-${Date.now()}-${t}`,title:e,completed:!1}));m(t=>t?{...t,subtasks:[...t.subtasks,...e]}:null),i("IA Sucesso","Plano de a√ß√£o gerado automaticamente.","success")}catch(e){const t=(null==e?void 0:e.message)||"Falha ao gerar diagn√≥stico com IA.";i("Erro IA",t,"error")}finally{y(!1)}}else i("IA n√£o configurada","O servi√ßo de IA requer configura√ß√£o. Entre em contato com o administrador.","warning")},disabled:v,className:"flex items-center gap-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-500 text-white rounded-lg text-xs font-bold transition-colors",children:[C.jsx(_e,{size:14})," ",v?"...":"IA"]})]}),C.jsx("textarea",{className:"flex-1 w-full bg-slate-900/30 p-4 text-sm text-slate-200 resize-none focus:outline-none leading-relaxed",value:h.technicalObservation||"",onChange:e=>F("technicalObservation",e.target.value),placeholder:"Digite o laudo t√©cnico detalhado aqui..."}),C.jsx("div",{className:"p-3 border-t border-white/5 bg-slate-900/50",children:C.jsxs("button",{onClick:()=>R(!0),className:"w-full flex justify-center items-center gap-2 px-4 py-3 rounded-lg text-xs font-bold border transition-colors "+(h.techSignature?"bg-green-900/20 border-green-500 text-green-400":"bg-slate-800 border-slate-600 text-slate-400 hover:text-white"),children:[C.jsx(ye,{size:14})," ",h.techSignature?"Laudo Assinado":"Assinar Laudo T√©cnico"]})})]})}),"financial"===f&&C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[C.jsxs("div",{className:"md:col-span-2 space-y-4 md:space-y-6",children:[C.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl border border-slate-700/50",children:[C.jsxs("label",{className:"text-xs text-blue-300 font-bold flex items-center gap-2 mb-2 md:mb-4 uppercase tracking-wider",children:[C.jsx(we,{size:14})," Adicionar Servi√ßo (Soma ao Total)"]}),C.jsxs("div",{className:"relative",children:[C.jsxs("select",{className:"w-full bg-slate-900 border border-slate-700 rounded-xl p-3 md:p-4 text-sm text-slate-300 focus:outline-none focus:border-blue-500 appearance-none cursor-pointer hover:bg-slate-800 transition-colors",onChange:e=>{e.target.value&&((e=>{const t=st.find(t=>t.id===e);t&&h&&(m(e=>{if(!e)return null;const n=(e.partsCost||0)+t.partsCost,s=(e.serviceCost||0)+t.serviceCost,o=`\n+ ${t.label}: ${t.description}`,i=(e.technicalObservation||"")+o;return{...e,partsCost:n,serviceCost:s,technicalObservation:i}}),i("Adicionado",`${t.label} somado ao or√ßamento.`,"success"))})(e.target.value),e.target.value="")},value:"",children:[C.jsx("option",{value:"",disabled:!0,children:"Selecione para adicionar..."}),st.map(e=>C.jsxs("option",{value:e.id,children:[e.label," (+ R$ ",(e.serviceCost+e.partsCost).toFixed(2),")"]},e.id))]}),C.jsx(W,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none",size:16})]}),C.jsx("p",{className:"text-[10px] text-slate-500 mt-2 ml-1",children:"* Ao selecionar, o valor √© somado aos custos atuais e o item √© adicionado ao laudo."})]}),C.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl border border-slate-700/50",children:[C.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wider mb-4",children:"Composi√ß√£o de Custos"}),C.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block",children:"Pe√ßas / Hardware"}),C.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 border border-slate-700 rounded-xl p-3 focus-within:border-blue-500 transition-colors",children:[C.jsx("span",{className:"text-slate-500 font-semibold",children:"R$"}),C.jsx("input",{type:"text",inputMode:"numeric",className:"bg-transparent w-full focus:outline-none text-white font-mono font-bold",value:V(h.partsCost),onChange:e=>H("partsCost",e.target.value)})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block",children:"M√£o de Obra"}),C.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 border border-slate-700 rounded-xl p-3 focus-within:border-blue-500 transition-colors",children:[C.jsx("span",{className:"text-slate-500 font-semibold",children:"R$"}),C.jsx("input",{type:"text",inputMode:"numeric",className:"bg-transparent w-full focus:outline-none text-white font-mono font-bold",value:V(h.serviceCost),onChange:e=>H("serviceCost",e.target.value)})]})]})]})]})]}),C.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl border border-slate-700/50 bg-gradient-to-b from-slate-800 to-slate-900 flex flex-col justify-between",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-6",children:"Resumo do Or√ßamento"}),C.jsxs("div",{className:"space-y-3 mb-6",children:[C.jsxs("div",{className:"flex justify-between text-sm text-slate-400",children:[C.jsx("span",{children:"Pe√ßas"}),C.jsxs("span",{children:["R$ ",V(h.partsCost)]})]}),C.jsxs("div",{className:"flex justify-between text-sm text-slate-400",children:[C.jsx("span",{children:"Servi√ßo"}),C.jsxs("span",{children:["R$ ",V(h.serviceCost)]})]}),C.jsx("div",{className:"h-px bg-slate-700 my-2"}),C.jsxs("div",{className:"flex justify-between text-xl font-black text-white",children:[C.jsx("span",{children:"Total"}),C.jsxs("span",{className:"text-green-400",children:["R$ ",V((h.serviceCost||0)+(h.partsCost||0))]})]})]}),C.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg border border-slate-700/50 mb-4",children:[C.jsxs("label",{className:"text-xs text-yellow-500 font-bold flex items-center gap-2 mb-1",children:[C.jsx(z,{size:12})," Validade"]}),C.jsx("input",{type:"date",className:"bg-transparent text-white text-sm focus:outline-none w-full font-mono",value:new Date(h.budgetExpiryDate||Date.now()).toISOString().split("T")[0],onChange:e=>{e.target.value&&F("budgetExpiryDate",new Date(e.target.value).getTime())}})]})]}),C.jsxs("div",{className:"text-[10px] text-slate-500 text-center leading-relaxed",children:["Em caso de recusa, ser√° cobrada a taxa de diagn√≥stico de ",C.jsxs("span",{className:"text-slate-300 font-bold",children:["R$ ",V(r)]}),"."]})]})]}),"chat"===f&&C.jsxs("div",{className:"flex flex-col h-[400px] md:h-[500px] glass-panel rounded-2xl border border-slate-700/50 overflow-hidden",children:[C.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-900/50 custom-scrollbar",children:[0===h.chatHistory.length&&C.jsxs("div",{className:"text-center text-slate-500 mt-20",children:[C.jsx(xe,{size:40,className:"mx-auto mb-2 opacity-50"}),C.jsx("p",{className:"text-sm",children:"Nenhuma mensagem registrada."})]}),(h.chatHistory||[]).map(e=>C.jsxs("div",{className:"flex flex-col "+("tech"===e.sender?"items-end":"items-start"),children:[C.jsx("div",{className:"max-w-[80%] p-3 rounded-2xl text-sm "+("tech"===e.sender?"bg-blue-600 text-white rounded-br-none":"system"===e.sender?"bg-slate-700/50 text-slate-400 text-xs italic border border-slate-700":"bg-slate-700 text-slate-200 rounded-bl-none"),children:e.message}),C.jsx("span",{className:"text-[10px] text-slate-600 mt-1 px-1",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},e.id))]}),C.jsxs("form",{onSubmit:e=>{e.preventDefault(),x.trim()&&(m(e=>e?{...e,chatHistory:[...e.chatHistory,{id:`msg-${Date.now()}`,sender:"tech",message:x,timestamp:Date.now()}]}:null),b(""))},className:"p-3 bg-slate-800 border-t border-white/5 flex gap-2",children:[C.jsx("input",{className:"flex-1 bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-blue-500",value:x,onChange:e=>b(e.target.value),placeholder:"Digite uma mensagem..."}),C.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-500 w-12 flex items-center justify-center rounded-xl text-white transition-colors",children:C.jsx(Ce,{size:20})})]})]})]})]}),C.jsxs("div",{className:"flex-none p-4 bg-slate-900/90 backdrop-blur-md border-t border-white/10 flex flex-col md:flex-row justify-end gap-3 z-20",children:[h.columnId===_.Entry&&C.jsxs("button",{onClick:async()=>{if(h&&!U){if(!Z())return;L(!0);try{s({...h,columnId:_.Approval}),t()}finally{L(!1)}}},disabled:U,className:"w-full md:w-auto px-6 py-3 bg-yellow-600 hover:bg-yellow-500 text-white rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-yellow-900/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[C.jsx(Ue,{size:18})," ",C.jsx("span",{className:"md:inline",children:"Enviar Aprova√ß√£o"})]}),h.columnId===_.Execution&&C.jsxs("button",{onClick:async()=>{if(h&&!U&&Z()){if(!h.technicalObservation||h.technicalObservation.length<10)return i("Laudo Obrigat√≥rio","Preencha o laudo t√©cnico antes de concluir.","error"),void g("technical");if(!h.techSignature)return i("Assinatura Obrigat√≥ria","O t√©cnico respons√°vel deve assinar para concluir.","error"),g("technical"),void R(!0);L(!0);try{s({...h,columnId:_.Done,chatHistory:[...h.chatHistory,{id:`sys-${Date.now()}`,sender:"system",message:"üõ†Ô∏è Servi√ßo conclu√≠do.",timestamp:Date.now()}]}),t()}finally{L(!1)}}},disabled:U,className:"w-full md:w-auto px-6 py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-green-900/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[C.jsx(X,{size:18})," ",C.jsx("span",{className:"md:inline",children:"Concluir"})]}),C.jsx("button",{onClick:async()=>{if(h&&!U){if(!Z())return;L(!0);try{s(h),t()}finally{L(!1)}}},disabled:U,className:"w-full md:w-auto px-8 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold shadow-lg shadow-blue-900/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:U?"Salvando...":"Salvar"})]})]})]})]})},Tl=({tasks:e,month:t,stats:n,onReady:s})=>{const[o,i]=t.split("-"),r=new Date(parseInt(o),parseInt(i)-1).toLocaleDateString("pt-BR",{month:"long",year:"numeric"}),a=l.useRef(s);return l.useEffect(()=>{a.current=s},[s]),l.useEffect(()=>{const e=setTimeout(()=>{a.current()},1500);return()=>clearTimeout(e)},[]),C.jsxs("div",{id:"monthly-report-root",className:"bg-white text-black p-10 max-w-[800px] mx-auto min-h-screen font-sans relative",children:[C.jsx("style",{children:"\n                .report-table { width: 100%; border-collapse: collapse; font-size: 12px; }\n                .report-table thead { display: table-header-group; }\n                .report-table tr { page-break-inside: avoid; break-inside: avoid; }\n                .report-table th { \n                    background-color: #0f172a; \n                    color: white; \n                    padding: 12px 10px; \n                    text-transform: uppercase; \n                    font-size: 10px; \n                    font-weight: 800; \n                    border: 1px solid #0f172a;\n                    position: sticky;\n                    top: 0;\n                    z-index: 50;\n                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n                }\n                .report-table td { padding: 8px; border: 1px solid #e2e8f0; }\n                .report-header { border-bottom: 2px solid #0f172a; padding-bottom: 20px; margin-bottom: 30px; }\n                \n                @media print {\n                   .report-table th { position: static; box-shadow: none; }\n                   .report-table thead { display: table-header-group; }\n                }\n            "}),C.jsxs("div",{className:"report-header flex justify-between items-end",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight text-slate-900",children:"Relat√≥rio Mensal"}),C.jsxs("p",{className:"text-sm text-slate-500 uppercase font-bold mt-2 flex items-center gap-2",children:[C.jsx(z,{size:14})," Per√≠odo: ",r]})]}),C.jsxs("div",{className:"text-right text-xs text-slate-600 leading-relaxed",children:[C.jsx("h2",{className:"font-bold text-base text-slate-900",children:ze}),C.jsxs("p",{children:["CNPJ: ",Be]}),C.jsx("p",{children:Je}),C.jsxs("p",{children:[Ye," | ",We]})]})]}),C.jsxs("div",{className:"mb-10",children:[C.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500 mb-3 border-b border-slate-200 pb-1",children:"Resumo Financeiro"}),C.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[C.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[C.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold tracking-wide mb-1",children:"Faturamento Bruto"}),C.jsxs("p",{className:"text-xl font-black text-slate-900",children:["R$ ",n.totalRevenue.toFixed(2)]})]}),C.jsxs("div",{className:"p-4 border border-red-100 rounded-lg bg-red-50",children:[C.jsx("p",{className:"text-[10px] uppercase text-red-400 font-bold tracking-wide mb-1",children:"Custo Pe√ßas"}),C.jsxs("p",{className:"text-xl font-black text-red-700",children:["R$ ",n.totalPartsCost.toFixed(2)]})]}),C.jsxs("div",{className:"p-4 border border-green-100 rounded-lg bg-green-50",children:[C.jsx("p",{className:"text-[10px] uppercase text-green-500 font-bold tracking-wide mb-1",children:"Lucro Servi√ßos"}),C.jsxs("p",{className:"text-xl font-black text-green-700",children:["R$ ",n.totalServiceRevenue.toFixed(2)]})]}),C.jsxs("div",{className:"p-4 border border-blue-100 rounded-lg bg-blue-50",children:[C.jsx("p",{className:"text-[10px] uppercase text-blue-400 font-bold tracking-wide mb-1",children:"Total Servi√ßos"}),C.jsxs("p",{className:"text-xl font-black text-blue-700",children:[n.completedServices," ",C.jsxs("span",{className:"text-xs text-blue-400 font-normal",children:["/ ",n.totalServices]})]})]})]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500 mb-3 border-b border-slate-200 pb-1",children:"Detalhamento de Servi√ßos"}),C.jsxs("table",{className:"report-table",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{className:"text-left w-[15%]",children:"Data"}),C.jsx("th",{className:"text-left w-[15%]",children:"O.S."}),C.jsx("th",{className:"text-left w-[30%]",children:"Cliente / Equipamento"}),C.jsx("th",{className:"text-right w-[13%]",children:"M√£o de Obra"}),C.jsx("th",{className:"text-right w-[13%]",children:"Pe√ßas"}),C.jsx("th",{className:"text-right w-[14%]",children:"Total"})]})}),C.jsxs("tbody",{children:[0===e.length&&C.jsx("tr",{children:C.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-400 italic bg-slate-50",children:"Nenhum servi√ßo registrado neste per√≠odo."})}),e.map((e,t)=>{var n,s;return C.jsxs("tr",{className:t%2==0?"bg-white":"bg-slate-50/50",children:[C.jsx("td",{children:new Date(e.createdAt).toLocaleDateString()}),C.jsx("td",{className:"font-mono font-bold text-slate-700",children:e.osNumber}),C.jsxs("td",{children:[C.jsx("div",{className:"font-bold text-slate-900",children:e.clientName}),C.jsx("div",{className:"text-slate-500 text-[10px] truncate max-w-[200px]",children:e.equipment})]}),C.jsxs("td",{className:"text-right text-slate-600",children:["R$ ",null==(n=e.serviceCost)?void 0:n.toFixed(2)]}),C.jsxs("td",{className:"text-right text-slate-600",children:["R$ ",null==(s=e.partsCost)?void 0:s.toFixed(2)]}),C.jsxs("td",{className:"text-right font-bold text-slate-900 bg-slate-100/50",children:["R$ ",((e.serviceCost||0)+(e.partsCost||0)).toFixed(2)]})]},e.id)})]}),C.jsx("tfoot",{children:C.jsxs("tr",{className:"bg-slate-900 text-white font-bold",children:[C.jsx("td",{colSpan:3,className:"text-right uppercase text-[10px] tracking-wider border-none",children:"TOTAIS DO PER√çODO:"}),C.jsxs("td",{className:"text-right border-none border-t border-slate-700",children:["R$ ",n.totalServiceRevenue.toFixed(2)]}),C.jsxs("td",{className:"text-right border-none border-t border-slate-700",children:["R$ ",n.totalPartsCost.toFixed(2)]}),C.jsxs("td",{className:"text-right border-none border-t border-slate-700 text-green-400",children:["R$ ",n.totalRevenue.toFixed(2)]})]})})]})]}),C.jsxs("div",{className:"mt-12 pt-4 border-t border-slate-200 flex justify-between items-center text-[9px] text-slate-400 uppercase tracking-widest",children:[C.jsx("span",{children:"Sistema AINFOTECH v2.0"}),C.jsxs("span",{children:["Gerado em ",(new Date).toLocaleString()]})]})]})},_l=({active:e,payload:t,label:n})=>e&&t&&t.length?C.jsxs("div",{className:"bg-slate-900 border border-slate-700 p-3 rounded-lg shadow-xl text-xs",children:[C.jsx("p",{className:"font-bold text-slate-200 mb-2",children:n}),t.map(e=>C.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[C.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),C.jsxs("span",{className:"text-slate-400 capitalize",children:["concluidos"===e.name?"Conclu√≠dos":"Ativos",":"]}),C.jsx("span",{className:"font-bold text-white ml-auto",children:e.value})]},e.name))]}):null,Ol=({tasks:e,currentFee:t,onUpdateFee:n})=>{const[s,o]=a.useState((new Date).toISOString().slice(0,7)),[i,r]=a.useState(!1),[l,y]=a.useState(t.toString()),E=e.filter(e=>{if(!e.createdAt)return!1;const t=new Date(e.createdAt),[n,o]=s.split("-").map(Number);return t.getFullYear()===n&&t.getMonth()+1===o}),w=E.filter(e=>e.columnId===_.Done||e.columnId===_.Execution).reduce((e,t)=>e+(t.serviceCost||0)+(t.partsCost||0),0),N=E.filter(e=>e.columnId===_.Approval).reduce((e,t)=>e+(t.serviceCost||0)+(t.partsCost||0),0),A=E.reduce((e,t)=>e+(t.partsCost||0),0),S=E.reduce((e,t)=>e+(t.serviceCost||0),0),I=E.length,j=E.filter(e=>e.columnId===_.Done).length,T=E.filter(e=>e.columnId===_.Execution||e.columnId===_.Entry||e.columnId===_.Approval).length,O=I>0?w/(j+T):0,R={totalRevenue:w,totalPartsCost:A,totalServiceRevenue:S,totalServices:I,completedServices:j},k=a.useMemo(()=>{const e={[_.Entry]:0,[_.Approval]:0,[_.Execution]:0,[_.Done]:0};return E.forEach(t=>{void 0!==e[t.columnId]&&e[t.columnId]++}),Object.keys(e).map(t=>{var n;return{name:(null==(n=tt.find(e=>e.id===t))?void 0:n.title)||t,value:e[t],color:t===_.Done?"#10b981":t===_.Execution?"#3b82f6":t===_.Approval?"#eab308":"#64748b"}}).filter(e=>e.value>0)},[E]),P=a.useMemo(()=>{const t={};e.forEach(e=>{if(!e.createdAt)return;const n=new Date(e.createdAt),s=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,o=n.toLocaleDateString("pt-BR",{month:"short",year:"2-digit"});t[s]||(t[s]={name:o,concluidos:0,ativos:0,sortKey:n.getTime()}),e.columnId===_.Done?t[s].concluidos++:t[s].ativos++});const n=Object.values(t).sort((e,t)=>e.sortKey-t.sortKey);return 0===n.length?[]:n.slice(-6)},[e]);return C.jsxs("div",{className:"p-6 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20 relative",children:[i&&C.jsxs("div",{className:"fixed inset-0 z-[99999] bg-white overflow-y-auto",children:[C.jsxs("div",{className:"fixed top-0 left-0 w-full h-full flex flex-col items-center justify-center bg-white/95 z-[100000]",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mb-4"}),C.jsx("p",{className:"font-bold text-slate-900 mb-4",children:"Gerando Relat√≥rio Mensal..."}),C.jsxs("button",{onClick:()=>r(!1),className:"flex items-center gap-2 px-6 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-full font-bold transition-colors",children:[C.jsx(He,{size:18})," Cancelar"]})]}),C.jsx(Tl,{tasks:E,month:s,stats:R,onReady:async()=>{const e=document.getElementById("monthly-report-root");if(!e)return void r(!1);const t=window.html2pdf;if(void 0===t)return alert("Biblioteca de PDF n√£o carregada. Recarregue a p√°gina."),void r(!1);const n={margin:10,filename:`Relatorio-${s}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:1.5,useCORS:!0,backgroundColor:"#ffffff",logging:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};try{await t().set(n).from(e).save()}catch(o){alert(`Erro ao gerar relat√≥rio: ${o.message}`)}finally{r(!1)}}})]}),C.jsxs("div",{className:"glass-panel p-6 md:p-8 rounded-2xl relative overflow-hidden flex flex-col gap-6",children:[C.jsx("div",{className:"absolute top-0 right-0 p-32 bg-blue-600/10 blur-3xl rounded-full pointer-events-none"}),C.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 relative z-10 border-b border-white/10 pb-6",children:[C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[C.jsx(H,{className:"text-blue-400",size:28}),C.jsx("h1",{className:"text-3xl font-bold text-white",children:ze})]}),C.jsx("p",{className:"text-slate-400 text-sm max-w-xl",children:Ke})]}),C.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[C.jsxs("div",{className:"bg-slate-900/80 p-1.5 rounded-xl border border-slate-700 flex items-center gap-2",children:[C.jsx(z,{className:"text-slate-400 ml-2",size:18}),C.jsx("input",{type:"month",value:s,onChange:e=>o(e.target.value),className:"bg-transparent text-white text-sm font-bold focus:outline-none p-2 rounded cursor-pointer [&::-webkit-calendar-picker-indicator]:invert"})]}),C.jsxs("button",{onClick:()=>{r(!0)},disabled:i,className:"bg-white text-slate-900 hover:bg-slate-200 px-6 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg shadow-white/5 active:scale-95 disabled:opacity-70 disabled:cursor-wait",children:[i?C.jsx(ae,{className:"animate-bounce",size:20}):C.jsx(Ne,{size:20}),C.jsx("span",{children:"Imprimir Relat√≥rio"})]})]})]}),C.jsxs("div",{className:"bg-slate-900/30 p-4 rounded-xl border border-slate-700/30 text-xs flex flex-wrap gap-4 text-slate-400",children:[C.jsxs("span",{children:[C.jsx("strong",{className:"text-slate-200",children:"CNPJ:"})," ",Be]}),C.jsx("span",{className:"hidden md:inline",children:"|"}),C.jsxs("span",{children:[C.jsx("strong",{className:"text-slate-200",children:"Resp:"})," ",$e]}),C.jsx("span",{className:"hidden md:inline",children:"|"}),C.jsxs("span",{children:[C.jsx("strong",{className:"text-slate-200",children:"Tel:"})," ",We]})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[C.jsx("div",{className:"glass-panel p-5 rounded-xl border-l-4 border-l-green-500 flex flex-col justify-between",children:C.jsxs("div",{className:"flex justify-between items-start mb-4",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-slate-400 text-xs uppercase font-bold tracking-wider",children:"Faturamento (M√™s)"}),C.jsxs("h3",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",w.toFixed(2)]})]}),C.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg text-green-400",children:C.jsx(te,{size:20})})]})}),C.jsx("div",{className:"glass-panel p-5 rounded-xl border-l-4 border-l-yellow-500 flex flex-col justify-between",children:C.jsxs("div",{className:"flex justify-between items-start mb-4",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-slate-400 text-xs uppercase font-bold tracking-wider",children:"Em Aprova√ß√£o"}),C.jsxs("h3",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",N.toFixed(2)]})]}),C.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-lg text-yellow-400",children:C.jsx(Z,{size:20})})]})}),C.jsx("div",{className:"glass-panel p-5 rounded-xl border-l-4 border-l-blue-500 flex flex-col justify-between",children:C.jsxs("div",{className:"flex justify-between items-start mb-4",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-slate-400 text-xs uppercase font-bold tracking-wider",children:"Ticket M√©dio"}),C.jsxs("h3",{className:"text-2xl font-bold text-white mt-1",children:["R$ ",O.toFixed(2)]})]}),C.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-400",children:C.jsx(Me,{size:20})})]})}),C.jsx("div",{className:"glass-panel p-5 rounded-xl border-l-4 border-l-purple-500 flex flex-col justify-between",children:C.jsxs("div",{className:"flex justify-between items-start mb-4",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-slate-400 text-xs uppercase font-bold tracking-wider",children:"Total Servi√ßos"}),C.jsx("h3",{className:"text-2xl font-bold text-white mt-1",children:I})]}),C.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg text-purple-400",children:C.jsx(Fe,{size:20})})]})}),C.jsx("div",{className:"glass-panel p-5 rounded-xl border-l-4 border-l-slate-500 flex flex-col justify-between bg-slate-800/50",children:C.jsxs("div",{className:"flex flex-col h-full",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-2 text-slate-300",children:[C.jsx(Ie,{size:16}),C.jsx("p",{className:"text-xs uppercase font-bold tracking-wider",children:"Taxa Diagn√≥stico"})]}),C.jsxs("div",{className:"flex items-center gap-2 mt-auto",children:[C.jsx("span",{className:"text-slate-500 font-bold",children:"R$"}),C.jsx("input",{type:"number",value:l,onChange:e=>y(e.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded p-1 text-white font-bold",step:"5"}),C.jsx("button",{onClick:()=>{const e=parseFloat(l);!isNaN(e)&&e>=0&&n(e)},className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-xs font-bold transition-colors",children:"OK"})]})]})})]}),C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[C.jsxs("div",{className:"lg:col-span-2 glass-panel p-6 rounded-xl relative overflow-hidden",children:[C.jsx("div",{className:"flex items-center justify-between mb-6",children:C.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[C.jsx(U,{size:18,className:"text-blue-400"})," Evolu√ß√£o de Servi√ßos"]})}),C.jsx("div",{className:"h-[300px] w-full",children:C.jsx(c,{width:"100%",height:"100%",children:C.jsxs(d,{data:P,margin:{top:10,right:10,left:0,bottom:0},children:[C.jsxs("defs",{children:[C.jsxs("linearGradient",{id:"colorConcluidos",x1:"0",y1:"0",x2:"0",y2:"1",children:[C.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),C.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),C.jsxs("linearGradient",{id:"colorAtivos",x1:"0",y1:"0",x2:"0",y2:"1",children:[C.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),C.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})]}),C.jsx(u,{strokeDasharray:"3 3",stroke:"#334155",vertical:!1}),C.jsx(p,{dataKey:"name",stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1,dy:10}),C.jsx(h,{stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),C.jsx(m,{content:C.jsx(_l,{}),cursor:{stroke:"#475569",strokeWidth:1}}),C.jsx(f,{iconType:"circle",wrapperStyle:{paddingTop:"20px"}}),C.jsx(g,{type:"monotone",dataKey:"concluidos",name:"Conclu√≠dos",stroke:"#10b981",strokeWidth:3,fillOpacity:1,fill:"url(#colorConcluidos)"}),C.jsx(g,{type:"monotone",dataKey:"ativos",name:"Novos / Ativos",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorAtivos)"})]})})})]}),C.jsxs("div",{className:"glass-panel p-6 rounded-xl relative overflow-hidden flex flex-col",children:[C.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[C.jsx(J,{size:18,className:"text-purple-400"})," Distribui√ß√£o Atual"]}),C.jsxs("div",{className:"flex-1 min-h-[250px] relative",children:[C.jsx(c,{width:"100%",height:"100%",children:C.jsxs(x,{children:[C.jsx(b,{data:k,innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:k.map((e,t)=>C.jsx(v,{fill:e.color,stroke:"rgba(0,0,0,0.1)"},`cell-${t}`))}),C.jsx(m,{contentStyle:{backgroundColor:"#0f172a",borderColor:"#334155",borderRadius:"8px",color:"#f8fafc"},itemStyle:{color:"#f8fafc"}}),C.jsx(f,{verticalAlign:"bottom",height:36,iconType:"circle"})]})}),C.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-[60%] text-center pointer-events-none",children:[C.jsx("span",{className:"text-3xl font-bold text-white",children:E.length}),C.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest",children:"Total"})]})]})]})]})]})},Rl=({onTasksGenerated:e})=>{const[t,n]=a.useState(""),[s,o]=a.useState(!1),[i,r]=a.useState(!1),[l,c]=a.useState(null),d=Il.isConfigured();return C.jsxs("div",{className:"fixed bottom-6 right-6 z-40 flex flex-col items-end gap-4",children:[i&&C.jsxs("div",{className:"w-80 md:w-96 glass-panel p-4 rounded-xl shadow-2xl animate-in slide-in-from-bottom-5 fade-in duration-200 border border-white/10",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-3 text-blue-400",children:[C.jsx(G,{size:20}),C.jsx("h3",{className:"font-medium text-white",children:"Planejador de Projetos de IA"})]}),d?C.jsxs(C.Fragment,{children:[C.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Descreva o objetivo do seu projeto e eu criarei um quadro Kanban para voc√™."}),l&&C.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-3",children:C.jsx("p",{className:"text-xs text-red-300",children:l})}),C.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),t.trim()){c(null),o(!0);try{const s=(await Il.generateTasksFromGoal(t)).map((e,t)=>({id:`gen-${Date.now()}-${t}`,osNumber:`AI-${Math.floor(1e4*Math.random())}`,title:e.title,description:e.description,clientName:"Sistema IA",clientPhone:"",equipment:"Geral",priority:e.priority||T.Medium,columnId:_.Entry,subtasks:[],checklist:nt.map(e=>({...e})),chatHistory:[],isApproved:!1,createdAt:Date.now(),tags:e.tags||["Gerado por IA"],serviceCost:0,partsCost:0,technicalObservation:"",photos:[]}));e(s),n(""),r(!1)}catch(i){c(i.message||"Ocorreu um erro ao gerar as tarefas.")}finally{o(!1)}}},children:[C.jsx("textarea",{value:t,onChange:e=>n(e.target.value),placeholder:"Por exemplo, lan√ßar uma campanha de marketing para uma nova marca de caf√©...",className:"w-full bg-slate-900/50 border border-slate-700 rounded-lg p-3 text-sm text-slate-200 placeholder-slate-500 focus:outline-none focus:border-blue-500 min-h-[100px] resize-none mb-3"}),C.jsxs("div",{className:"flex justify-end gap-2",children:[C.jsx("button",{type:"button",onClick:()=>{r(!1),c(null)},className:"px-3 py-2 text-xs font-medium text-slate-400 hover:text-white transition-colors",children:"Cancelar"}),C.jsxs("button",{type:"submit",disabled:s||!t.trim(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-xs font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[s?C.jsx(he,{size:14,className:"animate-spin"}):C.jsx(_e,{size:14}),"Gerar tarefas"]})]})]})]}):C.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 text-center",children:[C.jsx(K,{className:"mx-auto mb-2 text-yellow-400",size:32}),C.jsx("p",{className:"text-sm text-yellow-300 font-medium mb-1",children:"IA n√£o configurada"}),C.jsx("p",{className:"text-xs text-slate-400",children:"O servi√ßo de IA requer uma chave de API v√°lida. Entre em contato com o administrador para configurar."})]})]}),C.jsxs("button",{onClick:()=>{r(!i),c(null)},className:"p-4 rounded-full shadow-lg transition-all hover:scale-105 active:scale-95 flex items-center gap-2 "+(i?"bg-slate-700 text-white":"bg-blue-600 text-white hover:bg-blue-500"),title:"Planejador de Projetos com IA","aria-label":"Abrir Planejador de Projetos com IA",children:[C.jsx(_e,{size:24}),!i&&C.jsx("span",{className:"font-semibold pr-2 hidden md:inline",children:"IA"})]})]})},kl=({onEnterSystem:e})=>C.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-200 font-sans selection:bg-blue-500/30 overflow-x-hidden",children:[C.jsx("nav",{className:"fixed top-0 w-full z-50 bg-slate-950/80 backdrop-blur-md border-b border-white/5",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"p-2 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-lg shadow-lg shadow-blue-500/20",children:C.jsx(Fe,{className:"text-white",size:24})}),C.jsxs("div",{children:[C.jsx("h1",{className:"text-xl font-bold text-white tracking-tight",children:"AINFOTECH"}),C.jsx("p",{className:"text-[10px] text-blue-400 font-medium uppercase tracking-widest",children:"Aracaju - Sergipe"})]})]}),C.jsxs("button",{onClick:e,className:"hidden md:flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-white px-5 py-2.5 rounded-full font-medium transition-all border border-slate-700 hover:border-slate-500",children:["√Årea do Cliente / T√©cnico ",C.jsx(L,{size:16})]})]})}),C.jsxs("section",{className:"relative pt-32 pb-20 md:pt-48 md:pb-32 px-6 overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-blue-600/20 rounded-full blur-[120px] pointer-events-none"}),C.jsxs("div",{className:"max-w-5xl mx-auto text-center relative z-10",children:[C.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-900/30 border border-blue-500/30 text-blue-300 text-xs font-bold uppercase tracking-wider mb-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[C.jsx(Re,{size:12,fill:"currentColor"})," Especialistas em Tecnologia em Aracaju"]}),C.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tight mb-6 leading-tight animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100",children:["Solu√ß√µes para Empresas e ",C.jsx("br",{}),C.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-400",children:"Atendimento Domiciliar"})]}),C.jsxs("p",{className:"text-lg md:text-xl text-slate-400 max-w-2xl mx-auto mb-10 leading-relaxed animate-in fade-in slide-in-from-bottom-6 duration-700 delay-200",children:["Auditoria corporativa, otimiza√ß√£o de fluxo de trabalho e manuten√ß√£o especializada. Visita t√©cnica em Aracaju com ",C.jsx("strong",{children:"isen√ß√£o de taxa"})," na realiza√ß√£o do servi√ßo."]}),C.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 animate-in fade-in slide-in-from-bottom-6 duration-700 delay-300",children:[C.jsx("button",{onClick:e,className:"w-full md:w-auto px-8 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-full font-bold text-lg shadow-xl shadow-blue-900/20 transition-all hover:scale-105 active:scale-95",children:"Consultar O.S."}),C.jsxs("a",{href:"https://wa.me/5579999080924?text=Ol%C3%A1%2C%20gostaria%20de%20agendar%20uma%20visita%20ou%20auditoria.",target:"_blank",rel:"noreferrer",className:"w-full md:w-auto px-8 py-4 bg-slate-800 hover:bg-slate-700 text-white rounded-full font-bold text-lg border border-slate-700 transition-all flex items-center justify-center gap-2",children:[C.jsx(xe,{size:20})," Agendar Visita"]})]}),C.jsxs("div",{className:"mt-8 text-xs text-slate-500 animate-in fade-in duration-1000 delay-500",children:["üìç ",Je]})]})]}),C.jsx("section",{className:"py-20 bg-slate-900/30 border-y border-white/5 relative",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Nossas Especialidades"}),C.jsx("p",{className:"text-slate-400",children:"Atendemos em nossa loja no In√°cio Barbosa ou no seu local (sob consulta)."})]}),C.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:ot.map((e,t)=>C.jsxs("div",{className:"p-6 bg-slate-800/40 border border-slate-700/50 rounded-2xl hover:bg-slate-800 transition-colors group",children:[C.jsx("div",{className:"w-12 h-12 bg-blue-900/30 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300",children:C.jsx(e.icon,{className:"text-blue-400",size:24})}),C.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:e.title}),C.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:e.desc})]},t))})]})}),C.jsx("section",{className:"py-20 px-6",children:C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Servi√ßos Padronizados"}),C.jsx("p",{className:"text-slate-400",children:"Transpar√™ncia total. Taxa de diagn√≥stico isenta ao aprovar o servi√ßo."})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[C.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8 relative hover:border-slate-600 transition-colors",children:[C.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Visita T√©cnica"}),C.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"Diagn√≥stico em Domic√≠lio (Aracaju)"}),C.jsxs("div",{className:"text-4xl font-black text-white mb-6",children:["R$ 70",C.jsx("span",{className:"text-lg text-slate-500 font-medium",children:",00"})]}),C.jsxs("ul",{className:"space-y-3 mb-8",children:[C.jsxs("li",{className:"flex items-center gap-3 text-sm text-slate-300",children:[C.jsx(X,{className:"text-green-500",size:16})," Isento se realizar o servi√ßo"]}),C.jsxs("li",{className:"flex items-center gap-3 text-sm text-slate-300",children:[C.jsx(X,{className:"text-green-500",size:16})," Comodidade e Seguran√ßa"]}),C.jsxs("li",{className:"flex items-center gap-3 text-sm text-slate-300",children:[C.jsx(X,{className:"text-green-500",size:16})," Atendimento Especializado"]})]}),C.jsx("a",{href:"https://wa.me/5579999080924?text=Quero%20agendar%20uma%20visita%20t%C3%A9cnica.",target:"_blank",rel:"noreferrer",className:"block w-full text-center py-3 rounded-xl border border-slate-700 text-white font-bold hover:bg-slate-800 transition-colors",children:"Agendar Agora"})]}),C.jsxs("div",{className:"bg-gradient-to-b from-blue-900/20 to-slate-900 border border-blue-500/30 rounded-3xl p-8 relative transform md:-translate-y-4 shadow-2xl",children:[C.jsx("div",{className:"absolute top-0 right-0 bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl rounded-tr-2xl",children:"EMPRESAS"}),C.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Auditoria Corporativa"}),C.jsx("p",{className:"text-blue-200 text-sm mb-6",children:"Otimiza√ß√£o de Fluxo e Redes"}),C.jsxs("div",{className:"space-y-4 mb-8",children:[C.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-2",children:[C.jsx("span",{className:"text-slate-300",children:"An√°lise de Rede"}),C.jsx("span",{className:"font-bold text-white",children:"Sob Consulta"})]}),C.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-2",children:[C.jsx("span",{className:"text-slate-300",children:"Manuten√ß√£o de Frota"}),C.jsx("span",{className:"font-bold text-white",children:"Contratos"})]}),C.jsx("p",{className:"text-xs text-slate-400 mt-2 italic",children:"Melhore o desempenho dos computadores da sua empresa e aumente a produtividade da equipe."})]}),C.jsx("a",{href:"https://wa.me/5579999080924?text=Tenho%20interesse%20em%20auditoria%20para%20minha%20empresa.",target:"_blank",rel:"noreferrer",className:"block w-full text-center py-3 rounded-xl bg-blue-600 text-white font-bold hover:bg-blue-500 transition-colors shadow-lg shadow-blue-900/30",children:"Falar com Consultor"})]}),C.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-8 relative hover:border-slate-600 transition-colors",children:[C.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Servi√ßos em Loja"}),C.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"Traga seu equipamento"}),C.jsxs("div",{className:"space-y-4 mb-8",children:[C.jsxs("div",{className:"flex justify-between items-center border-b border-slate-800 pb-2",children:[C.jsx("span",{className:"text-slate-300 text-sm",children:"Formata√ß√£o"}),C.jsx("span",{className:"font-bold text-white text-xs",children:"R$ 150,00 + backup"})]}),C.jsxs("div",{className:"flex justify-between items-center border-b border-slate-800 pb-2",children:[C.jsx("span",{className:"text-slate-300 text-sm",children:"Reparo de TV"}),C.jsx("span",{className:"font-bold text-white text-xs",children:"A partir de R$ 180"})]}),C.jsx("div",{className:"flex justify-between items-center pb-2",children:C.jsx("span",{className:"text-slate-300 text-xs italic",children:"*N√£o retiramos TVs. Trazer √† loja."})})]}),C.jsx("button",{onClick:e,className:"w-full py-3 rounded-xl border border-slate-700 text-white font-bold hover:bg-slate-800 transition-colors",children:"Ver Status O.S."})]})]})]})}),C.jsxs("footer",{className:"bg-slate-950 border-t border-white/5 pt-16 pb-8 px-6",children:[C.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8 mb-12",children:[C.jsxs("div",{className:"col-span-1 md:col-span-2",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[C.jsx(Fe,{className:"text-blue-500"}),C.jsx("h2",{className:"text-xl font-bold text-white",children:"AINFOTECH"})]}),C.jsx("p",{className:"text-slate-400 text-sm max-w-sm mb-6",children:"Solu√ß√µes profissionais em tecnologia. Transpar√™ncia, qualidade e garantia em todos os servi√ßos. Atendendo In√°cio Barbosa e toda Aracaju."}),C.jsxs("div",{className:"flex gap-4",children:[C.jsx("a",{href:"#",className:"p-2 bg-slate-900 rounded-lg hover:bg-blue-600 transition-colors text-white",children:C.jsx(ue,{size:20})}),C.jsx("a",{href:"https://wa.me/5579999080924",className:"p-2 bg-slate-900 rounded-lg hover:bg-green-600 transition-colors text-white",children:C.jsx(xe,{size:20})})]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-white font-bold mb-4",children:"Servi√ßos"}),C.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[C.jsx("li",{children:"Auditoria Corporativa"}),C.jsx("li",{children:"Visita T√©cnica Domiciliar"}),C.jsx("li",{children:"Venda e Instala√ß√£o de SSD"}),C.jsx("li",{children:"Reparo de Placas e TVs"})]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-white font-bold mb-4",children:"Contato"}),C.jsxs("ul",{className:"space-y-3 text-sm text-slate-400",children:[C.jsxs("li",{className:"flex items-start gap-3",children:[C.jsx(ge,{size:16,className:"mt-1 text-blue-500 shrink-0"}),Je]}),C.jsxs("li",{className:"flex items-center gap-3",children:[C.jsx(Ee,{size:16,className:"text-blue-500 shrink-0"}),We]}),C.jsxs("li",{className:"flex items-center gap-3",children:[C.jsx(Z,{size:16,className:"text-blue-500 shrink-0"}),"Seg - Sex: 08h √†s 18h"]})]})]})]}),C.jsxs("div",{className:"max-w-7xl mx-auto pt-8 border-t border-white/5 text-center text-xs text-slate-600",children:["¬© ",(new Date).getFullYear()," ",ze,". Todos os direitos reservados. CNPJ: ",Be]})]})]}),Pl=({toasts:e,removeToast:t})=>C.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-3 pointer-events-none",children:e.map(e=>C.jsx(Dl,{toast:e,onRemove:()=>t(e.id)},e.id))}),Dl=({toast:e,onRemove:t})=>{a.useEffect(()=>{const e=setTimeout(()=>{t()},5e3);return()=>clearTimeout(e)},[t]);const n={success:C.jsx(X,{size:20,className:"text-emerald-400"}),error:C.jsx(Q,{size:20,className:"text-red-400"}),warning:C.jsx(Ue,{size:20,className:"text-yellow-400"}),info:C.jsx(de,{size:20,className:"text-blue-400"})};return C.jsxs("div",{className:`pointer-events-auto w-80 p-4 rounded-xl border backdrop-blur-md shadow-xl flex gap-3 animate-in slide-in-from-right-full transition-all duration-300 ${{success:"bg-emerald-950/90 border-emerald-500/30",error:"bg-red-950/90 border-red-500/30",warning:"bg-yellow-950/90 border-yellow-500/30",info:"bg-blue-950/90 border-blue-500/30"}[e.type]}`,children:[C.jsx("div",{className:"flex-shrink-0 pt-0.5",children:n[e.type]}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h4",{className:"text-sm font-bold text-slate-100",children:e.title}),C.jsx("p",{className:"text-xs text-slate-300 mt-1 leading-relaxed",children:e.message})]}),C.jsx("button",{onClick:t,className:"flex-shrink-0 text-slate-500 hover:text-slate-300 transition-colors h-fit",children:C.jsx(He,{size:16})})]})},Ml=e=>{if(!e)throw new Error("Dados da tarefa inv√°lidos ou vazios.");let t=Array.isArray(e.tags)?[...e.tags]:[];const n=(e=>{if(!e)return Date.now();if("number"==typeof e)return e;const t=new Date(e).getTime();return isNaN(t)?Date.now():t})(e.created_at);let s=n+864e6;if(e.budget_expiry_date){const t=Number(e.budget_expiry_date);!isNaN(t)&&t>0&&(s=t)}return{id:e.id,osNumber:e.os_number||"S/N",title:e.title||"Sem T√≠tulo",description:e.description||"",clientName:e.client_name||"Cliente",clientPhone:e.client_phone||"",clientCpf:e.client_cpf||"",clientAddress:e.client_address||"",equipment:e.equipment||"Equipamento",serialNumber:e.serial_number||"",priority:e.priority||T.Medium,columnId:e.column_id||_.Entry,subtasks:Array.isArray(e.subtasks)?e.subtasks:[],checklist:Array.isArray(e.checklist)?e.checklist:[],chatHistory:Array.isArray(e.chat_history)?e.chat_history:[],signature:e.signature||void 0,techSignature:e.tech_signature||void 0,isApproved:!!e.is_approved,createdAt:n,tags:t,serviceCost:Number(e.service_cost)||0,partsCost:Number(e.parts_cost)||0,technicalObservation:e.technical_observation||"",photos:Array.isArray(e.photos)?e.photos:[],budgetExpiryDate:s}},Ul=e=>{const t=(e.tags||[]).filter(e=>"string"==typeof e&&""!==e.trim());return{os_number:e.osNumber,title:e.title,description:e.description,client_name:e.clientName,client_phone:e.clientPhone,client_cpf:e.clientCpf,client_address:e.clientAddress,equipment:e.equipment,serial_number:e.serialNumber,priority:e.priority,column_id:e.columnId,subtasks:e.subtasks||[],checklist:e.checklist||[],chat_history:e.chatHistory||[],signature:e.signature,tech_signature:e.techSignature,is_approved:e.isApproved,created_at:e.createdAt,tags:t,service_cost:e.serviceCost,parts_cost:e.partsCost,technical_observation:e.technicalObservation,photos:e.photos||[],budget_expiry_date:e.budgetExpiryDate}},Ll={async fetchTasks(){const{data:e,error:t}=await dt.from("tasks").select("*").order("created_at",{ascending:!0});if(t)throw new Error("Erro ao conectar com o servidor.");return(e||[]).map(Ml)},async fetchTaskByOS(e){const t=e.trim(),{data:n,error:s}=await dt.from("tasks").select("*").ilike("os_number",t).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(s)throw new Error("Erro ao buscar O.S.");return n?Ml(n):null},async createTask(e){const t=Ul(e);t.id&&delete t.id;const{data:n,error:s}=await dt.from("tasks").insert([t]).select().single();if(s)throw new Error(s.message);return Ml(n)},async updateTask(e){const t=Ul(e),{data:n,error:s}=await dt.from("tasks").update(t).eq("id",e.id).select().single();if(s)throw new Error(s.message);return Ml(n)},async deleteTask(e){const{error:t}=await dt.from("tasks").delete().eq("id",e);if(t)throw new Error(`Erro ao excluir: ${t.message}`)}},ql="localhost"!==window.location.hostname&&!window.location.hostname.includes("127.0.0.1"),Gl=!ql||"true"===localStorage.getItem("DEBUG_MODE"),Fl=console.log,Hl=console.error;ql&&!Gl&&(console.log=()=>{},console.warn=()=>{});const Vl=[];function zl(e,t){if(Gl)try{const n=t.map(e=>"object"==typeof e?JSON.stringify(e,(e,t)=>"auth"===e?"[Auth Object]":t):String(e)).join(" "),s=`[${(new Date).toLocaleTimeString()}] [${e}] ${n}`;Vl.push(s),Vl.length>50&&Vl.shift()}catch(n){}}function Bl(){const[e,t]=a.useState([]),[n,s]=a.useState(""),[o,i]=a.useState(Qe),[r,l]=a.useState(null),[c,d]=a.useState(null),[u,p]=a.useState("kanban"),[h,m]=a.useState(!0),[f,g]=a.useState(!1),[x,b]=a.useState(!1),[v,y]=a.useState([]),[E,w]=a.useState(null),[N,A]=a.useState(!1),[S,I]=a.useState(!1),[j,O]=a.useState(null),[R,k]=a.useState([]),P=(e,t,n="info")=>{const s=Math.random().toString(36).substring(7);k(o=>{const i=[...o,{id:s,title:e,message:t,type:n}];return i.length>5?i.slice(-5):i})},D=e=>{k(t=>t.filter(t=>t.id!==e))};a.useEffect(()=>{const e=localStorage.getItem("app_diagnostic_fee");if(e){const t=parseFloat(e);isNaN(t)||i(t)}},[]);a.useEffect(()=>{"admin"===r&&(async()=>{try{I(!0);const e=await Ll.fetchTasks();t(e)}catch(e){P("Erro de Carregamento","N√£o foi poss√≠vel carregar as tarefas.","error")}finally{I(!1)}})()},[r]),a.useEffect(()=>{const e=setInterval(()=>{(x||h)&&y([...Vl])},500);return()=>clearInterval(e)},[x,h]),a.useEffect(()=>{let e=!0;const{data:{subscription:n}}=dt.auth.onAuthStateChange((e,n)=>{"SIGNED_OUT"===e?(l(null),t([]),g(!1)):"SIGNED_IN"===e&&n&&(l("admin"),g(!0))});return(async()=>{try{const{data:t,error:n}=await dt.auth.getSession();e&&(null==t?void 0:t.session)&&(l("admin"),g(!0))}catch(t){}finally{e&&m(!1)}})(),()=>{e=!1,n.unsubscribe()}},[]);const M=()=>{l("admin"),P("Bem-vindo","Login de administrador realizado.","success")},U=async e=>{I(!0);try{const t=e.trim(),n=await Ll.fetchTaskByOS(t);n?(d(n),l("client")):P("N√£o Encontrada","N√∫mero de O.S. inv√°lido.","error")}catch(t){P("Erro",t.message,"error")}finally{I(!1)}},L=async()=>{if("admin"===r)try{await dt.auth.signOut()}catch(e){}l(null),d(null),t([]),p("kanban"),s(""),g(!1)},q=(e,t)=>{O(t),e.dataTransfer.effectAllowed="move"},G=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},F=async(e,n)=>{var s;if(e.preventDefault(),!j)return;const o=j;let i,r=[];t(e=>(r=[...e],i=e.find(e=>e.id===o),e.map(e=>e.id===o?{...e,columnId:n}:e))),await new Promise(e=>setTimeout(e,0));try{if(i){if(i.columnId!==n){const e=null==(s=tt.find(e=>e.id===n))?void 0:s.title;P("Tarefa Movida",`Para: ${e}`,"info")}if(i.id.startsWith("gen-")){const e=await Ll.createTask({...i,columnId:n});t(t=>t.map(t=>t.id===o?e:t))}else await Ll.updateTask({...i,columnId:n})}}catch(a){t(r),P("Erro ao Mover",a.message,"error")}O(null)},H=async n=>{var s;const o=e.find(e=>e.id===n.id),i=o&&o.columnId!==n.columnId;"client"===r&&(null==c?void 0:c.id)===n.id&&d(n),t(e=>e.map(e=>e.id===n.id?n:e));try{let e;if(n.id.startsWith("gen-"))e=await Ll.createTask(n),P("O.S. Gerada",`O.S. ${e.osNumber} criada com sucesso.`,"success");else if(e=await Ll.updateTask(n),i){const e=null==(s=tt.find(e=>e.id===n.columnId))?void 0:s.title;P("Status Atualizado",`Movido para: ${e}`,"info")}t(t=>t.map(t=>t.id===n.id?e:t))}catch(a){P("Erro ao Salvar",a.message,"error")}},V=async e=>{const n=Date.now(),s={id:"",osNumber:`OS-${n.toString().slice(-4)}${Math.floor(999*Math.random()).toString().padStart(3,"0")}`,title:"Nova Ordem de Servi√ßo",description:"",clientName:"Novo Cliente",clientPhone:"",equipment:"",serialNumber:"",priority:T.Medium,columnId:e,subtasks:[],checklist:[...nt],chatHistory:[],isApproved:!1,createdAt:n,tags:[],serviceCost:0,partsCost:0,technicalObservation:"",photos:[],budgetExpiryDate:n+24*Ze*60*60*1e3};I(!0);try{const e=await Ll.createTask(s);t(t=>[...t,e]),w(e),A(!0),P("O.S. Criada",`Ordem de servi√ßo ${e.osNumber} iniciada.`,"success")}catch(o){P("Erro",o.message,"error")}finally{I(!1)}},z=e=>{w(e),A(!0)},B=e.filter(e=>{if(!n)return!0;const t=n.toLowerCase();return e.title.toLowerCase().includes(t)||e.osNumber.toLowerCase().includes(t)||e.clientName.toLowerCase().includes(t)||e.equipment.toLowerCase().includes(t)});return h?C.jsxs("div",{className:"h-screen w-screen bg-slate-950 flex flex-col items-center justify-center text-white gap-4 relative",children:[C.jsx(he,{className:"animate-spin text-blue-500",size:48}),C.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Iniciando Sistema..."}),x&&C.jsx("div",{className:"absolute bottom-10 left-4 right-4 bg-black/90 p-4 rounded-lg border border-red-900 max-h-[200px] overflow-y-auto font-mono text-[10px] text-green-400",children:v.map((e,t)=>C.jsx("div",{children:e},t))})]}):r||f?"client"===r&&c?C.jsxs(C.Fragment,{children:[C.jsx(Pl,{toasts:R,removeToast:D}),C.jsx(mt,{task:c,onUpdate:H,onLogout:L,showToast:P,diagnosticFee:o})]}):!r&&f?C.jsxs(C.Fragment,{children:[C.jsx(Pl,{toasts:R,removeToast:D}),C.jsxs("button",{onClick:()=>g(!1),className:"fixed top-4 left-4 z-50 p-2 bg-slate-800/50 text-slate-300 hover:text-white rounded-lg flex items-center gap-2 transition-colors hover:bg-slate-700",children:[C.jsx(ce,{size:20})," ",C.jsx("span",{className:"text-sm font-medium",children:"Voltar ao In√≠cio"})]}),C.jsx(ut,{onAdminLogin:M,onClientLogin:U}),C.jsx("button",{onClick:()=>b(!x),className:"fixed bottom-2 left-2 p-2 text-slate-800 hover:text-white z-50 opacity-20 hover:opacity-100 transition-opacity",children:C.jsx(ke,{size:16})}),x&&C.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-black/95 text-green-500 font-mono text-xs p-4 h-64 overflow-y-auto z-40 border-t border-green-900",children:[C.jsxs("div",{className:"flex justify-between sticky top-0 bg-black border-b border-green-900 pb-2 mb-2",children:[C.jsx("strong",{children:"CONSOLE DE DEPURA√á√ÉO"}),C.jsx("button",{onClick:()=>b(!1),className:"text-red-500 font-bold",children:"FECHAR"})]}),v.map((e,t)=>C.jsx("div",{className:"border-b border-gray-900 py-0.5",children:e},t))]})]}):S&&!r?C.jsx("div",{className:"h-screen w-screen bg-slate-950 flex flex-col items-center justify-center text-white gap-4",children:C.jsx(he,{className:"animate-spin text-blue-500",size:48})}):C.jsxs("div",{className:"h-screen w-screen flex flex-col bg-[#0f172a] bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#0f172a] to-black text-slate-200 font-sans selection:bg-blue-500/30 overflow-hidden",children:[C.jsx(Pl,{toasts:R,removeToast:D}),C.jsxs("header",{className:"h-14 md:h-16 border-b border-white/5 flex items-center justify-between px-4 bg-slate-900/80 backdrop-blur-md sticky top-0 z-30 flex-none",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"p-2 bg-blue-600 rounded-lg shadow-lg shadow-blue-900/20",children:C.jsx(ve,{className:"text-white",size:20})}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx("h1",{className:"text-base md:text-lg font-bold text-white tracking-tight leading-tight",children:"Service Desk"}),C.jsx("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-widest hidden md:block",children:"Painel Admin"})]})]}),"kanban"===u&&C.jsx("div",{className:"flex-1 max-w-md mx-4 hidden md:block",children:C.jsxs("div",{className:"relative group",children:[C.jsx(Se,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-blue-400 transition-colors",size:16}),C.jsx("input",{type:"text",placeholder:"Buscar O.S., Cliente...",value:n,onChange:e=>s(e.target.value),className:"w-full bg-slate-800/50 border border-slate-700/50 rounded-lg py-1.5 pl-10 pr-4 text-sm text-slate-200 focus:outline-none focus:border-blue-500 focus:bg-slate-800 transition-all placeholder-slate-500"})]})}),C.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[C.jsxs("div",{className:"flex bg-slate-800/50 p-1 rounded-lg border border-white/5",children:[C.jsxs("button",{onClick:()=>p("kanban"),className:"p-1.5 md:px-3 md:py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 "+("kanban"===u?"bg-blue-600 text-white shadow-md":"text-slate-400 hover:text-white"),title:"Visualiza√ß√£o Kanban",children:[C.jsx(pe,{size:18})," ",C.jsx("span",{className:"hidden lg:inline",children:"Quadro"})]}),C.jsxs("button",{onClick:()=>p("dashboard"),className:"p-1.5 md:px-3 md:py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 "+("dashboard"===u?"bg-blue-600 text-white shadow-md":"text-slate-400 hover:text-white"),title:"Relat√≥rios",children:[C.jsx($,{size:18})," ",C.jsx("span",{className:"hidden lg:inline",children:"Relat√≥rios"})]})]}),C.jsx("div",{className:"h-6 w-px bg-slate-700/50 mx-1 hidden md:block"}),C.jsxs("button",{type:"button",onClick:e=>{e.preventDefault(),V(_.Entry)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white p-2 md:px-3 md:py-2 rounded-lg text-sm font-medium transition-all shadow-lg shadow-blue-900/20 active:scale-95",title:"Nova Ordem de Servi√ßo",children:[C.jsx(we,{size:20}),C.jsx("span",{className:"hidden md:inline",children:"Nova O.S."})]}),C.jsx("button",{onClick:L,className:"p-2 text-slate-400 hover:text-red-400 transition-colors rounded-lg hover:bg-slate-800",title:"Sair",children:C.jsx(fe,{size:20})})]})]}),C.jsx("main",{className:"flex-1 w-full overflow-x-auto overflow-y-hidden bg-slate-950/30 custom-scrollbar pb-2 relative scroll-smooth overscroll-x-contain",children:"kanban"===u?C.jsxs("div",{className:"inline-flex h-full items-start gap-4 md:gap-6 p-4 md:p-6 min-w-full snap-x snap-mandatory",children:[tt.map(e=>C.jsx(ct,{id:e.id,title:e.title,color:e.color,tasks:B.filter(t=>t.columnId===e.id),onDragStart:q,onDragOver:G,onDrop:F,onTaskClick:z,onAddTask:V},e.id)),C.jsx("div",{className:"w-4 shrink-0 h-full"})]}):C.jsx("div",{className:"container mx-auto max-w-7xl h-full overflow-y-auto custom-scrollbar",children:C.jsx(Ol,{tasks:e,currentFee:o,onUpdateFee:e=>{i(e),localStorage.setItem("app_diagnostic_fee",e.toString()),P("Configura√ß√£o Salva",`Taxa de diagn√≥stico atualizada para R$ ${e.toFixed(2)}`,"success")}})})}),C.jsx(jl,{isOpen:N,onClose:()=>A(!1),task:E,onSave:e=>{H(e),P("Salvo","Altera√ß√µes salvas com sucesso.","success")},onDelete:async n=>{if(!n)return;A(!1),w(null);const s=[...e];if(t(e=>e.filter(e=>e.id!==n)),n.startsWith("gen-"))P("Removido","Tarefa rascunho removida.","info");else try{await Ll.deleteTask(n),P("Exclu√≠do","O.S. removida.","success")}catch(o){t(s),P("Erro",o.message,"error")}},showToast:P,diagnosticFee:o}),"kanban"===u&&C.jsx(Rl,{onTasksGenerated:e=>{t(t=>[...t,...e]),P("IA",`${e.length} sugest√µes geradas. Arraste ou edite para salvar.`,"success")}})]}):C.jsx(kl,{onEnterSystem:()=>g(!0)})}Gl&&(console.log=(...e)=>{zl("LOG",e),Fl&&Fl(...e)},console.error=(...e)=>{zl("ERR",e),Hl&&Hl(...e)}),window.onerror=function(e,t,n,s,o){const i=document.getElementById("global-error-display")||document.createElement("div");return i.id="global-error-display",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.backgroundColor="#450a0a",i.style.color="#fecaca",i.style.padding="20px",i.style.zIndex="999999",i.style.fontFamily="monospace",i.style.whiteSpace="pre-wrap",i.innerHTML=`<strong>CRITICAL ERROR:</strong>\n${e}\nAt: ${t}:${n}:${s}\n\nStack:\n${(null==o?void 0:o.stack)||"No stack trace"}`,document.body.appendChild(i),!1};const $l=document.getElementById("root");if(!$l)throw new Error("Could not find root element to mount to");const Jl=j.createRoot($l);try{Jl.render(C.jsx(l.StrictMode,{children:C.jsx(Bl,{})}))}catch(Wl){document.body.innerHTML=`<div style="color:red; padding:20px;"><h1>Falha na Montagem do React</h1><pre>${Wl.message}\n${Wl.stack}</pre></div>`}
